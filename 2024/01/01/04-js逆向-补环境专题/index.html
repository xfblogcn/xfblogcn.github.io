<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="xfblog">
    
    <title>
        
            04_JSé€†å‘_è¡¥ç¯å¢ƒä¸“é¢˜ |
        
        XFBLOG.CN
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/favicon.webp">
    
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/font/css/fontawesome.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/font/css/regular.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/font/css/solid.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/font/css/brands.min.css">
    
        
            
                
<link rel="stylesheet" href="/css/custom-1.css">

            
        
    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.xml"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"XFBLOG.CN","author":"xfblog","avatar":"/images/avatar.webp","logo":"/images/logo.webp","favicon":"/images/favicon.webp"},"menu":{"home":"/ || fa-solid fa-home","archives":"/archives || fa-solid fa-box-archive","categories":"/categories || fa-solid fa-layer-group","links":"/links || fa-solid fa-link","about":"/about || fa-solid fa-circle-info"},"first_screen":{"enable":true,"background_img":"/images/home_light.webp","background_img_dark":"/images/home_dark.webp","description":null,"hitokoto":false},"social_contact":{"enable":true,"links":{"github":"https://github.com/xfblogcn","weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":true,"hide_header":true},"home":{"announcement":"ç‰ˆæƒå£°æ˜ï¼šæœ¬ç«™æ‰€æœ‰æ–‡ç« å‡ä¸º xfblog.cn å°å‚…åŸåˆ›ï¼Œè¯·éµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚","category":true,"tag":true,"post_datetime":"created","post_datetime_format":"YYYY-MM-DD"},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":true,"min2read":true},"datetime_format":"YYYY-MM-DD","copyright_info":true,"share":true,"reward":{"enable":true,"img_link":"/images/zfb.webp","text":"åˆ›ä½œä¸æ˜“ï¼Œæ‰“èµéšæ„ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›ğŸ’ªï¼"}},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"obsidian"},"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":true,"site_uv":false,"site_pv":false,"page_pv":true}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.36"},"waline":{"server_url":null,"reaction":false,"version":"3.2.1"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":true},"lazyload":{"enable":true},"cdn":{"enable":true,"provider":"jsdelivr"},"pjax":{"enable":true},"footer":{"since":2021,"word_count":false,"site_deploy":{"enable":false,"provider":"github","url":null},"record":{"enable":true,"list":[{"code":"èœ€ICPå¤‡2021021033å·-1","link":"https://beian.miit.gov.cn"},{"code":"å·å…¬ç½‘å®‰å¤‡ 51138102000134å·","link":"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51138102000134"}]}},"inject":{"enable":true,"css":["/css/custom-1.css"],"js":["/js/run_time.js","/js/code_click_copy.js","/js/copyrightpro.js"]},"root":"","source_data":{},"version":"4.2.5"}
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"}
    KEEP.language_code_block = {"copy":"å¤åˆ¶ä»£ç ","copied":"å·²å¤åˆ¶","fold":"æŠ˜å ä»£ç å—","folded":"å·²æŠ˜å "}
    KEEP.language_copy_copyright = {"copy":"å¤åˆ¶ç‰ˆæƒä¿¡æ¯","copied":"å·²å¤åˆ¶","title":"åŸæ–‡æ ‡é¢˜","author":"åŸæ–‡ä½œè€…","link":"åŸæ–‡é“¾æ¥"}
  </script>
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Keep" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.webp">
                </a>
            
            <a class="site-name border-box" href="/">
               XFBLOG.CN
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-home"></i>
                                
                                é¦–é¡µ
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                
                                å½’æ¡£
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/categories">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                
                                åˆ†ç±»
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/links">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-link"></i>
                                
                                å‹é“¾
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/about">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-circle-info"></i>
                                
                                å…³äº
                                
                            </a>
                            
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="menu-text-color fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-home"></i>
                                </span>
                            
                            é¦–é¡µ
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                </span>
                            
                            å½’æ¡£
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/categories">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                </span>
                            
                            åˆ†ç±»
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/links">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-link"></i>
                                </span>
                            
                            å‹é“¾
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/about">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-circle-info"></i>
                                </span>
                            
                            å…³äº
                        </a>
                        
                    </label>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        04_JSé€†å‘_è¡¥ç¯å¢ƒä¸“é¢˜
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.webp">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">xfblog</span>
                                
                                    <span class="author-badge">Lv3</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2024-01-01</span>
            </span>

            
                <span class="meta-info-item post-update-date">
                    <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                    <span class="datetime" data-updated="Wed Nov 27 2024 23:19:31 GMT+0800">2024-11-27</span>
                </span>
            
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Python/">Python</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a></li>
                        
                    
                </ul>
            </span>
        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>34.5k å­—</span>
            </span>
        
        
            <span class="meta-info-item post-min2read">
                <i class="icon fas fa-clock"></i>&nbsp;<span>158 åˆ†é’Ÿ</span>
            </span>
        
        
            <span class="meta-info-item post-pv">
                <i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <h2 id="ä¸€ã€JS-è¯­æ³•åŸºç¡€"><a href="#ä¸€ã€JS-è¯­æ³•åŸºç¡€" class="headerlink" title="ä¸€ã€JS è¯­æ³•åŸºç¡€"></a>ä¸€ã€JS è¯­æ³•åŸºç¡€</h2><h3 id="1-åŸºç¡€è¯­æ³•"><a href="#1-åŸºç¡€è¯­æ³•" class="headerlink" title="1. åŸºç¡€è¯­æ³•"></a>1. åŸºç¡€è¯­æ³•</h3><ul>
<li><p><strong>null å’Œ undefinedï¼š</strong>null çš„ç±»å‹æ˜¯å¯¹è±¡ï¼Œå³ objectã€‚null å’Œ undefined éƒ½æ˜¯ falseï¼Œä½†æ˜¯ null æ˜¯è¡¨ç¤ºä¸€ä¸ª**â€ç©ºâ€çš„å¯¹è±¡<strong>ï¼Œè½¬æ¢ä¸ºæ•°å€¼ä¸º 0ï¼Œè€Œ undefined æ˜¯è¡¨ç¤ºä¸€ä¸ª</strong>â€œæ­¤å¤„æ— å®šä¹‰â€çš„åŸå§‹å€¼**ï¼Œè½¬æ¢ä¸ºæ•°å€¼ä¸º NaN</p>
</li>
<li><p><strong>NaNï¼š</strong>è¡¨ç¤ºéæ•°å­—ï¼Œä¸»è¦å‡ºç°åœ¨å­—ç¬¦ä¸²è§£ææˆæ•°å­—å‡ºé”™çš„åœºåˆ</p>
<ul>
<li>NaN ä¸æ˜¯ç‹¬ç«‹çš„æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªç‰¹æ®Šæ•°å€¼ï¼Œæ•°æ®ç±»å‹ä¸º Number</li>
<li>NaN ä¸ç­‰äºä»»ä½•å€¼ï¼ŒåŒ…æ‹¬å…¶æœ¬èº«</li>
<li>NaN ä¸ä»»ä½•æ•°ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰çš„è¿ç®—ï¼Œå¾—åˆ°çš„éƒ½æ˜¯ NaN</li>
</ul>
</li>
<li><p><strong>æŸ¥çœ‹ç±»å‹çš„è¿ç®—ç¬¦ï¼š</strong></p>
<ol>
<li><strong>typeofï¼š</strong>è¿”å›ä¸€ä¸ªå€¼çš„æ•°æ®ç±»å‹</li>
<li><strong>instanceofï¼š</strong>è¡¨ç¤ºå¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹</li>
</ol>
</li>
<li><p><strong>å¸ƒå°”å€¼ï¼š</strong>åœ¨ js ä¸­åªæœ‰ 6 ç§å€¼ falseã€undefinedã€nullã€0 æˆ– -0ã€NaNã€â€â€ æˆ– â€˜â€™ ä¸º false å‡ï¼Œå…¶ä½™å‡ä¸º true çœŸ</p>
</li>
<li><p><strong>å­—ç¬¦ä¸²ï¼š</strong>å¯ä»¥ä½¿ç”¨ &#96;&#96; è¡¨ç¤ºæ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼Œè¾“å‡ºå¤šè¡Œï¼Œå…¶ä¸­ä½¿ç”¨ ${} å¯ä»¥åŠ¨æ€ä¼ å‚</p>
</li>
<li><p><strong>Base64 è½¬ç ï¼š</strong></p>
<ul>
<li>btoa()ï¼šä»»æ„å€¼è½¬ä¸º Base64 ç¼–ç ï¼ˆé ASCII ç  â€“&gt; ä¸­æ–‡è¦è½¬ç å† base64ï¼Œen&#x2F;decodeURLComponentï¼‰</li>
<li>atob()ï¼šBase64 ç¼–ç è½¬ä¸ºåŸæ¥çš„å€¼</li>
<li>nodejs â€“&gt; base64 ç¼–ç ï¼š<code>var b64encode = Buffer.from(&#39;JavaScript&#39;).toString(&#39;base64&#39;)</code></li>
<li>nodejs â€“&gt; base64 è§£ç ï¼š<code>var b64decode = Buffer.from(b64encode, &#39;base64&#39;).toString()</code></li>
</ul>
</li>
<li><p><strong>å¯¹è±¡ï¼š</strong></p>
<ul>
<li>æŸ¥çœ‹å¯¹è±¡ obj çš„æ‰€æœ‰å±æ€§ï¼šObject.keys(obj)</li>
<li><strong>åˆ¤æ–­å±æ€§ï¼šobj.hasOwnProperty(â€˜toStringâ€™) æ–¹æ³•ç”¨äºåˆ¤æ–­å±æ€§ toString æ˜¯å¦ä¸ºå¯¹è±¡è‡ªèº«çš„å±æ€§</strong></li>
<li>å±æ€§éå†ï¼šfor â€¦ in å¾ªç¯å¯ä»¥éå†ä¸€ä¸ªå¯¹è±¡çš„å…¨éƒ¨å±æ€§ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„å±æ€§ï¼ˆå¯ä»¥é…åˆ hasOwnPropertyï¼‰</li>
</ul>
</li>
<li><p><strong>å‡½æ•°ï¼š</strong></p>
<ul>
<li><strong>æ··æ·†å£°æ˜æ–¹å¼ï¼š</strong><code>var c = New Function(&#39;a&#39;,&#39;b&#39;,&#39;return a+b&#39;); console.log(c(1, 2)); --&gt; 3</code></li>
<li><strong>è¿”å›å€¼ï¼š</strong>å½“å‡½æ•° return å¤šä¸ªå€¼ç”¨é€—å·é—´éš”æ—¶ï¼Œåªèƒ½æˆåŠŸè¿”å›æœ€åä¸€ä¸ªå€¼ï¼ˆ<strong>é€—å·è¡¨è¾¾å¼</strong>ï¼Œæ•°ç»„&#x2F;å¯¹è±¡è§£å†³ï¼‰</li>
</ul>
</li>
<li><p><strong>å˜é‡æå‡ï¼š</strong></p>
<ol>
<li><strong>å˜é‡æå‡ï¼š</strong>å˜é‡ä½¿ç”¨ var å£°æ˜æ—¶ï¼Œjså¼•æ“ä¼šå°†å˜é‡å£°æ˜æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä½†ä¸ä¼šæå‡å…¶èµ‹å€¼æ“ä½œ</li>
<li><strong>å‡½æ•°æå‡ï¼šæ•´ä¸ªå‡½æ•°</strong>éƒ½ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ã€‚å› æ­¤ï¼Œå£°æ˜çš„å‡½æ•°å¯ä»¥åœ¨å…¶å®šä¹‰ä¹‹å‰è°ƒç”¨</li>
<li><strong>let å’Œ constï¼š</strong>ä¸ var ä¸åŒï¼Œä½¿ç”¨ let å’Œ const å£°æ˜çš„å˜é‡è¢«æå‡åå­˜åœ¨**â€æš‚æ—¶æ€§æ­»åŒºâ€**ï¼Œä½¿ç”¨å®ƒä»¬ä¹‹å‰ä¼šæŠ›å‡º ReferenceError å¼‚å¸¸ï¼Œå³åœ¨å£°æ˜ä¹‹å‰æ— æ³•è®¿é—®è¿™äº›å˜é‡</li>
</ol>
</li>
<li><p><strong>é—­åŒ…ï¼š</strong>é—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°ã€‚æœ€å¤§çš„ä½œç”¨æ˜¯å¯ä»¥è¯»å–å¤–å±‚å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è®©è¿™äº›å˜é‡å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// è®¡æ•°å™¨å®ç°ï¼Œcountæ˜¯få‡½æ•°å†…éƒ¨çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåªèƒ½è¢«få‡½æ•°å†…éƒ¨çš„addå‡½æ•°è®¿é—®ã€‚</span><br><span class="line">// ç”±äºcountæ˜¯å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå®ƒä¸ä¼šè¢«å¤–éƒ¨ä»£ç ç›´æ¥è¯»å–æˆ–ä¿®æ”¹ï¼Œè¿™ç§ç‰¹æ€§ç¡®ä¿äº†å˜é‡çš„å°è£…å’Œæ•°æ®å®‰å…¨</span><br><span class="line">function f() &#123;</span><br><span class="line">    var count = 0;</span><br><span class="line">    function add() &#123;</span><br><span class="line">        count++</span><br><span class="line">        console.log(count);</span><br><span class="line">    &#125;</span><br><span class="line">    return add;</span><br><span class="line">&#125;</span><br><span class="line">var f2 = f()</span><br><span class="line">f2()  // 1</span><br><span class="line">f2()  // 2</span><br><span class="line">f2()  // 3</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>evalå‡½æ•°ï¼šæœ¬è´¨æ˜¯åœ¨å½“å‰ä½œç”¨åŸŸä¹‹ä¸­æ³¨å…¥ä»£ç ï¼Œæ²¡æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œéƒ½æ˜¯åœ¨å½“å‰ä½œç”¨åŸŸå†…æ‰§è¡Œ</strong>ï¼ˆæ··æ·†å¸¸ç”¨ï¼‰</p>
<ul>
<li><strong>åˆ«åè°ƒç”¨ï¼š</strong>ä¸ºäº†ä¿è¯ eval çš„åˆ«åä¸å½±å“ä»£ç ä¼˜åŒ–ï¼Œæ‰€ä»¥ eval å¦‚æœåˆ«åè°ƒç”¨åˆ™ eval å†…éƒ¨ä¸€å¾‹æ˜¯å…¨å±€ä½œç”¨åŸŸ</li>
</ul>
</li>
<li><p><strong>æ•°ç»„ï¼š</strong></p>
<ol>
<li>æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œtypeof ç±»å‹ä¸º Objectï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Object.keys(array) æ‰“å°å‡ºæ‰€æœ‰å…ƒç´ </li>
<li>æ•°ç»„çš„ length å±æ€§æ˜¯å¯å†™çš„ï¼Œç›¸å½“äºæˆªæ–­ï¼Œè®¾ç½®ä¸º 0 åˆ™ç›´æ¥æ¸…ç©ºæ•°ç»„</li>
<li>å¯ä»¥åƒå¯¹è±¡ä¸€æ ·æ·»åŠ é”®å€¼å¯¹ï¼Œä½†æ˜¯ä¸ä¼šå¢åŠ æ•°ç»„ length é•¿åº¦ï¼Œä¹Ÿæ— æ³•é€šè¿‡ arr.length &#x3D; 0 æ¸…é™¤æ‰æ­¤é”®å€¼å¯¹</li>
</ol>
</li>
<li><p><strong>å¼‚å¸¸æ•è·ï¼š</strong>åœ¨å¼‚å¸¸ä¸­ï¼Œ<strong>æµè§ˆå™¨çš„å¼‚å¸¸å †æ ˆä¿¡æ¯å’Œ nodejs çš„å¼‚å¸¸å †æ ˆä¿¡æ¯å¯èƒ½ä¸ä¸€æ ·ï¼Œä¹Ÿå¯èƒ½æˆä¸ºç¯å¢ƒæ£€æµ‹ç‚¹</strong></p>
</li>
</ul>
<h3 id="2-å‡½æ•°çš„-arguments-å¯¹è±¡"><a href="#2-å‡½æ•°çš„-arguments-å¯¹è±¡" class="headerlink" title="2. å‡½æ•°çš„ arguments å¯¹è±¡"></a>2. å‡½æ•°çš„ arguments å¯¹è±¡</h3><ul>
<li><strong>argumentså¯¹è±¡ï¼š</strong>åœ¨ js ä¸­ï¼Œå‡½æ•°çš„å½¢å‚å¯é€šè¿‡ arguments å¯¹è±¡è·å–ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†ä¼ é€’ç»™å‡½æ•°çš„æ‰€æœ‰å®å‚<ul>
<li>é€šè¿‡æ•°ç»„å½¢å¼è¾“å‡ºæ‰€æœ‰å½¢å‚ï¼š<code>Array.prototype.slice.call(arguments);</code></li>
<li>arguments.callee å±æ€§ï¼šè¿”å›å¯¹åº”çš„åŸå‡½æ•°</li>
</ul>
</li>
<li><strong>å¯¹æ¯” pythonï¼š</strong>åœ¨ Python ä¸­ï¼Œå¦‚æœå‡½æ•°çš„å®šä¹‰ä¸­æ²¡æœ‰ä½¿ç”¨ *args æˆ– **kwargsï¼Œåˆ™å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶å®å‚ä¸å½¢å‚å¿…é¡»ç›¸åŒ¹é…ï¼Œå¦åˆ™ python å°†å¼•å‘ TypeError å¼‚å¸¸ï¼Œè€Œ js ä¸ä¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡ arguments å¯¹è±¡æ¥å¤„ç†ä¼ é€’çš„å‚æ•°</span><br><span class="line">function fun1() &#123;</span><br><span class="line">    console.log(arguments[&#x27;0&#x27;])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun1(1, 2)  // 1</span><br></pre></td></tr></table></figure>

<h3 id="3-è‡ªæ‰§è¡Œå‡½æ•°"><a href="#3-è‡ªæ‰§è¡Œå‡½æ•°" class="headerlink" title="3. è‡ªæ‰§è¡Œå‡½æ•°"></a>3. è‡ªæ‰§è¡Œå‡½æ•°</h3><ul>
<li><strong>æ³¨æ„ï¼š</strong>ç”±äº js ä»£ç æ˜¯å¯ä»¥å‹ç¼©æˆä¸€è¡Œçš„ï¼Œæ‰€ä»¥è‡ªæ‰§è¡Œæ–¹æ³•å‰çš„å±æ€§æˆ–æ–¹æ³•å¿…é¡»ä»¥é¡¿å·ç»“å°¾ï¼Œæ‰€ä»¥é€šå¸¸<strong>åœ¨è‡ªæ‰§è¡Œæ–¹æ³•å‰åŠ ä¸Šå¼ºåˆ¶ç¬¦ï¼ˆ! æˆ– ~ï¼‰ï¼Œå¯ä»¥é¿å…å…¶å› æ•´ä½“è¢«å½“ä½œä¸Šä¸€ä¸ªå±æ€§æˆ–æ–¹æ³•çš„æ–¹æ³•è°ƒç”¨è€ŒæŠ›å‡ºçš„å¼‚å¸¸</strong></li>
<li><strong>ä½œç”¨ï¼š</strong><ol>
<li>ä¸å¿…ä¸ºå‡½æ•°å‘½åï¼Œé¿å…äº†æ±¡æŸ“å…¨å±€å˜é‡</li>
<li>è‡ªæ‰§è¡Œå‡½æ•°å†…éƒ¨å½¢æˆäº†ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå¯ä»¥å°è£…ä¸€äº›å¤–éƒ¨æ— æ³•è¯»å–çš„ç§æœ‰å˜é‡</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!(function () &#123; var a = 1; console.log(a) &#125;)()</span><br><span class="line"></span><br><span class="line">console.log(a);  // ReferenceError: a is not defined</span><br></pre></td></tr></table></figure>

<h3 id="4-åŸå‹é“¾ä¸æ„é€ å‡½æ•°"><a href="#4-åŸå‹é“¾ä¸æ„é€ å‡½æ•°" class="headerlink" title="4. åŸå‹é“¾ä¸æ„é€ å‡½æ•°"></a>4. åŸå‹é“¾ä¸æ„é€ å‡½æ•°</h3><blockquote>
<p><strong>Object å¯¹è±¡ï¼š</strong>js ä¸­æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿è‡ª Object å¯¹è±¡ï¼Œå³å¯¹è±¡éƒ½æ˜¯ Object çš„å®ä¾‹</p>
<ol>
<li><strong>é€šè¿‡ dir(Object) å¯ä»¥æŸ¥çœ‹å¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§</strong></li>
<li>é€šè¿‡å·²åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ obj ä½œä¸ºæ¨¡ç‰ˆï¼Œä½¿ç”¨ <code>var obj2 = Object.create(obj, &#123;b:&#39;123&#39;&#125;)</code> å¯ä»¥ç”Ÿæˆæ–°çš„å®ä¾‹å¯¹è±¡ï¼Œå…¶ä¸­ obj2 æ˜¯ç»§æ‰¿è‡³ obj å¯¹è±¡ï¼ŒåŒºåˆ«æ˜¯ obj çš„åŸå‹æŒ‡å‘ Object.prototypeï¼Œè€Œ obj2 çš„åŸå‹æŒ‡å‘ create çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœå‚æ•°ä¸ºç©ºå¯¹è±¡ï¼Œåˆ™æ²¡æœ‰åŸå‹</li>
</ol>
<p><strong>åŸå‹é“¾</strong>ï¼šåœ¨ js ä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„åŸå‹å¯¹è±¡ prototypeï¼Œ<strong>ä½œç”¨æ˜¯å®ç°ç»§æ‰¿</strong>ã€‚å½“éœ€è¦è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œjs å¼•æ“ä¼šé¦–å…ˆåœ¨è¯¥å¯¹è±¡æœ¬èº«æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šæ²¿ç€å®ä¾‹çš„ __proto__ å³æ„é€ å‡½æ•°çš„ prototype çš„é¡ºåºåœ¨åŸå‹ä¸­å¾€ä¸Šæ–¹æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ° Object.prototype ä¸ºæ­¢ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ¥é”™æˆ–è¿”å› undefined</p>
<p><strong>æ³¨æ„ï¼š</strong>__proto__ å’Œ prototype æœ¬èº«æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯åŸå‹ï¼Œåªæ˜¯ä¸€ä¸ªåœ¨å®ä¾‹å¯¹è±¡ä¸Šï¼Œä¸€ä¸ªåœ¨æ„é€ å‡½æ•°ä¸Š</p>
</blockquote>
<ul>
<li><p><strong>åŸå‹å¯¹è±¡ Object.prototype çš„ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>å¦‚æœåŸå‹å¯¹è±¡ä¸Šçš„å±æ€§æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œé‚£ä¹ˆä¸€ä¸ªå®ä¾‹æ”¹å˜äº†å¼•ç”¨çš„å±æ€§ï¼Œå°±ä¼šç›´æ¥æ”¹å˜åŸå‹ä¸Šæ­¤å¼•ç”¨çš„å±æ€§</li>
</ol>
</li>
<li><p><strong>constructor å±æ€§ï¼š</strong>prototype å¯¹è±¡æœ‰ä¸€ä¸ª constructor å±æ€§ï¼Œé»˜è®¤æŒ‡å‘ prototype å¯¹è±¡æ‰€åœ¨çš„æ„é€ å‡½æ•°</p>
<ol>
<li><strong>å®ä¾‹çš„ constructor å±æ€§æ˜¯æ„é€ å‡½æ•°</strong>ï¼Œå³ <code>navigator.constructor == Navigator</code></li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// ç®€å•çš„è¿‡ç¯å¢ƒæ£€æµ‹ï¼ˆä¸å¤ªä¼˜é›…ï¼Œä¸å¤ªå¥½ç”¨ï¼‰</span><br><span class="line">var navigator = &#123;&#125;</span><br><span class="line">// console.log(navigator.constructor);</span><br><span class="line">function Navigator() &#123; &#125;</span><br><span class="line">// console.log(Navigator);</span><br><span class="line">var navigator = new Navigator();</span><br><span class="line">// console.log(navigator.constructor.toString());</span><br><span class="line">navigator.constructor.toString = function () &#123;</span><br><span class="line">    return &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç®€å•çš„è¿‡ç¯å¢ƒæ£€æµ‹ï¼ˆä¼˜é›…çš„ï¼‰</span><br><span class="line">function Navigator() &#123; &#125;</span><br><span class="line">Navigator.prototype.constructor.toString = function () &#123;</span><br><span class="line">    return &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">// ç¬¬ä¸€ç§æ–¹å¼</span><br><span class="line">// var navigator = new Navigator();</span><br><span class="line">// ç¬¬äºŒç§æ–¹å¼ï¼ˆåŒç¬¬ä¸‰ç§ï¼Œä¸åŒå†™æ³•ï¼‰</span><br><span class="line">// var navigator = &#123;&#125;;</span><br><span class="line">// Object.setPrototypeOf(navigator, Navigator.prototype)</span><br><span class="line">// ç¬¬ä¸‰ç§æ–¹å¼</span><br><span class="line">var navigator = Object.setPrototypeOf(&#123;&#125;, Navigator.prototype)</span><br><span class="line">console.log(Object.getPrototypeOf(navigator) == Navigator.prototype);  // true</span><br><span class="line"></span><br><span class="line">console.log(navigator.constructor);</span><br><span class="line">console.log(navigator.constructor === Navigator);  // true</span><br><span class="line">console.log(navigator.constructor.toString());</span><br><span class="line"></span><br><span class="line">function checknavigator() &#123;</span><br><span class="line">    return navigator.constructor.toString() === &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">console.log(checknavigator());  // true</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ„é€ å‡½æ•°çš„åŸå‹é“¾å…³ç³»ï¼š</strong><ol>
<li>å®ä¾‹çš„ __proto__ æŒ‡å‘æ„é€ å‡½æ•°çš„ prototypeï¼Œ<code>navigator.__proto__ === Navigator.prototype</code>ï¼Œè¿™ä¸ªç§°ä¸º<strong>æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</strong></li>
<li>æ„é€ å‡½æ•°çš„ __proto__ æŒ‡å‘ Function.prototypeï¼ˆ<strong>åŒ…æ‹¬ Function è‡ªå·±</strong>ï¼‰ï¼Œå³æ„é€ å‡½æ•°çš„ constructor å±æ€§å°±æ˜¯ Functionï¼Œæœ‰ <code>Navigator.constructor == Function</code>ï¼Œå¾— <code>Navigator.__proto__ === Function.prototype</code>ï¼Œå€¼ä¸º <code>Æ’ () &#123; [native code] &#125;</code>ï¼Œæš‚æ—¶å°† Function ç§°ä¸º<strong>æ„é€ å™¨å‡½æ•°</strong></li>
<li>æ„é€ å™¨å‡½æ•°çš„ __proto__ æŒ‡å‘ Object.prototypeï¼Œä½†æ˜¯ç”±äºå…¶è‡ªå·±ä¹Ÿæ˜¯æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ <code>Function.constructor == Function</code>ï¼Œå³ <code>Navigator.__proto__.__proto__ === Function.__proto__.__proto__. === Object.prototype</code>ï¼Œ<strong>åŒ…å«äº†æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿çš„æ–¹æ³•å’Œå±æ€§</strong></li>
</ol>
</li>
</ul>
<h3 id="5-Object-ç›¸å…³é‡ç‚¹æ–¹æ³•"><a href="#5-Object-ç›¸å…³é‡ç‚¹æ–¹æ³•" class="headerlink" title="5. Object ç›¸å…³é‡ç‚¹æ–¹æ³•"></a>5. Object ç›¸å…³é‡ç‚¹æ–¹æ³•</h3><blockquote>
<p><strong>æ³¨æ„ï¼šå¾ˆå¤šæ–¹æ³•æœ‰ä¸¤ç§å†™æ³•</strong></p>
<ol>
<li><strong>å…ˆå®šä¹‰å¯¹è±¡ï¼Œå†åœ¨ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šè¯¥å¯¹è±¡ï¼Œè€Œåå‚æ•°å¯¹è¯¥å¯¹è±¡è¿›è¡Œæ“ä½œ</strong></li>
<li><strong>å®šä¹‰å¯¹è±¡æ—¶èµ‹å€¼ï¼Œèµ‹å€¼ä¸ºè°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºå¯¹è±¡çš„å€¼ï¼Œè€Œåå‚æ•°å¯¹è¯¥å¯¹è±¡è¿›è¡Œæ“ä½œ</strong></li>
</ol>
</blockquote>
<ul>
<li><p><strong>Object çš„é™æ€æ–¹æ³•ï¼Œå³éƒ¨ç½²åœ¨ Object å¯¹è±¡è‡ªèº«ä¸Šçš„æ–¹æ³•ï¼š</strong></p>
<ol>
<li><p>Object.keys()ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§åç»„æˆçš„æ•°ç»„ã€‚åªéå†è‡ªæœ‰å±æ€§ï¼Œä¸”ä»…è¿”å›å¯æšä¸¾çš„å±æ€§å</p>
</li>
<li><p>Object.getOwnPropertyName()ï¼šè¿”å›å¯¹è±¡è‡ªèº«æ‰€æœ‰å±æ€§çš„å±æ€§åï¼Œ<strong>åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§</strong>ï¼Œç»„æˆä¸€ä¸ªæ•°ç»„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123; a: 1 &#125;;</span><br><span class="line">Object.defineProperty(obj, &#x27;b&#x27;, &#123; value: 2, enumerable: false &#125;);</span><br><span class="line">console.log(Object.getOwnPropertyNames(obj)); // [&#x27;a&#x27;, &#x27;b&#x27;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Object.getOwnPropertyDescriptor(obj, prop)ï¼šç”¨äºè·å–å¯¹è±¡ä¸­æŸä¸ªç‰¹å®šå±æ€§çš„å±æ€§æè¿°ç¬¦</p>
</li>
<li><p><strong>Object.getOwnPropertyDescriptors()ï¼š</strong>è¿”å›å¯¹è±¡è‡ªèº«æ‰€æœ‰å±æ€§çš„å±æ€§æè¿°ç¬¦å¯¹è±¡ï¼ŒåŒ…æ‹¬å¯å¦æšä¸¾çš„å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123; a: 1 &#125;;</span><br><span class="line">Object.defineProperty(obj, &#x27;b&#x27;, &#123; value: 2, enumerable: false &#125;);</span><br><span class="line">console.log(Object.getOwnPropertyDescriptors(obj));</span><br><span class="line">// &#123;</span><br><span class="line">//   a: &#123; value: 1, writable: true, enumerable: true, configurable: true &#125;,</span><br><span class="line">//   b: &#123; value: 2, writable: false, enumerable: false, configurable: false &#125;</span><br><span class="line">// &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Object.defineProperty()ï¼š</strong>ç»™å¯¹è±¡å®šä¹‰æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„å±æ€§æè¿°ç¬¦ï¼Œé€šè¿‡æè¿°ç¬¦æ§åˆ¶è¯¥å±æ€§çš„è¡Œä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;&#125;;</span><br><span class="line">Object.defineProperty(obj, &#x27;a&#x27;, &#123; value: 1, writable: false &#125;);</span><br><span class="line">console.log(obj.a); // 1</span><br><span class="line">obj.a = 2;</span><br><span class="line">console.log(obj.a); // 1 ï¼ˆå±æ€§ä¸å¯å†™ï¼‰</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Object.defineProperties()ï¼š</strong>ä¸€æ¬¡æ€§å®šä¹‰æˆ–ä¿®æ”¹å¯¹è±¡çš„å¤šä¸ªå±æ€§åŠå…¶å±æ€§æè¿°ç¬¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;&#125;;</span><br><span class="line">Object.defineProperties(obj, &#123;</span><br><span class="line">  a: &#123; value: 1, writable: true &#125;,</span><br><span class="line">  b: &#123; value: 2, writable: false &#125;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(obj.a); // 1</span><br><span class="line">console.log(obj.b); // 2</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Object.getPrototypeOf() æ£€æµ‹ç‚¹ï¼š</strong>è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼ˆå³ [[Prototype]] å†…éƒ¨å±æ€§ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;&#125;;</span><br><span class="line">const proto = Object.getPrototypeOf(obj);</span><br><span class="line">console.log(proto === Object.prototype); // true</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Object.setPrototypeOf()ï¼š</strong>è®¾ç½®æŒ‡å®šå¯¹è±¡çš„åŸå‹ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æˆ– null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const proto = &#123; greet: () =&gt; console.log(&#x27;Hello!&#x27;) &#125;;</span><br><span class="line">const obj = &#123;&#125;;</span><br><span class="line">Object.setPrototypeOf(obj, proto);</span><br><span class="line">obj.greet(); // &#x27;Hello!&#x27;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>Object çš„å®ä¾‹æ–¹æ³•ï¼š</strong></p>
<ol>
<li><p><strong>Object.prototype.valueOf()ï¼š</strong>è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå§‹å€¼ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹äºåŸºæœ¬å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›å¯¹è±¡æœ¬èº«</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123; a: 1 &#125;;</span><br><span class="line">console.log(obj.valueOf());  // è¾“å‡ºï¼š&#123; a: 1 &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Object.prototype.toString()ï¼š</strong>è¿”å›ä¸€ä¸ªè¡¨ç¤ºå¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚é»˜è®¤æƒ…å†µè¿”å›å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œç”±äºå®ä¾‹å¯¹è±¡å¯ä»¥ç›´æ¥é‡å†™æ­¤æ–¹æ³•æ¥è¦†ç›–æ‰åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ€å¥½ç›´æ¥ä½¿ç”¨ Object.prototype.toString.call() æ–¹æ³•ï¼Œå¯ä»¥è·å–åŸç”Ÿçš„ç±»å‹åˆ¤æ–­ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123; a: 1 &#125;;</span><br><span class="line">console.log(obj.toString());  // è¾“å‡ºï¼š[object Object]</span><br><span class="line"></span><br><span class="line">console.log(Object.prototype.toString.call(123));          // [object Number]</span><br><span class="line">console.log(Object.prototype.toString.call(&#x27;hello&#x27;));      // [object String]</span><br><span class="line">console.log(Object.prototype.toString.call(true));         // [object Boolean]</span><br><span class="line">console.log(Object.prototype.toString.call([]));           // [object Array]</span><br><span class="line">console.log(Object.prototype.toString.call(&#123;&#125;));           // [object Object]</span><br><span class="line">console.log(Object.prototype.toString.call(null));         // [object Null]</span><br><span class="line">console.log(Object.prototype.toString.call(undefined));    // [object Undefined]</span><br><span class="line">console.log(Object.prototype.toString.call(function()&#123;&#125;)); // [object Function]</span><br><span class="line">console.log(Object.prototype.toString.call(/regex/));      // [object RegExp]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Object.prototype.toLocaleString()ï¼šç±»ä¼¼äº toString()ï¼Œè¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„æœ¬åœ°å­—ç¬¦ä¸²å½¢å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let date = new Date();</span><br><span class="line">console.log(date.toLocaleString());  // æ ¹æ®æœ¬åœ°è®¾ç½®è¾“å‡ºæ—¥æœŸå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Object.prototype.hasOwnProperty()ï¼š</strong>ç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ï¼ˆè¿™ä¸ªå±æ€§ä¸èƒ½æ˜¯ä»åŸå‹é“¾ç»§æ‰¿çš„ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123; a: 1 &#125;;</span><br><span class="line">console.log(obj.hasOwnProperty(&#x27;a&#x27;));  // è¾“å‡ºï¼štrue</span><br><span class="line">console.log(obj.hasOwnProperty(&#x27;toString&#x27;));  // è¾“å‡ºï¼šfalseï¼ˆæ¥è‡ªåŸå‹é“¾ï¼‰</span><br></pre></td></tr></table></figure>
</li>
<li><p>Object.prototype.isPrototypeOf()ï¼šæ£€æŸ¥æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨äºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function Parent() &#123;&#125;</span><br><span class="line">function Child() &#123;&#125;</span><br><span class="line">Child.prototype = Object.create(Parent.prototype);</span><br><span class="line">let child = new Child();</span><br><span class="line">console.log(Parent.prototype.isPrototypeOf(child));  // è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>
</li>
<li><p>Object.prototype.propertylsEnumerable()ï¼šç”¨äºåˆ¤æ–­å¯¹è±¡çš„æŸä¸ªå±æ€§æ˜¯å¦å¯æšä¸¾ã€‚ä¸å¯æšä¸¾çš„åˆ™è¿”å› false</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123; a: 1 &#125;;</span><br><span class="line">console.log(obj.propertyIsEnumerable(&#x27;a&#x27;));  // è¾“å‡ºï¼štrue</span><br><span class="line">console.log(obj.propertyIsEnumerable(&#x27;toString&#x27;));  // è¾“å‡ºï¼šfalseï¼ˆç»§æ‰¿çš„å±æ€§ä¸å¯æšä¸¾ï¼‰</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="6-å¸¸ç”¨å¯¹è±¡-API"><a href="#6-å¸¸ç”¨å¯¹è±¡-API" class="headerlink" title="6. å¸¸ç”¨å¯¹è±¡ API"></a>6. å¸¸ç”¨å¯¹è±¡ API</h3><ul>
<li><p><strong>æ§åˆ¶å°APIï¼š</strong></p>
<ol>
<li><p>inspect(object)ï¼šæ‰“å¼€ç›¸å…³é¢æ¿ï¼Œå¹¶é€‰ä¸­ç›¸åº”çš„å…ƒç´ ï¼Œæ˜¾ç¤ºå…¶ç»†èŠ‚</p>
</li>
<li><p><strong>getEventListenersï¼š</strong>æ˜¯ Chrome å¼€å‘è€…å·¥å…·ä¸­å†…ç½®çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè·å–ç‰¹å®š DOM å…ƒç´ ä¸Šæ³¨å†Œçš„æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶åŠå…¶å›è°ƒå‡½æ•°ã€‚æ¯ä¸ªäº‹ä»¶ï¼ˆå¦‚ clickã€keydownï¼‰éƒ½ä¼šä½œä¸ºè¿”å›å¯¹è±¡çš„å±æ€§åï¼Œå±æ€§å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ç»‘å®šåœ¨è¯¥äº‹ä»¶ä¸Šçš„å›è°ƒå‡½æ•°åŠç›¸å…³ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// é€‰æ‹©ä¸€ä¸ªæŒ‰é’®å…ƒç´ </span><br><span class="line">var button = document.querySelector(&#x27;button&#x27;);</span><br><span class="line"></span><br><span class="line">// ç»™æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶å’Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶</span><br><span class="line">button.addEventListener(&#x27;click&#x27;, () =&gt; console.log(&#x27;Button clicked!&#x27;));</span><br><span class="line">button.addEventListener(&#x27;mousemove&#x27;, () =&gt; console.log(&#x27;Mouse moved!&#x27;));</span><br><span class="line"></span><br><span class="line">getEventListeners(button);</span><br><span class="line">&#123;</span><br><span class="line">  click: [</span><br><span class="line">    &#123;listener: Æ’, useCapture: false, passive: false, once: false, type: &quot;click&quot;&#125;</span><br><span class="line">  ],</span><br><span class="line">  mousemove: [</span><br><span class="line">    &#123;listener: Æ’, useCapture: false, passive: false, once: false, type: &quot;mousemove&quot;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>keys(object)ï¼Œvalues(object)ï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å« object çš„æ‰€æœ‰çš„é”®å&#x2F;é”®å€¼</p>
</li>
<li><p><strong>monitorEvents(object, events)ï¼š</strong>ç”¨æ¥ç›‘å¬æŒ‡å®šå¯¹è±¡ä¸Šå‘ç”Ÿçš„æŸç±»äº‹ä»¶ã€‚å½“æŸç±»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè¿”å›ä¸€ä¸ª Event å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«è¯¥äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚ä½¿ç”¨ unmonitorEvents(object) æ–¹æ³•å¯ä»¥åœæ­¢ç›‘å¬æŒ‡å®šå¯¹è±¡ä¸Šçš„äº‹ä»¶ã€‚äº‹ä»¶å¯ä»¥åˆ†ä¸ºå››å¤§ç±»ï¼Œæ¯ä¸€ç±»éƒ½åŒ…å«ä¸€ç³»åˆ—å…·ä½“äº‹ä»¶ï¼š</p>
<ul>
<li>Mouse äº‹ä»¶ï¼šmousedown mouseup click dblclick mousemove mouseover mouseout mousewheel</li>
<li>Key äº‹ä»¶ï¼škeydown keyup keypress textinput</li>
<li>Touch äº‹ä»¶ï¼štouchstart touchmove touchend touchcancel</li>
<li>Control äº‹ä»¶ï¼šresize scroll zoom focus blur select change submit reset</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ç›‘å¬ document ä¸Šçš„æ‰€æœ‰é¼ æ ‡äº‹ä»¶</span><br><span class="line">monitorEvents(document, &#x27;mouse&#x27;);</span><br><span class="line">// åœæ­¢ç›‘å¬ document ä¸Šçš„æ‰€æœ‰äº‹ä»¶</span><br><span class="line">unmonitorEvents(document);</span><br></pre></td></tr></table></figure>
</li>
<li><p>copy(object)ï¼šå¤åˆ¶ç‰¹å®š DOM å…ƒç´ åˆ°å‰ªè´´æ¿</p>
</li>
<li><p>debuggerï¼šæ–­ç‚¹</p>
</li>
</ol>
</li>
<li><p><strong>console - APIï¼š</strong></p>
<ol>
<li>ä¸åŒæ—¥å¿—ç­‰çº§çš„æ‰“å°è¾“å‡ºï¼šconsole.log()ã€info()ã€debug()ã€warn()ã€error()</li>
<li>console.table()ï¼šç”¨è¡¨æ ¼å½¢å¼æ‰“å°ä¸€äº›å¤åˆç±»å‹æ•°æ®ï¼Œå¦‚å¯¹è±¡ã€æ•°ç»„</li>
<li>console.count()ï¼šè®¡æ•°è¾“å‡ºå¤šå°‘æ¬¡</li>
<li>**console.dir()**ã€dirxml()ï¼šæ‰“å°ä¸€ä¸ª dom çš„å¯¹è±¡å½¢å¼ã€ç›®å½•æ ‘çš„å½¢å¼</li>
<li>console.assert()ï¼šä¸»è¦ç”¨äºç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯ï¼Œä½†ä¸ä¼šä¸­æ–­ç¨‹åºæ‰§è¡Œï¼Œå¯ä»¥è¾¾åˆ°ä¸€ä¸ªæç¤ºç”¨æˆ·å†…éƒ¨çŠ¶æ€ä¸æ­£ç¡®çš„ä½œç”¨</li>
<li>console.time()ã€timeEnd()ï¼šç”¨äºè®¡æ—¶ï¼Œå¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªæ“ä½œæ‰€èŠ±è´¹çš„å‡†ç¡®æ—¶é—´</li>
<li>console.group()ã€groupEnd()ã€groupCollapsed()ï¼šå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ï¼Œåœ¨è¾“å‡ºå¤§é‡ä¿¡æ¯æ—¶æœ‰ç”¨</li>
<li>**console.trace()**ã€clear()ï¼šæ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„ä»£ç åœ¨å †æ ˆä¸­çš„è°ƒç”¨è·¯å¾„ã€æ¸…ç©ºæ§åˆ¶å°è¾“å‡º</li>
</ol>
</li>
</ul>
<h3 id="7-this-â€“-callã€apply-å’Œ-bind"><a href="#7-this-â€“-callã€apply-å’Œ-bind" class="headerlink" title="7. this â€“&gt; callã€apply å’Œ bind"></a>7. this â€“&gt; callã€apply å’Œ bind</h3><blockquote>
<p><strong>this æœºåˆ¶ï¼š</strong>åœ¨ js ä¸­ï¼Œthis çš„æŒ‡å‘ä¾èµ–äº<strong>è°ƒç”¨å‡½æ•°çš„ä¸Šä¸‹æ–‡</strong>ã€‚js çš„æ–¹æ³•åœ¨è„±ç¦»å¯¹è±¡åè°ƒç”¨æ—¶ï¼Œå…¶ this æŒ‡å‘é»˜è®¤å˜ä¸ºå…¨å±€å¯¹è±¡ï¼Œè¿™ç§æƒ…å†µä¸‹å¦‚æœä¸æ˜¾å¼åœ°ç»‘å®š this åˆ°æ­£ç¡®çš„å¯¹è±¡ï¼Œåˆ™ä¼šæŠ›å‡º TypeError å¼‚å¸¸</p>
<p><strong>ç»‘å®š this çš„æ–¹æ³•ï¼ˆcallã€apply å’Œ bindï¼‰ï¼š</strong></p>
<ol>
<li>Function.prototype.call(thisValue, arg1, arg2, â€¦)ï¼šå‡½æ•°å®ä¾‹çš„ call æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šå‡½æ•°å†…éƒ¨ this çš„æŒ‡å‘ï¼ˆå³å‡½æ•°æ‰§è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼‰ï¼Œç„¶ååœ¨æ‰€æŒ‡å®šçš„ä½œç”¨åŸŸä¸­ï¼Œè°ƒç”¨è¯¥å‡½æ•°</li>
<li>Function.prototype.apply(thisValue, [arg1, arg2, â€¦.])ï¼šapply æ–¹æ³•çš„ä½œç”¨ä¸ call æ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æ”¹å˜ this æŒ‡å‘ï¼Œç„¶åå†è°ƒç”¨è¯¥å‡½æ•°ã€‚å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‡½æ•°æ‰§è¡Œæ—¶çš„å‚æ•°</li>
<li>Function.prototype.bind(thisValue, arg1, arg2, â€¦)ï¼šç”¨äºå°†å‡½æ•°ä½“å†…çš„ this ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ï¼Œç„¶åè¿”å›ä¸€ä¸ª<strong>æ–°å‡½æ•°</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var d = new Date()</span><br><span class="line">var gettime = d.getTime</span><br><span class="line">gettime() // TypeError: this is not a Date object.</span><br><span class="line">// å½“ç›´æ¥å¼•ç”¨ d.getTime æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°† getTime å‡½æ•°æå–äº†å‡ºæ¥ï¼Œè€Œå®ƒçš„ä¸Šä¸‹æ–‡ (this) å·²ç»ä¸å†æ˜¯ d å¯¹è±¡ï¼Œè€Œæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå› æ­¤ä¼šå¯¼è‡´é”™è¯¯</span><br><span class="line"></span><br><span class="line">/* è§£å†³æ–¹æ³•</span><br><span class="line">var d = new Date()</span><br><span class="line">var gettime = d.getTime.bind(d)</span><br><span class="line">console.log(gettime())</span><br><span class="line"></span><br><span class="line">var d = new Date()</span><br><span class="line">var gettime = d.getTime</span><br><span class="line">console.log(gettime.call(d))</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p><strong>å…¨å±€ä¸Šä¸‹æ–‡ï¼š</strong>åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œthis é€šå¸¸æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆåœ¨æµè§ˆå™¨ä¸­ä¸º windowsï¼Œåœ¨ nodejs ä¸­ä¸º global ï¼‰</p>
</li>
<li><p><strong>å¯¹è±¡æ–¹æ³•ä¸­çš„ thisï¼š</strong>å½“ this åœ¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ä¸­ä½¿ç”¨æ—¶ï¼Œthis æŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ï¼Œèµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡åˆ™æŒ‡å‘æ”¹å˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123;</span><br><span class="line">    name: &#x27;Alice&#x27;,</span><br><span class="line">    sayHello: function() &#123;</span><br><span class="line">        console.log(this.name); // è¿™é‡Œçš„ `this` æŒ‡å‘ person å¯¹è±¡</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">person.sayHello(); // è¾“å‡º &#x27;Alice&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ„é€ å‡½æ•°ä¸­çš„ thisï¼š</strong>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œthis æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function Person(name) &#123;</span><br><span class="line">    this.name = name;  // `this` æŒ‡å‘å½“å‰åˆ›å»ºçš„å¯¹è±¡å®ä¾‹</span><br><span class="line">&#125;</span><br><span class="line">const alice = new Person(&#x27;Jack&#x27;);</span><br><span class="line">console.log(alice.name); // è¾“å‡º &#x27;=Jack&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>äº‹ä»¶å¤„ç†å™¨ä¸­çš„ thisï¼š</strong>åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­ï¼Œthis é€šå¸¸æŒ‡å‘è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const button = document.querySelector(&#x27;button&#x27;);</span><br><span class="line">button.addEventListener(&#x27;click&#x27;, function() &#123;</span><br><span class="line">    console.log(this);  // è¿™é‡Œçš„ `this` æŒ‡å‘è§¦å‘äº‹ä»¶çš„ button å…ƒç´ </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç®­å¤´å‡½æ•°ä¸­çš„ thisï¼š</strong>ç®­å¤´å‡½æ•°çš„ this ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œå®ƒä¸ç»‘å®šè‡ªå·±çš„ thisï¼Œè€Œæ˜¯ä»å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡ç»§æ‰¿ this</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123;</span><br><span class="line">    name: &#x27;haha&#x27;,</span><br><span class="line">    sayHello: () =&gt; &#123;</span><br><span class="line">        console.log(this.name); // è¿™é‡Œçš„ `this` æŒ‡å‘å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œä¸æ˜¯ person å¯¹è±¡</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">person.sayHello(); // è¾“å‡º undefinedï¼Œå› ä¸ºç®­å¤´å‡½æ•°çš„ this ä¸æ˜¯ person å¯¹è±¡</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-ES6è¯­æ³•ç³–"><a href="#8-ES6è¯­æ³•ç³–" class="headerlink" title="8. ES6è¯­æ³•ç³–"></a>8. ES6è¯­æ³•ç³–</h3><ul>
<li>ç®€æ˜“å±æ€§å’Œæ–¹æ³•è¡¨è¾¾ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const myname = &#x27;jack&#x27;</span><br><span class="line">const temp = &#123; myname &#125;</span><br><span class="line">console.log(temp); // &#123; myname: &#x27;jack&#x27; &#125;</span><br><span class="line"></span><br><span class="line">const team = &#123;</span><br><span class="line">    dowork() &#123;</span><br><span class="line">        return &#x27;work!&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(team.dowork()) // work!</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>varã€let å’Œ constï¼š</strong><ol>
<li>let å¯ä»¥å®Œå…¨å–ä»£ varï¼Œå› ä¸ºä¸¤è€…è¯­ä¹‰ç›¸åŒï¼Œä¸” let æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¹Ÿä¸å­˜åœ¨å˜é‡æå‡ä»£ç ä¸æ˜“è¯»</li>
<li>var å˜é‡å®šä¹‰ä¼šæŒ‚è½½åˆ°å…¨å±€å¯¹è±¡ window ä¸Šï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼›è€Œ let å’Œ const ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜</li>
<li>å…¨å±€å¸¸é‡ const ä¼˜äº letï¼Œæ—¢å¯ä»¥é™åˆ¶å€¼ä¸è¢«ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼ˆjs ç¼–è¯‘å™¨ä¼˜åŒ–ï¼‰</li>
</ol>
</li>
<li><strong>è‡ªæ‰§è¡Œå‡½æ•°ï¼š</strong><ul>
<li>ç®­å¤´å‡½æ•°çš„ this ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œå®ƒä¸ç»‘å®šè‡ªå·±çš„ thisï¼Œè€Œæ˜¯ä»å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡ç»§æ‰¿ this</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;jack&quot;);</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">function Timer() &#123;</span><br><span class="line">    this.s1 = 0;</span><br><span class="line">    this.s2 = 0;</span><br><span class="line">    setInterval(() =&gt; &#123;</span><br><span class="line">        this.s1++</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">    setInterval(function () &#123;</span><br><span class="line">        this.s2++;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">&#125;</span><br><span class="line">let timer = new Timer();</span><br><span class="line">setInterval(() =&gt; console.log(`s1: $&#123;timer.s1&#125;`), 2000)</span><br><span class="line">setInterval(() =&gt; console.log(`s2: $&#123;timer.s2&#125;`), 2000)</span><br><span class="line">// s1: 1 s2: 0 ---- s1: 3 s2: 0 ---- s1: 5 s2: 0</span><br><span class="line"></span><br><span class="line">var arr = [1, 2, 3].forEach((x) =&gt; &#123;</span><br><span class="line">    console.log(x); // 1 2 3</span><br><span class="line">&#125;)</span><br><span class="line">console.log(arr); // undefined</span><br><span class="line"></span><br><span class="line">var newarr = [1, 2, 3].map((x) =&gt; &#123;</span><br><span class="line">    return x * 2</span><br><span class="line">&#125;)</span><br><span class="line">console.log(newarr); // [ 2, 4, 6 ]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>CommonJS æ¨¡å—ï¼š</strong><ul>
<li>å¯¼å‡ºï¼šé€šè¿‡ moudle.exports &#x3D; obj; å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œmoudle.exports &#x3D; {add, subtract} å¯¼å‡ºå¤šä¸ªå¯¹è±¡</li>
<li>å¼•å…¥ï¼šä½¿ç”¨ require(â€˜æ¨¡å—è·¯å¾„â€™) æ¥å¼•å…¥æ¨¡å—ã€‚å•ä¸ªå¯¼å‡ºçš„å¼•å…¥ç›´æ¥è°ƒç”¨ï¼Œå¤šä¸ªå¯¼å‡ºçš„å¼•å…¥é€šè¿‡å¯¹è±¡æˆå‘˜æ¥è°ƒç”¨</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function add(a, b) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = add;  // å¯¼å‡ºå•ä¸ªå‡½æ•°</span><br><span class="line"></span><br><span class="line">const add = require(&#x27;./math&#x27;);  // å¼•å…¥å•ä¸ªå¯¼å‡ºçš„å‡½æ•°</span><br><span class="line">console.log(add(2, 5));  // è¾“å‡º 7</span><br><span class="line"></span><br><span class="line">function add(a, b) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br><span class="line">function subtract(a, b) &#123;</span><br><span class="line">    return a - b;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = &#123; add, subtract &#125;;  // å¯¼å‡ºå¤šä¸ªå‡½æ•°</span><br><span class="line"></span><br><span class="line">const math = require(&#x27;./math&#x27;);  // å¼•å…¥åŒ…å«å¤šä¸ªå¯¼å‡ºçš„å¯¹è±¡</span><br><span class="line">console.log(math.add(2, 5));  // è¾“å‡º 7</span><br><span class="line">console.log(math.subtract(5, 2));  // è¾“å‡º 3</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>è®¡ç®—å±æ€§åï¼š</strong>åœ¨å¯¹è±¡å­—é¢é‡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å· [] æ¥åŠ¨æ€åœ°è®¡ç®—å±æ€§å</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let boss = &#x27;DTA Boss&#x27;;</span><br><span class="line"></span><br><span class="line">const DTA = &#123;</span><br><span class="line">    &#x27;employee&#x27;: &#x27;bxl&#x27;,</span><br><span class="line">    [boss]: &#x27;xfblog&#x27;,</span><br><span class="line">    [&#x27;do&#x27; + &#x27;work&#x27;]() &#123;</span><br><span class="line">        return &#x27;work&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(DTA.employee); // bxl</span><br><span class="line">console.log(DTA[&#x27;DTA Boss&#x27;]); // xfblog</span><br><span class="line">console.log(DTA.dowork()); // work</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦ â€¦ ï¼š</strong>ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ï¼Œä¸ Object.assign ä½œç”¨ä¸€æ ·</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const NewDAT1 = &#123; ...DTA &#125;</span><br><span class="line">console.log(NewDAT1); // &#123; employee: &#x27;bxl&#x27;, &#x27;DTA Boss&#x27;: &#x27;xfblog&#x27;, dowork: [Function: dowork] &#125;</span><br><span class="line">const NewDAT2 = Object.assign(&#123;&#125;, DTA)</span><br><span class="line">console.log(NewDAT2); // &#123; employee: &#x27;bxl&#x27;, &#x27;DTA Boss&#x27;: &#x27;xfblog&#x27;, dowork: [Function: dowork] &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>é“¾åˆ¤æ–­è¿ç®—ç¬¦ ?. å’Œ null åˆ¤æ–­è¿ç®—ç¬¦ ??ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">        age: &#123;</span><br><span class="line">            sex: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// å¦‚æœæŠŠ??æ¢æˆ||ï¼Œé‚£ä¹ˆå‰é¢çš„å€¼æ˜¯å­˜åœ¨çš„ï¼Œä½†æ˜¯ä¸º0ï¼Œå°±ä¼šè¢«åˆ¤æ–­ä¸ºfalseï¼Œå°±ä¼šè¾“å‡º 1</span><br><span class="line">// ??åªæœ‰å½“æŸä¸ªå€¼æ˜¯nullæˆ–undefinedæ—¶ï¼Œæ‰ä¼šè¾“å‡ºé»˜è®¤å€¼</span><br><span class="line">console.log(person?.name?.age?.sex ?? &#x27;1&#x27;); // 0</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€JS-è¯­æ³•è¡¥å……"><a href="#äºŒã€JS-è¯­æ³•è¡¥å……" class="headerlink" title="äºŒã€JS è¯­æ³•è¡¥å……"></a>äºŒã€JS è¯­æ³•è¡¥å……</h2><h3 id="1-å®Œå…¨æ‹·è´å¯¹è±¡"><a href="#1-å®Œå…¨æ‹·è´å¯¹è±¡" class="headerlink" title="1. å®Œå…¨æ‹·è´å¯¹è±¡"></a>1. å®Œå…¨æ‹·è´å¯¹è±¡</h3><blockquote>
<ol>
<li>ï»¿ç¡®ä¿æ‹·è´åçš„å¯¹è±¡ï¼Œä¸åŸå¯¹è±¡å…·æœ‰åŒæ ·çš„åŸå‹</li>
<li>ï»¿ç¡®ä¿æ‹·è´åçš„å¯¹è±¡ï¼Œä¸åŸå¯¹è±¡å…·æœ‰åŒæ ·çš„å®ä¾‹å±æ€§</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function copyObject(orig) &#123;</span><br><span class="line">    return Object.create(</span><br><span class="line">        Object.getPrototypeOf(orig),</span><br><span class="line">        Object.getOwnPropertyDescriptors(orig)</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-å†…éƒ¨å‡½æ•°å¯¼å‡º"><a href="#2-å†…éƒ¨å‡½æ•°å¯¼å‡º" class="headerlink" title="2. å†…éƒ¨å‡½æ•°å¯¼å‡º"></a>2. å†…éƒ¨å‡½æ•°å¯¼å‡º</h3><ul>
<li><strong>ç›®çš„ï¼š</strong>åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­æƒ³è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var temp;</span><br><span class="line"></span><br><span class="line">!(function () &#123;</span><br><span class="line">    console.log(&quot;è‡ªæ‰§è¡Œæ–¹æ³•...&quot;)</span><br><span class="line"></span><br><span class="line">    function test() &#123;</span><br><span class="line">        console.log(&#x27;123&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    // å°†å†…éƒ¨å‡½æ•°çš„å¼•ç”¨èµ‹å€¼ç»™å…¨å±€å˜é‡temp</span><br><span class="line">    temp = test</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">temp()  // 123</span><br></pre></td></tr></table></figure>

<h3 id="3-ç½®ç©ºæ–¹æ³•"><a href="#3-ç½®ç©ºæ–¹æ³•" class="headerlink" title="3. ç½®ç©ºæ–¹æ³•"></a>3. ç½®ç©ºæ–¹æ³•</h3><ul>
<li><strong>ç½®ç©ºæ–¹æ³•ï¼š</strong>åœ¨ JavaScript ä¸­ï¼Œè¦å°†ä¸€ä¸ªå˜é‡æˆ–å¯¹è±¡çš„å€¼ç½®ä¸ºç©ºï¼ˆæˆ–æ¸…ç©ºï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹æ³•å°†å…¶è®¾ç½®ä¸ºä½•ç§ç±»å‹çš„ç©ºå€¼<ol>
<li><strong>å°†å˜é‡è®¾ç½®ä¸º null æˆ– undefinedï¼š</strong><code>var myVariable = null;</code> æˆ–è€… <code>myVariable = undefined;</code></li>
<li><strong>æ¸…ç©ºæ•°ç»„ï¼š</strong><code>var myArray = [];</code> æˆ–è€… <code>myArray.length = 0;</code></li>
<li><strong>æ¸…ç©ºå¯¹è±¡ï¼š</strong><code>var myObject = &#123;&#125;;</code> æˆ–è€…åˆ é™¤å¯¹è±¡çš„å±æ€§</li>
<li><strong>æ¸…ç©ºå­—ç¬¦ä¸²ï¼š</strong><code>var myString = &quot;&quot;;</code></li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function hello() &#123;</span><br><span class="line">    console.log(&#x27;hello&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç½®ç©ºæ–¹æ³•å°±æ˜¯ç»™ä¸€ä¸ªæ–¹æ³•èµ‹å€¼ä¸€ä¸ªç©ºæ–¹æ³•ï¼ŒåŒæ—¶å¯ä»¥æ¥å—å‚æ•°æ‰§è¡Œä¸€æ¬¡</span><br><span class="line">setTimeout = function (res) &#123;</span><br><span class="line">    res()</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(hello, 3000)</span><br></pre></td></tr></table></figure>

<h3 id="4-json-æ•°æ®çš„å¤„ç†"><a href="#4-json-æ•°æ®çš„å¤„ç†" class="headerlink" title="4. json æ•°æ®çš„å¤„ç†"></a>4. json æ•°æ®çš„å¤„ç†</h3><ul>
<li><strong>js å¤„ç† json æ•°æ®çš„æ–¹æ³•ï¼š</strong><ul>
<li><strong>JSON.parse()ï¼š</strong>ç”¨äºå°† JSON å­—ç¬¦ä¸²è§£æä¸º JavaScript å¯¹è±¡</li>
<li><strong>JSON.stringify()ï¼š</strong>ç”¨äºå°† JavaScript å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var jsonString = &#x27;&#123;&quot;key&quot;: &quot;value&quot;, &quot;number&quot;: 42&#125;&#x27;;</span><br><span class="line">console.log(typeof jsonString);  // string</span><br><span class="line"></span><br><span class="line">var jsonObject = JSON.parse(jsonString);</span><br><span class="line">console.log(typeof jsonObject);  // object</span><br><span class="line"></span><br><span class="line">var jsonStrings = JSON.stringify(jsonObject)</span><br><span class="line">console.log(typeof jsonStrings);  // string</span><br></pre></td></tr></table></figure>

<h3 id="5-å®šæ—¶å™¨è¯¦è§£"><a href="#5-å®šæ—¶å™¨è¯¦è§£" class="headerlink" title="5. å®šæ—¶å™¨è¯¦è§£"></a>5. å®šæ—¶å™¨è¯¦è§£</h3><blockquote>
<p><strong>è¿è¡Œæœºåˆ¶ï¼š</strong>å®šæ—¶å™¨çš„è¿è¡Œæœºåˆ¶æ˜¯å°†æŒ‡å®šçš„ä»£ç ç§»å‡ºæœ¬è½®äº‹ä»¶å¾ªç¯ï¼Œç­‰åˆ°ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ï¼Œå†æ£€æŸ¥æ˜¯å¦åˆ°äº†æŒ‡å®šæ—¶é—´ï¼Œå¦‚æœåˆ°äº†å°±æ‰§è¡Œä»£ç ï¼Œå¦åˆ™ç»§ç»­ç­‰å¾…ã€‚è¿™æ„å‘³ç€æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¿…é¡»ç­‰åˆ°æœ¬è½®äº‹ä»¶å¾ªç¯çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¼€å§‹æ‰§è¡Œï¼›ç”±äºå‰é¢çš„ä»»åŠ¡åˆ°åº•éœ€è¦å¤šå°‘æ—¶é—´æ‰§è¡Œå®Œï¼Œæ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•ä¿è¯ setTimeout å’Œ setInterval æŒ‡å®šçš„ä»»åŠ¡ä¸€å®šä¼šæŒ‰ç…§é¢„å®šçš„æ—¶é—´æ‰§è¡Œã€‚</p>
<p><strong>æ€è€ƒï¼š<code>setTimeout(f, 0)</code> ä¼šç«‹å³æ‰§è¡Œå—ï¼Ÿä¸ä¼šï¼Œè¦å…ˆæ‰§è¡Œå®ŒåŒæ­¥ä»£ç ï¼Œæ‰ä¼šæ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚</strong></p>
</blockquote>
<ul>
<li><p><strong>setTimeoutï¼š</strong>ç”¨æ¥æŒ‡å®šæŸä¸ªå‡½æ•°æˆ–æŸæ®µä»£ç ï¼Œåœ¨å¤šå°‘æ¯«ç§’ä¹‹åæ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå®šæ—¶å™¨çš„ç¼–å·ï¼Œå¯ä»¥é€šè¿‡ç¼–å·å–æ¶ˆè¿™ä¸ªå®šæ—¶å™¨</p>
<ul>
<li><strong>è¯­æ³•ï¼š</strong>function setTimeout(callback, ms, â€¦args)</li>
</ul>
<ul>
<li><strong>this æŒ‡é’ˆï¼š</strong>ï»¿å¦‚æœå›è°ƒå‡½æ•°æ˜¯å¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆ setTimeout ä½¿å¾—æ–¹æ³•å†…éƒ¨çš„ this å…³é”®å­—å°†æŒ‡å‘å…¨å±€ç¯å¢ƒï¼Œè€Œä¸æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡</li>
<li><strong>è§£å†³ this æŒ‡é’ˆæŒ‡å‘ï¼š</strong>ä¸€æ˜¯åœ¨å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å¤–å±‚å¥—ä¸Šä¸€ä¸ªå‡½æ•°ï¼›äºŒæ˜¯ä½¿ç”¨ bind æ–¹æ³•ç›´æ¥ç»‘å®šå¯¹åº”å¯¹è±¡</li>
</ul>
</li>
<li><p><strong>setIntervalï¼š</strong>ç”¨æ³•ä¸ setTimeout å®Œå…¨ä¸€è‡´ï¼ŒåŒºåˆ«ä»…åœ¨äº setInterval æŒ‡æ˜¯æŸä¸ªä»»åŠ¡æ¯éš”ä¸€æ®µæ—¶é—´å°±æ‰§è¡Œä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯æ— é™æ¬¡çš„å®šæ—¶æ‰§è¡Œ</p>
<ul>
<li><strong>æ³¨æ„ï¼š</strong>setlnterval æŒ‡å®šçš„æ˜¯<strong>å¼€å§‹æ‰§è¡Œ</strong>ä¹‹é—´çš„é—´éš”ï¼Œå¹¶ä¸è€ƒè™‘æ¯æ¬¡ä»»åŠ¡æ‰§è¡Œæœ¬èº«æ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚å› æ­¤å®é™…ä¸Šï¼Œä¸¤æ¬¡æ‰§è¡Œä¹‹é—´çš„é—´éš”ä¼šå°äºæŒ‡å®šçš„æ—¶é—´ã€‚æ¯”å¦‚ï¼Œsetlnterval æŒ‡å®šæ¯ 100ms æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯æ¬¡æ‰§è¡Œéœ€è¦ 5msï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡æ‰§è¡Œç»“æŸå 95 æ¯«ç§’ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œå°±ä¼šå¼€å§‹ã€‚å¦‚æœæŸæ¬¡æ‰§è¡Œè€—æ—¶ç‰¹åˆ«é•¿ï¼Œè¶…è¿‡äº†é—´éš”æ—¶é—´ï¼Œé‚£ä¹ˆè¿™ä¸€æ¬¡ç»“æŸåï¼Œä¸‹ä¸€æ¬¡æ‰§è¡Œå°±ä¼šç«‹å³å¼€å§‹</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ä¸€å®šè¦éš”å¤šä¹…æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨åµŒå¥— setTimeout</span><br><span class="line">let i = 1;</span><br><span class="line">setTimeout(function f() &#123;</span><br><span class="line">    console.log(123);</span><br><span class="line">    setTimeout(f, 2000);</span><br><span class="line">&#125;, 2000);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>clearTimeout()ï¼ŒclearInterval() ç‰¹æ€§ï¼š</strong><ul>
<li>setTimeout å’Œ setlnterval å‡½æ•°ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œè¡¨ç¤ºè®¡æ•°å™¨ç¼–å·ã€‚å°†è¯¥æ•´æ•°ä¼ å…¥ clearTimeout å’Œ clearlnterval å‡½æ•°ï¼Œå°±å¯ä»¥å–æ¶ˆå¯¹åº”çš„å®šæ—¶å™¨ã€‚<strong>ç‰¹ç‚¹å°±æ˜¯è¿”å›çš„æ•´æ•°å€¼æ˜¯è¿ç»­å¢å¤§çš„</strong>ï¼Œï»¿ï»¿åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ï¼Œå–æ¶ˆå½“å‰æ‰€æœ‰çš„ setTimeout å®šæ—¶å™¨ï¼ˆå¯ä»¥è¿‡ä¸€äº›æ£€æµ‹ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;å½é‡Œå‘±å•¦......&quot;);</span><br><span class="line">&#125;, 0);</span><br><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;å½é‡Œå‘±å•¦......&quot;);</span><br><span class="line">&#125;, 0);</span><br><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;å½é‡Œå‘±å•¦......&quot;);</span><br><span class="line">&#125;, 0);</span><br><span class="line">(function () &#123;</span><br><span class="line">    let gid = setInterval(clearAllTimeouts, 0);</span><br><span class="line">    console.log(gid);</span><br><span class="line">    function clearAllTimeouts() &#123;</span><br><span class="line">        let id = setTimeout(function () &#123; &#125;, 0);</span><br><span class="line">        while (id &gt; 0) &#123;</span><br><span class="line">            if (id !== gid) &#123;</span><br><span class="line">                clearTimeout(id);</span><br><span class="line">            &#125;</span><br><span class="line">            id--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€JS-å¼‚æ­¥æ“ä½œ"><a href="#ä¸‰ã€JS-å¼‚æ­¥æ“ä½œ" class="headerlink" title="ä¸‰ã€JS å¼‚æ­¥æ“ä½œ"></a>ä¸‰ã€JS å¼‚æ­¥æ“ä½œ</h2><blockquote>
<p><strong>èƒŒæ™¯ï¼š</strong>js æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œé™¤äº†ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ä¸»çº¿ç¨‹ï¼Œå¼•æ“è¿˜æä¾›äº†ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆtask queueï¼‰ï¼Œå­˜å‚¨å½“å‰éœ€è¦å¤„ç†çš„å¼‚æ­¥ä»»åŠ¡</p>
<p><strong>å¼‚æ­¥ï¼š</strong>å¼‚æ­¥çš„æ ¸å¿ƒåœ¨äºä¸éœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªæ“ä½œå®Œæˆæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œï¼Œå®ƒå…è®¸å¤šä¸ªæ“ä½œå¹¶å‘è¿›è¡Œã€‚åœ¨ js ä¸­ï¼Œå¼‚æ­¥å¤„ç†å¯ä»¥é€šè¿‡ Promiseã€async&#x2F;awaitã€callback ç­‰å®ç°ï¼Œç‰¹åˆ«æ˜¯åœ¨ <strong>Ajax</strong> è¯·æ±‚ä¸­ï¼Œå¼‚æ­¥å¤„ç†éå¸¸é‡è¦</p>
<ul>
<li><strong>ä¼ ç»Ÿçš„å›è°ƒå‡½æ•°ï¼ˆå›è°ƒåœ°ç‹±ï¼‰ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: &#x27;https://api.example.com/data1&#x27;,</span><br><span class="line">    success: function(response1) &#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: &#x27;https://api.example.com/data2&#x27;,</span><br><span class="line">            success: function(response2) &#123;</span><br><span class="line">                console.log(response1, response2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Promise é“¾å¼å¤„ç†ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;https://api.example.com/data1&#x27;)</span><br><span class="line">    .then(response1 =&gt; &#123;</span><br><span class="line">        console.log(response1.data);</span><br><span class="line">        return axios.get(&#x27;https://api.example.com/data2&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(response2 =&gt; &#123;</span><br><span class="line">        console.log(response2.data);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(error =&gt; &#123;</span><br><span class="line">        console.error(error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="1-XHR-å¯¹è±¡"><a href="#1-XHR-å¯¹è±¡" class="headerlink" title="1. XHR å¯¹è±¡"></a>1. XHR å¯¹è±¡</h3><blockquote>
<p><strong>XMLHttpRequest</strong>ï¼ˆç®€ç§°XHRï¼‰ï¼šæ˜¯æµè§ˆå™¨ä¸­ç”¨äºä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„APIï¼Œå…è®¸ç½‘é¡µåœ¨ä¸é‡æ–°åŠ è½½é¡µé¢çš„æƒ…å†µä¸‹è¯·æ±‚æ•°æ®</p>
</blockquote>
<ul>
<li><strong>åŠŸèƒ½ï¼š</strong>æä¾›äº†åŸºç¡€çš„å¼‚æ­¥é€šä¿¡èƒ½åŠ›ï¼Œç”¨æ¥å‘é€ HTTP è¯·æ±‚å¹¶æ¥æ”¶å“åº”ï¼Œèƒ½å¤Ÿå¼‚æ­¥æ›´æ–°ç½‘é¡µå†…å®¹</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong><ul>
<li>æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è¯·æ±‚ï¼Œä½†é€šå¸¸ä½¿ç”¨å¼‚æ­¥è¯·æ±‚</li>
<li>å¯ä»¥å‘é€å„ç§æ ¼å¼çš„æ•°æ®ï¼Œå¦‚XMLã€JSONã€æ–‡æœ¬ç­‰</li>
<li>å¯ä»¥ç›‘å¬ä¸åŒçš„äº‹ä»¶ï¼Œå¦‚ onreadystatechangeï¼Œå½“è¯·æ±‚çŠ¶æ€æ”¹å˜æ—¶è§¦å‘</li>
</ul>
</li>
</ul>
<ul>
<li><strong>ç¼ºç‚¹ï¼š</strong>ä»£ç å¤æ‚ä¸”å®¹æ˜“äº§ç”Ÿå›è°ƒåœ°ç‹±ï¼ˆåµŒå¥—çš„å›è°ƒå‡½æ•°ï¼‰ï¼Œå¯è¯»æ€§è¾ƒå·®</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function AJAX() &#123;</span><br><span class="line">    this.request = function (method, url, async, string, func) &#123;</span><br><span class="line">        // åˆ›å»º XMLHttpRequest å¯¹è±¡</span><br><span class="line">        var xhr = new XMLHttpRequest();</span><br><span class="line">        // è®¾ç½®è¯·æ±‚å‚æ•°ï¼šä½¿ç”¨ open æ–¹æ³•è®¾ç½®è¯·æ±‚çš„ç±»å‹ã€è¯·æ±‚çš„urlã€æ˜¯å¦å¼‚æ­¥å¤„ç†</span><br><span class="line">        xhr.open(method, url, async);</span><br><span class="line">        // å¤„ç†çŠ¶æ€å˜åŒ–ï¼šé€šè¿‡ç›‘å¬ readystatechange äº‹ä»¶ï¼Œå¯ä»¥è·å–åˆ° XHR å¯¹è±¡çš„çŠ¶æ€å˜åŒ–</span><br><span class="line">        xhr.onreadystatechange = function () &#123;</span><br><span class="line">            // å¤„ç†å“åº”æ•°æ®ï¼šresponseText ç”¨äºå¤„ç†æ–‡æœ¬å“åº”ï¼ŒresponseXML ç”¨äºå¤„ç† XML å“åº”</span><br><span class="line">            if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;</span><br><span class="line">                /** readyState</span><br><span class="line">                * 0: è¯·æ±‚ï¼ˆæœªåˆå§‹åŒ–ï¼‰è¿˜æ²¡æœ‰è°ƒç”¨send()æ–¹æ³•</span><br><span class="line">                * 1: è¯·æ±‚è¿æ¥å·²å»ºç«‹ï¼ˆè½½å…¥ï¼‰å·²è°ƒç”¨send()æ–¹æ³•ï¼Œæ­£åœ¨å‘é€è¯·æ±‚</span><br><span class="line">                * 2: è¯·æ±‚å·²æ¥æ”¶ï¼ˆè½½å…¥å®Œæˆï¼‰send()æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œåˆšåˆšæ¥æ”¶åˆ°å…¨éƒ¨å“åº”å†…å®¹</span><br><span class="line">                * 3: è¯·æ±‚å¤„ç†ä¸­ï¼ˆäº¤äº’ï¼‰æ­£åœ¨è§£æå“åº”å†…å®¹</span><br><span class="line">                * 4: è¯·æ±‚å·²å®Œæˆï¼ˆå®Œæˆï¼‰å“åº”å†…å®¹è§£æå®Œæˆ</span><br><span class="line">                */</span><br><span class="line">                var responseData = xhr.responseText;</span><br><span class="line">                func(responseData);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // å‘é€è¯·æ±‚ï¼šå¯¹äºGETè¯·æ±‚ï¼Œä¸éœ€è¦ä¼ é€’å‚æ•°ï¼›å¯¹äºPOSTè¯·æ±‚ï¼Œå¯ä»¥åœ¨ send æ–¹æ³•ä¸­ä¼ é€’è¯·æ±‚ä½“çš„æ•°æ®</span><br><span class="line">        xhr.send(string);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var ajax = new AJAX();</span><br><span class="line">var api_url = &#x27;https://xfblog.cn:5000/test&#x27;;</span><br><span class="line">ajax.request(&#x27;GET&#x27;, api_url, true, &#x27;&#x27;, function (data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-ajax-æŠ€æœ¯"><a href="#2-ajax-æŠ€æœ¯" class="headerlink" title="2. ajax æŠ€æœ¯"></a>2. ajax æŠ€æœ¯</h3><blockquote>
<p><strong>AJAX</strong>ï¼ˆAsynchronous JavaScript and XMLï¼‰<strong>ï¼š</strong>æ˜¯ä¸€ç§ç”¨äºåœ¨ç½‘é¡µä¸åˆ·æ–°æˆ–é‡æ–°åŠ è½½çš„æƒ…å†µä¸‹ï¼Œå¼‚æ­¥è·å–å’Œå‘é€æ•°æ®çš„æŠ€æœ¯</p>
<p><strong>åŒæºç­–ç•¥ï¼š</strong>AJAX å—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œå³åªèƒ½ä»ç›¸åŒçš„åè®®ã€åŸŸåå’Œç«¯å£å‘èµ·è¯·æ±‚</p>
</blockquote>
<ul>
<li><p><strong>åŠŸèƒ½ï¼š</strong>ajax çš„æ ¸å¿ƒæ˜¯ xhr å¯¹è±¡ï¼Œé€šè¿‡å¼‚æ­¥çš„æ–¹å¼ä¸æœåŠ¡å™¨é€šä¿¡ï¼ŒåŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹</p>
</li>
<li><p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¯ä»¥åŠ è½½éƒ¨åˆ†å†…å®¹ï¼Œä¸éœ€è¦åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œä»è€Œæé«˜ç”¨æˆ·ä½“éªŒ</li>
<li>ä¸ä¾èµ– XMLï¼Œé€šå¸¸ä½¿ç”¨ json</li>
</ul>
</li>
<li><p><strong>ç»„æˆï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ JavaScript æ¥æ“ä½œ XHR å¯¹è±¡è¿›è¡Œ HTTP è¯·æ±‚</li>
<li>å¯ä»¥ä¸ HTMLã€CSSã€JavaScript ç»“åˆä½¿ç”¨ï¼Œåˆ›å»ºåŠ¨æ€äº¤äº’å¼çš„ Web åº”ç”¨</li>
</ul>
</li>
<li><p><strong>ç¼ºç‚¹ï¼š</strong>å¯èƒ½äº§ç”Ÿå›è°ƒåµŒå¥—é—®é¢˜ï¼ˆå›è°ƒåœ°ç‹±ï¼‰</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// jquery æ¡†æ¶ä¸­çš„ $.ajax() æ–¹æ³•</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    // 1. url è¯·æ±‚åœ°å€</span><br><span class="line">    url: &#x27;&#x27;,</span><br><span class="line">    // 2. type è¯·æ±‚æ–¹å¼ï¼Œé»˜è®¤æ˜¯&#x27;GET&#x27;ï¼Œå¸¸ç”¨çš„è¿˜æœ‰&#x27;POST&#x27;</span><br><span class="line">    type: &#x27;GET&#x27;,</span><br><span class="line">    // 3. dataType è®¾ç½®è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œå¸¸ç”¨çš„æ˜¯&#x27;json&#x27;æ ¼å¼</span><br><span class="line">    dataType: &#x27;JSON&#x27;,</span><br><span class="line">    // 4. data è®¾ç½®å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®, æ²¡æœ‰å‚æ•°ä¸éœ€è¦è®¾ç½®</span><br><span class="line">    data: &#x27;&#x27;,</span><br><span class="line">    // 5. success/done/then è®¾ç½®è¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼Œ</span><br><span class="line">    success: function (response) &#123;</span><br><span class="line">        console.log(response);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 6. error/faile è®¾ç½®è¯·æ±‚å¤±è´¥åçš„å›è°ƒå‡½æ•°</span><br><span class="line">    error: function () &#123;</span><br><span class="line">        alert(&quot;è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åå†è¯•ï¼&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 7. async è®¾ç½®æ˜¯å¦å¼‚æ­¥ï¼Œé»˜è®¤å€¼æ˜¯&#x27;true&#x27;ï¼Œè¡¨ç¤ºå¼‚æ­¥ï¼Œä¸€èˆ¬ä¸ç”¨å†™</span><br><span class="line">    async: true</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-Promise-å¯¹è±¡"><a href="#3-Promise-å¯¹è±¡" class="headerlink" title="3. Promise å¯¹è±¡"></a>3. Promise å¯¹è±¡</h3><blockquote>
<p><strong>Promiseï¼šæ˜¯ä¸€ç§ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–å¤±è´¥</strong></p>
<ul>
<li><p><strong>Promise å¯¹è±¡çš„çŠ¶æ€ï¼š</strong></p>
<ul>
<li><strong>Pendingï¼ˆè¿›è¡Œä¸­ï¼‰</strong>ï¼šç­‰å¾…ä¸­ï¼Œæˆ–è€…è¿›è¡Œä¸­ï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰å¾—åˆ°ç»“æœ</li>
<li><strong>resolvedã€Fulfilledï¼ˆå·²æˆåŠŸï¼‰</strong>ï¼šå·²ç»å®Œæˆï¼Œè¡¨ç¤ºå¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</li>
<li><strong>Rejectedï¼ˆå·²å¤±è´¥ï¼‰</strong>ï¼šå¾—åˆ°ç»“æœï¼Œä½†æ˜¯ç”±äºç»“æœå¹¶éæˆ‘ä»¬æ‰€æ„¿ï¼Œå› æ­¤æ‹’ç»æ‰§è¡Œ</li>
</ul>
</li>
<li><p><strong>çŠ¶æ€çš„å˜åŒ–é€”å¾„ï¼ˆåªæœ‰ä¸¤ç§ï¼‰ï¼š</strong>ä» pedding æœªå®Œæˆåˆ° fulfilled æˆåŠŸï¼›ä» pedding æœªå®Œæˆåˆ° rejected å¤±è´¥</p>
</li>
</ul>
<p><strong>è°ƒç”¨æ ˆä¸äº‹ä»¶å¾ªç¯ï¼š</strong>åœ¨ js ä¸­ï¼Œæ‰€æœ‰çš„ä»£ç æ‰§è¡Œéƒ½æ˜¯åœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸Šè¿›è¡Œçš„ï¼Œè¿™ä¸ªçº¿ç¨‹åŒ…å«äº†ä¸€ä¸ªè°ƒç”¨æ ˆå’Œä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚è°ƒç”¨æ ˆï¼ˆcall stackï¼‰ç”¨æ¥å­˜å‚¨å‡½æ•°è°ƒç”¨çš„æ ˆç»“æ„ï¼Œè€Œäº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰åˆ™è´Ÿè´£å¤„ç†å¼‚æ­¥æ“ä½œå’Œäº‹ä»¶å¤„ç†ã€‚å½“æ‰§è¡Œä¸€ä¸ª Promise å¼‚æ­¥æ“ä½œæ—¶ï¼Œè¯¥æ“ä½œä¼šè¢«æ¨åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…è°ƒç”¨æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œã€‚è¿™ç§æœºåˆ¶ç¡®ä¿äº† js åœ¨å¤„ç†å¼‚æ­¥æ“ä½œæ—¶ä¸ä¼šé˜»å¡å…¶ä»–ä»£ç çš„æ‰§è¡Œã€‚</p>
<p><strong>å¾®ä»»åŠ¡æ‰§è¡Œæœºåˆ¶ï¼š</strong>Promise çš„å›è°ƒå‡½æ•°ä¸æ˜¯æ­£å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œè€Œæ˜¯ microtask å¾®ä»»åŠ¡ã€‚å¾®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ä¸€å®šæ—©äºæ­£å¸¸çš„å›è°ƒå‡½æ•°ï¼Œå› ä¸ºæ­£å¸¸å¼‚æ­¥ä»»åŠ¡ä¼šè¿½åŠ åˆ°ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ï¼Œè€Œå¾®ä»»åŠ¡ä¼šè¿½åŠ åˆ°æœ¬è½®äº‹ä»¶å¾ªç¯ã€‚æ‰€ä»¥ .then å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶é—´ä¸€å®šæ—©äº setTimeout(fn, 0)ã€‚</p>
</blockquote>
<ul>
<li><p><strong>åŸºç¡€è¯­æ³•ï¼š<code> new Promise(function(resolve, reject) &#123; &#125;);</code></strong></p>
<ol>
<li>Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä¸ºå‚æ•°ï¼Œå‡½æ•°æ‹¥æœ‰ resolve å’Œ reject ä¸¤ä¸ªå‚æ•°ï¼Œç”± js å¼•æ“æä¾›ä¸ç”¨éƒ¨ç½²</li>
<li>Promise çš„å‚æ•°åœ¨æ„é€ ä¹‹åä¼šç›´æ¥è¢«<strong>å¼‚æ­¥è¿è¡Œ</strong>ï¼Œå³èµ·å§‹å‡½æ•°ï¼Œå¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæˆåŠŸæ—¶è°ƒç”¨ resolve è¿”å›ç»“æœ</li>
<li>Promise å¯¹è±¡çš„ then æ–¹æ³•ç”¨æ¥å¤„ç†æˆåŠŸæ—¶å“åº”çš„æ•°æ®ï¼Œcatch æ–¹æ³•ç”¨æ¥æ¥å—å¤„ç†å¤±è´¥æ—¶å“åº”çš„æ•°æ®</li>
</ol>
</li>
<li><p><strong>resolve å‡½æ•°ï¼š</strong>å°† Promise å¯¹è±¡çš„çŠ¶æ€è®¾ç½®ä¸ºæˆåŠŸï¼Œä» pending å˜ä¸º resolvedï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸçš„æ—¶å€™è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œç»“æœä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»</p>
</li>
<li><p><strong>reject å‡½æ•°ï¼š</strong>å°† Promise å¯¹è±¡çš„çŠ¶æ€è®¾ç½®ä¸ºå¤±è´¥ï¼Œä» pending å˜ä¸º rejectedï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥çš„æ—¶å€™è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ›å‡ºçš„å¼‚å¸¸ä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»</p>
</li>
<li><p><strong>Promise.prototype.then()ï¼š</strong>å¯¹äº Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•åˆ†åˆ«æŒ‡å®š resolved å’Œ rejected çŠ¶æ€çš„å›è°ƒå‡½æ•°</p>
<ul>
<li><p><strong>è¿”å›å€¼ï¼š</strong>è¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³ then æ–¹æ³•å†è°ƒç”¨ä¸€ä¸ª then æ–¹æ³•</p>
</li>
<li><p><strong>æ³¨æ„ï¼šå¦‚æœ .then ä¸­å†™äº†å‚æ•°è€Œä¸æ˜¯å‡½æ•°ï¼Œåˆ™ä¼šå˜æˆ Promise ç©¿é€</strong></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">const p = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    resolve(&quot;æˆåŠŸ&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">const results = p.then(</span><br><span class="line">    (res) =&gt; &#123;</span><br><span class="line">        console.log(&quot;ç¬¬ä¸€æ¬¡:&quot;, res); // ç¬¬ä¸€æ¬¡: æˆåŠŸ</span><br><span class="line">        // return 6</span><br><span class="line">        // è¿™é‡Œçš„æ˜¯å¦æœ‰è¿”å›å€¼å†³å®šäº†ç¬¬äºŒæ¬¡ .then ä¸­å¤„ç†æˆåŠŸçš„å›è°ƒå‡½æ•°æ˜¯å¦èƒ½æ¥æ”¶åˆ°æœ‰æ•ˆå‚æ•°</span><br><span class="line">    &#125;,</span><br><span class="line">    (rej) =&gt; &#123;</span><br><span class="line">        console.log(rej); // ä¸æ‰§è¡Œ</span><br><span class="line">    &#125;</span><br><span class="line">).then(</span><br><span class="line">    (res) =&gt; &#123;</span><br><span class="line">        console.log(&quot;ç¬¬äºŒæ¬¡:&quot;, res); // ç¬¬äºŒæ¬¡: undefined</span><br><span class="line">        // åŸå› ï¼šå› ä¸ºç¬¬ä¸€ä¸ª .then ä¸­å¤„ç† resolved çŠ¶æ€çš„å›è°ƒå‡½æ•°ä¸­æˆåŠŸæ²¡æœ‰ç»™è¿”å›å€¼ï¼Œ</span><br><span class="line">        // æ‰€ä»¥åœ¨ç¬¬äºŒä¸ª .then ä¸­å‰¥ç¦»æ‰ promiseï¼Œæ‹¿åˆ°çš„ results å°±æ˜¯ undefined</span><br><span class="line"></span><br><span class="line">        console.log(&quot;å¼‚æ­¥:&quot;, results); // å¼‚æ­¥: Promise &#123; &lt;pending&gt; &#125;</span><br><span class="line">        // åŸå› ï¼šå› ä¸ºè¿™é‡Œæ‰§è¡Œæ—¶ï¼Œresults è™½ç„¶å·²ç»å®šä¹‰ï¼Œä½†å› ä¸º .then é“¾æ˜¯å¼‚æ­¥çš„ï¼Œ</span><br><span class="line">        // results è¿˜æ˜¯å¤„äº pending çŠ¶æ€ï¼Œç›´åˆ°æ‰€æœ‰çš„ then å›è°ƒéƒ½æ‰§è¡Œå®Œæ¯•åæ‰ä¼šå˜æˆ fulfilled</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// è¿™ä¸ªæ˜¯æœ€å…ˆæ‰“å°ï¼Œæ‰€ä»¥æ‰§è¡Œè¿™é‡Œçš„æ—¶å€™ï¼Œæ˜¾ç¤ºè¿˜æ˜¯åœ¨ pending çŠ¶æ€</span><br><span class="line">console.log(&quot;å•çº¿ç¨‹:&quot;, results); // å•çº¿ç¨‹: Promise &#123; &lt;pending&gt; &#125;</span><br><span class="line"></span><br><span class="line">// *********************** Promise ç©¿é€ ************************</span><br><span class="line">const pp = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    resolve(&quot;æˆåŠŸ&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">const result = pp.then(Promise.resolve(&quot;ä¼ ä¸è¿‡å»&quot;)); // ä¸æ˜¯å‡½æ•°</span><br><span class="line">result.then((res) =&gt; &#123;</span><br><span class="line">    console.log(res); // æˆåŠŸ</span><br><span class="line">    console.log(result) // Promise &#123; &#x27;æˆåŠŸ&#x27; &#125;</span><br><span class="line">&#125;);</span><br><span class="line">// ç›¸å½“äºä»¥ä¸‹è¿™ç§å†™æ³•</span><br><span class="line">pp.then(null).then((res) =&gt; &#123;</span><br><span class="line">    console.log(res); // æˆåŠŸ</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Promise.prototype.catch()ï¼š</strong>ç”¨äºæ³¨å†Œåœ¨ Promise å¯¹è±¡æ‹’ç»ï¼ˆrejectedï¼‰æ—¶çš„å›è°ƒå‡½æ•°ï¼ŒåŒ .then ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°çš„ä½œç”¨ï¼Œä¸¤è€…å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå‰è€…æ•è·å¼‚å¸¸åˆ™åè€…ä¸ä¼šæ‰§è¡Œ<ul>
<li><strong>å†’æ³¡æ€§è´¨ï¼š</strong>è‹¥ .then ä¸­äº§ç”Ÿå¼‚å¸¸åˆ™èƒ½åœ¨ .catch æˆ–è€…ä¸‹ä¸€ä¸ª .then ä¸­æ•è·ã€‚.then çš„ç¬¬äºŒä¸ªå‚æ•°å’Œ .catch æœ¬è´¨ä¸Šæ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œä½†ä¹Ÿéœ€è¦åˆ†åœºåˆä½¿ç”¨ï¼Œä¸€èˆ¬å¼‚å¸¸ç”¨ .catchï¼Œæ‹’ç»çŠ¶æ€ç”¨ .then</li>
<li><strong>æ³¨æ„ï¼š</strong>å¼‚å¸¸ä¸€æ—¦è¢«æ•è·ï¼Œåˆ™åé¢ä¸­çš„ .then ä¸ç®¡å¤šå°‘ï¼Œéƒ½ä¸ä¼šæ‰§è¡Œã€‚ä¸€èˆ¬æ˜¯åœ¨æœ€åå†™ .catch å»æ•è·å¼‚å¸¸ï¼Œè€Œä¸ä¼šä¸€å±‚å±‚ rejected å›è°ƒå‡½æ•°ï¼Œè¿™æ ·ä»£ç å¯è¯»æ€§æ›´é«˜ï¼Œä¸”èƒ½æ•è·åˆ°ä¸Šé¢æœ€å…ˆæŠ¥é”™çš„ä¿¡æ¯</li>
</ul>
</li>
<li><strong>Promise.prototype.finally()ï¼š</strong>ç”¨äºæ¸…ç†å’Œæœ€ç»ˆå¤„ç†é€»è¾‘ï¼Œå›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œä¸”æ˜¯å¦æ‰§è¡Œä¸ Promise çŠ¶æ€æ— å…³</li>
<li><strong>æ¡ˆä¾‹1ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">// ç¬¬ä¸€å±‚ï¼šè·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">function getUserInfo(userId) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼Œè·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            const userInfo = &#123;</span><br><span class="line">                id: userId,</span><br><span class="line">                name: &quot;John Doe&quot;,</span><br><span class="line">                email: &quot;johndoe@example.com&quot;</span><br><span class="line">            &#125;;</span><br><span class="line">            resolve(userInfo);</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç¬¬äºŒå±‚ï¼šè·å–ç”¨æˆ·è®¢å•åˆ—è¡¨</span><br><span class="line">function getUserOrders(userId) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼Œè·å–ç”¨æˆ·è®¢å•åˆ—è¡¨</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            const orders = [</span><br><span class="line">                &#123;id: 1, product: &quot;Product A&quot;&#125;,</span><br><span class="line">                &#123;id: 2, product: &quot;Product B&quot;&#125;,</span><br><span class="line">                &#123;id: 3, product: &quot;Product C&quot;&#125;</span><br><span class="line">            ];</span><br><span class="line">            resolve(orders);</span><br><span class="line">        &#125;, 2000);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸‰å±‚ï¼šè·å–è®¢å•è¯¦æƒ…</span><br><span class="line">function getOrderDetails(orderId) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼Œè·å–è®¢å•è¯¦æƒ…</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            const orderDetails = &#123;</span><br><span class="line">                id: orderId,</span><br><span class="line">                status: &quot;Delivered&quot;,</span><br><span class="line">                address: &quot;123 Main St&quot;</span><br><span class="line">            &#125;;</span><br><span class="line">            resolve(orderDetails);</span><br><span class="line">        &#125;, 1500);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åº”ç”¨ç¤ºä¾‹</span><br><span class="line">const userId = 123;</span><br><span class="line"></span><br><span class="line">getUserInfo(userId)</span><br><span class="line">    .then(userInfo =&gt; &#123;</span><br><span class="line">        console.log(&quot;User Info:&quot;, userInfo);</span><br><span class="line">        return getUserOrders(userInfo.id);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(orders =&gt; &#123;</span><br><span class="line">        console.log(&quot;User Orders:&quot;, orders);</span><br><span class="line">        const orderId = orders[0].id;</span><br><span class="line">        return getOrderDetails(orderId);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(orderDetails =&gt; &#123;</span><br><span class="line">        console.log(&quot;Order Details:&quot;, orderDetails);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(error =&gt; &#123;</span><br><span class="line">        console.error(&quot;Error:&quot;, error);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">console.log(&quot;åç»­æ“ä½œï¼ï¼ï¼&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ¡ˆä¾‹2ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function fetchData(url) &#123;</span><br><span class="line">    return new Promise(function (resolve, reject) &#123;</span><br><span class="line">        var xhr = new XMLHttpRequest();</span><br><span class="line">        xhr.open(&#x27;GET&#x27;, url);</span><br><span class="line">        xhr.onload = function () &#123;</span><br><span class="line">            if (xhr.status === 200) &#123;</span><br><span class="line">                resolve(xhr.responseText);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                reject(Error(xhr.statusText));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.onerror = function () &#123;</span><br><span class="line">            reject(Error(&#x27;Network Error&#x27;));</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.send();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨fetchData()å‡½æ•°å¹¶å¤„ç†Promiseå¯¹è±¡çš„ç»“æœ</span><br><span class="line">fetchData(&#x27;https://xfblog.cn:5000/test&#x27;).then(function (response) &#123;</span><br><span class="line">    // å¦‚æœPromiseå¯¹è±¡æˆåŠŸè§£å†³ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span><br><span class="line">    var data = JSON.parse(response)</span><br><span class="line">    console.log(&quot;result_dataï¼š&quot;, data)</span><br><span class="line"></span><br><span class="line">&#125;).catch(function (error) &#123;</span><br><span class="line">    // å¦‚æœPromiseå¯¹è±¡è¢«æ‹’ç»ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span><br><span class="line">    console.log(&#x27;Error loading data:&#x27;, error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€è¡¥ç¯å¢ƒ-demo"><a href="#å››ã€è¡¥ç¯å¢ƒ-demo" class="headerlink" title="å››ã€è¡¥ç¯å¢ƒ demo"></a>å››ã€è¡¥ç¯å¢ƒ demo</h2><h3 id="1-getOwnPropertyDescriptors"><a href="#1-getOwnPropertyDescriptors" class="headerlink" title="1. getOwnPropertyDescriptors"></a>1. getOwnPropertyDescriptors</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var navigator = &#123;</span><br><span class="line">    &quot;platform&quot;: &quot;MacIntel&quot; // è¿™æ ·è¡¥å°±æ˜¯é”™çš„ï¼Œä¼šè¿”å›trueï¼Œå› ä¸ºæµè§ˆå™¨ä¸Š navigator çš„å±æ€§éƒ½æ˜¯åŸå‹ç»§æ‰¿æ¥çš„</span><br><span class="line">&#125;</span><br><span class="line">// function Navigator() &#123; &#125;</span><br><span class="line">// Navigator.prototype.constructor.platform = &quot;MacIntel&quot;</span><br><span class="line">// var navigator = new Navigator();</span><br><span class="line">function decect(r, e) &#123;</span><br><span class="line">    var i = [];</span><br><span class="line">    Object[&quot;getOwnPropertyDescriptor&quot;] &amp;&amp; i[&quot;push&quot;](Object[&quot;getOwnPropertyDescriptor&quot;](r, e));</span><br><span class="line">    Object[&quot;getOwnPropertyDescriptors&quot;] &amp;&amp; i[&quot;push&quot;](!!Object[&quot;getOwnPropertyDescriptors&quot;](r)[e]);</span><br><span class="line">    for (var a = 0; a &lt; i[&quot;length&quot;]; a++) if (i[a]) return true;</span><br><span class="line"></span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line">console.log(decect(navigator, &quot;platform&quot;)); // true</span><br></pre></td></tr></table></figure>

<h3 id="2-hook-Date-ä¼ªé€ æ—¶é—´é—´éš”"><a href="#2-hook-Date-ä¼ªé€ æ—¶é—´é—´éš”" class="headerlink" title="2. hook Date ä¼ªé€ æ—¶é—´é—´éš”"></a>2. hook Date ä¼ªé€ æ—¶é—´é—´éš”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">var timeArray = []</span><br><span class="line">for (let i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">    timeArray.push(Math.random() * 1000)</span><br><span class="line">&#125;</span><br><span class="line">// console.log(timeArray);</span><br><span class="line"></span><br><span class="line">function huakuai() &#123;</span><br><span class="line">    // é—­åŒ…ï¼Œtimee åˆå§‹åŒ–åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œæ—¶ Date.prototype åŸå‹è¿˜æ²¡æœ‰è¢«ä¿®æ”¹</span><br><span class="line">    var timee = new Date().getTime()</span><br><span class="line"></span><br><span class="line">    function slide() &#123;</span><br><span class="line">        console.log(new Date().getTime() - timee);</span><br><span class="line">    &#125;</span><br><span class="line">    return slide</span><br><span class="line">&#125;</span><br><span class="line">var hk = huakuai()</span><br><span class="line"></span><br><span class="line">var now = new Date().getTime();</span><br><span class="line">function go(timeArray) &#123;</span><br><span class="line">    for (let i = 0; i &lt; timeArray.length; i++) &#123;</span><br><span class="line">        Date.prototype.getTime = function () &#123;</span><br><span class="line">            return now + timeArray[i]</span><br><span class="line">        &#125;</span><br><span class="line">        hk()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">go(timeArray)</span><br></pre></td></tr></table></figure>

<h3 id="3-hook-Function-ç»•è¿‡å-hook"><a href="#3-hook-Function-ç»•è¿‡å-hook" class="headerlink" title="3. hook Function ç»•è¿‡å hook"></a>3. hook Function ç»•è¿‡å hook</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">function Navigator() &#123; &#125;</span><br><span class="line">Navigator.prototype.constructor.toString = function () &#123;</span><br><span class="line">    return &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">var navigator = new Navigator();</span><br><span class="line"></span><br><span class="line">console.log(Function.prototype.toString.call(navigator.constructor)) // function Navigator()&#123;&#125;</span><br><span class="line">/* åŸç†ï¼š</span><br><span class="line">1. å®šä¹‰ function Navigator()&#123;&#125; æ—¶ï¼ŒNavigator.prototype.constructor é»˜è®¤ä¼šè¢«è®¾ç½®ä¸º Navigator æœ¬èº«ã€‚</span><br><span class="line">å› æ­¤ï¼Œnavigator.constructor æ˜¯ Navigatorï¼Œè€Œ navigator.constructor.toString() è°ƒç”¨çš„é»˜è®¤æ˜¯ Function.prototype.toString æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">2. é€šè¿‡é‡å†™ Navigator.prototype.constructor.toString å¹¶æ²¡æœ‰æ”¹å˜ Function.prototype.toString çš„é»˜è®¤è¡Œä¸ºï¼Œ</span><br><span class="line">è€Œæ˜¯ç»™ Navigator.prototype.constructor ä¸Šå®šä¹‰äº†ä¸€ä¸ªæ–°çš„ toString æ–¹æ³•ã€‚</span><br><span class="line">è¿™æ„å‘³ç€åªæœ‰åœ¨æ˜¾å¼è°ƒç”¨ navigator.constructor.toString() æ—¶ï¼Œæ‰ä¼šè¿”å› &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line"></span><br><span class="line">3. Function.prototype.toString.call(navigator.constructor) å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ Function.prototype.toStringï¼Œ</span><br><span class="line">è¿”å›çš„æ˜¯å‡½æ•°æœ¬èº«çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œä¸ä¼šè°ƒç”¨ constructor.toStringã€‚</span><br><span class="line">æ¢å¥è¯è¯´ï¼ŒFunction.prototype.toString æ˜¯è¿”å›å‡½æ•°å®šä¹‰çš„åŸå§‹ä»£ç å½¢å¼ï¼Œè€Œä¸æ˜¯é€šè¿‡ toString æ–¹æ³•å®šåˆ¶çš„ç»“æœã€‚</span><br><span class="line">å› æ­¤ï¼Œå®ƒä»ç„¶ä¼šè¿”å› function Navigator()&#123;&#125;ï¼Œè¿™æ˜¯è¯¥å‡½æ•°çš„é»˜è®¤è¡¨ç¤ºå½¢å¼</span><br><span class="line"></span><br><span class="line">æ€»ç»“ï¼šFunction.prototype.toString æ˜¯ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œç”¨äºè¿”å›å‡½æ•°çš„ä»£ç è¡¨ç¤ºï¼Œä¸»è¦ç”¨äºè°ƒè¯•æˆ–æ˜¾ç¤ºç›®çš„ï¼Œ</span><br><span class="line">å®ƒä¼šå¿½ç•¥æˆ‘ä»¬åœ¨åŸå‹é“¾ä¸Šæ‰‹åŠ¨é‡å†™çš„ toString æ–¹æ³•ï¼Œç›´æ¥è¿”å›å‡½æ•°çš„ä»£ç ç»“æ„ï¼Œå¹¶ä¸ä¾èµ–äº toString æ–¹æ³•çš„è¦†ç›–ã€‚</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">var oldtostr = Function.prototype.toString;</span><br><span class="line">Function.prototype.toString = function () &#123;</span><br><span class="line">    var res = oldtostr.call(this);</span><br><span class="line">    if (this.name === &quot;Navigator&quot;) &#123;</span><br><span class="line">        console.log(&quot;åŸå§‹ï¼š&quot; + this.name + &#x27; --&gt; toStringï¼š&#x27; + res);</span><br><span class="line">        return &quot;function Navigator() &#123; [native code] &#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function checknavigator() &#123;</span><br><span class="line">    return Function.prototype.toString.call(navigator.constructor) === &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line">    // return navigator.constructor.toString() === &#x27;function Navigator() &#123; [native code] &#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">console.log(checknavigator()); // true</span><br><span class="line">console.log(navigator.constructor.toString()); // function Navigator() &#123; [native code] &#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-hook-indexOf-å¼‚å¸¸å †æ ˆæ£€æµ‹"><a href="#4-hook-indexOf-å¼‚å¸¸å †æ ˆæ£€æµ‹" class="headerlink" title="4. hook indexOf å¼‚å¸¸å †æ ˆæ£€æµ‹"></a>4. hook indexOf å¼‚å¸¸å †æ ˆæ£€æµ‹</h3><blockquote>
<p>æ³¨æ„ï¼šIndexOf é€šå¸¸ç”¨äºå¯¹å¼‚å¸¸å †æ ˆçš„è¾“å‡ºå†…å®¹çš„æ£€æµ‹ï¼Œé€šè¿‡ Hook è„šæœ¬é…åˆ if åˆ¤æ–­å…¥å‚ï¼Œä¿®æ”¹ indexOf çš„è¿”å›å€¼å³å¯ç»•è¿‡æ£€æµ‹ï¼ˆé‡åˆ°ç±»ä¼¼ indexOf è¿™æ ·å¸¸ç”¨çš„æ£€æµ‹æ–¹æ³•ï¼Œå¯ä»¥ Hook å…¶è°ƒç”¨ï¼Œé€šå¸¸ä¼šæ‰“å°å‡ºä¸€äº›æ£€æµ‹ç‚¹ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">let old_indexOf = String.prototype.indexOf;</span><br><span class="line">String.prototype.indexOf = function (args) &#123;</span><br><span class="line">    let res = old_indexOf.call(this, args);</span><br><span class="line">    console.log(`ã€ indexOf ã€‘--&gt; &quot;$&#123;this&#125;&quot;.indexOf(&quot;$&#123;args&#125;&quot;) --&gt; $&#123;res&#125;`);</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let old_indexOf = String.prototype.indexOf;</span><br><span class="line">String.prototype.indexOf = function (args) &#123;</span><br><span class="line">    let res = old_indexOf.call(this, args);</span><br><span class="line">    let new_res = undefined;</span><br><span class="line">    if (args == &#x27;flight_touch_react&#x27;) &#123;</span><br><span class="line">        new_res = 1;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(`ã€ indexOf ã€‘--&gt; &quot;$&#123;this&#125;&quot;.indexOf(&quot;$&#123;args&#125;&quot;) --&gt; $&#123;res&#125; --&gt; ä¿®æ”¹è¿”å›å€¼ï¼š$&#123;new_res&#125;`);</span><br><span class="line">    return new_res ? new_res : res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ã€ indexOf ã€‘--&gt; &quot;ReferenceError: a is not defined</span><br><span class="line">    at _0x210380 (eval at doom (/Users/xfblog/Desktop/study/è¡¥ç¯å¢ƒdemo/demo2.js:133:21), &lt;anonymous&gt;:1:21735)</span><br><span class="line">    at doom (/Users/xfblog/Desktop/study/è¡¥ç¯å¢ƒdemo/demo2.js:134:16)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/xfblog/Desktop/study/è¡¥ç¯å¢ƒdemo/demo2.js:139:11)</span><br><span class="line">    at Module._compile (node:internal/modules/cjs/loader:1546:14)</span><br><span class="line">    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)</span><br><span class="line">    at Module.load (node:internal/modules/cjs/loader:1317:32)</span><br><span class="line">    at Module._load (node:internal/modules/cjs/loader:1127:12)</span><br><span class="line">    at TracingChannel.traceSync (node:diagnostics_channel:315:14)</span><br><span class="line">    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)</span><br><span class="line">    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:166:5)&quot;.indexOf(&quot;flight_touch_react&quot;) --&gt; -1 --&gt; ä¿®æ”¹è¿”å›å€¼ï¼š1</span><br></pre></td></tr></table></figure>

<h3 id="5-å†…ç½®-Symbol-ç¯å¢ƒæ£€æµ‹"><a href="#5-å†…ç½®-Symbol-ç¯å¢ƒæ£€æµ‹" class="headerlink" title="5. å†…ç½® Symbol ç¯å¢ƒæ£€æµ‹"></a>5. å†…ç½® Symbol ç¯å¢ƒæ£€æµ‹</h3><blockquote>
<p><strong>Symbol.toPrimitiveï¼š</strong>ä¸ºå¯¹è±¡å®šä¹‰ä¸€ä¸ª<strong>åŸå§‹å€¼è½¬æ¢</strong>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨å¯¹è±¡å‚ä¸ä¸€äº›ç±»å‹è½¬æ¢æ—¶è¢«è°ƒç”¨ï¼Œæ¯”å¦‚åœ¨å¯¹è±¡ä¸å­—ç¬¦ä¸²æˆ–æ•°å­—è¿›è¡Œç›¸åŠ ã€æ¯”è¾ƒç­‰æ“ä½œæ—¶ï¼Œé€šè¿‡ Symbol.toPrimitive æŒ‡å®šçš„å‡½æ•°å¯ä»¥è‡ªå®šä¹‰å¯¹è±¡å¦‚ä½•è½¬æ¢æˆåŸå§‹å€¼</p>
<ol>
<li><strong>å­—ç¬¦ä¸²ä¸Šä¸‹æ–‡</strong>ï¼šä¾‹å¦‚å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œ <code>object + &quot;string&quot;</code></li>
<li><strong>æ•°å­—ä¸Šä¸‹æ–‡</strong>ï¼šä¾‹å¦‚æ•°å€¼è¿ç®—æ“ä½œ <code>object - 0</code></li>
<li><strong>é»˜è®¤ä¸Šä¸‹æ–‡</strong>ï¼šä¾‹å¦‚ <code>alert(object)</code> æˆ–è€… <code>object == &quot;value&quot;</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">  [Symbol.toPrimitive](hint) &#123;</span><br><span class="line">    if (hint === &quot;number&quot;) &#123;</span><br><span class="line">      return 42; // æ•°å­—ä¸Šä¸‹æ–‡ä¸­è¿”å› 42</span><br><span class="line">    &#125;</span><br><span class="line">    if (hint === &quot;string&quot;) &#123;</span><br><span class="line">      return &quot;Hello&quot;; // å­—ç¬¦ä¸²ä¸Šä¸‹æ–‡ä¸­è¿”å› &quot;Hello&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    return true; // é»˜è®¤ä¸Šä¸‹æ–‡ä¸­è¿”å› true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(+obj);           // 42ï¼Œæ•°å­—ä¸Šä¸‹æ–‡</span><br><span class="line">console.log(`$&#123;obj&#125;`);       // &quot;Hello&quot;ï¼Œå­—ç¬¦ä¸²ä¸Šä¸‹æ–‡</span><br><span class="line">console.log(obj + &quot; world&quot;); // &quot;Hello world&quot;ï¼Œé»˜è®¤ä¸Šä¸‹æ–‡</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line">/* ================================= è¡¥ç¯å¢ƒåŒºåŸŸ START ================================= */</span><br><span class="line">window = global;</span><br><span class="line">exports = undefined;</span><br><span class="line">// ----------------------------------------------------------------------------------</span><br><span class="line">// navigator[Symbol.toStringTag] --&gt; Navigator.prototype[Symbol.toStringTag] --&gt; &#x27;Navigator&#x27;</span><br><span class="line">// å±æ€§æè¿°ç¬¦ï¼šObject.getOwnPropertyDescriptor(Navigator.prototype, Symbol.toStringTag)</span><br><span class="line">function Navigator() &#123; &#125;</span><br><span class="line">Object.defineProperties(Navigator.prototype, &#123;</span><br><span class="line">	[Symbol.toStringTag]: &#123;</span><br><span class="line">		&quot;value&quot;: &quot;Navigator&quot;,</span><br><span class="line">		&quot;writable&quot;: false,</span><br><span class="line">		&quot;enumerable&quot;: false,</span><br><span class="line">		&quot;configurable&quot;: true</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;);</span><br><span class="line">navigator = new Navigator();</span><br><span class="line"></span><br><span class="line">// window[Symbol.toStringTag] --&gt; Window.prototype[Symbol.toStringTag] --&gt; &#x27;Window&#x27;</span><br><span class="line">Object.defineProperties(global, &#123;</span><br><span class="line">	[Symbol.toStringTag]: &#123;</span><br><span class="line">		&quot;value&quot;: &quot;Window&quot;,</span><br><span class="line">		&quot;writable&quot;: false,</span><br><span class="line">		&quot;enumerable&quot;: false,</span><br><span class="line">		&quot;configurable&quot;: true</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var Document = function () &#123; &#125;</span><br><span class="line">// function Document() &#123; &#125;</span><br><span class="line">Document.prototype[Symbol.toStringTag] = &quot;Document&quot;;</span><br><span class="line">// typeof HTMLDocument --&gt; &#x27;function&#x27;</span><br><span class="line">function HTMLDocument() &#123; &#125;</span><br><span class="line">// HTMLDocument æ„é€ å‡½æ•°çš„åŸå‹å¹¶æ²¡æœ‰è‡ªå®šä¹‰çš„ Symbol.toStringTag å±æ€§ï¼Œ</span><br><span class="line">// å› æ­¤ document å¯¹è±¡ç»§æ‰¿äº†é»˜è®¤çš„ Object.prototype.toStringï¼Œè¾“å‡ºä¸º [object Object]</span><br><span class="line">HTMLDocument.prototype[Symbol.toStringTag] = &quot;HTMLDocument&quot;;</span><br><span class="line"></span><br><span class="line">Object.setPrototypeOf(HTMLDocument.prototype, Document.prototype);</span><br><span class="line">document = Object.setPrototypeOf(&#123;&#125;, HTMLDocument.prototype);</span><br><span class="line">// ----------------------------------------------------------------------------------</span><br><span class="line">!(function getEnvironment(proxyArray) &#123;</span><br><span class="line">	function getObjhandler(proxyName) &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			get(target, property, receiver) &#123;</span><br><span class="line">				if (target[property] instanceof Object) &#123;</span><br><span class="line">					console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`);</span><br><span class="line">					return new Proxy(target[property], getObjhandler(`$&#123;proxyName&#125;.$&#123;String(property)&#125;`));</span><br><span class="line">				&#125;</span><br><span class="line">				if (typeof property == &#x27;symbol&#x27;) &#123;</span><br><span class="line">					console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;target[property]&#125;`);</span><br><span class="line">					return Reflect.get(...arguments);</span><br><span class="line">				&#125;</span><br><span class="line">				console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`);</span><br><span class="line">				try &#123;</span><br><span class="line">					return Reflect.get(...arguments);</span><br><span class="line">				&#125; catch (error) &#123;</span><br><span class="line">					console.error(`ã€å¼‚å¸¸æ•è·ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;target[property]&#125;: \n$&#123;error.message&#125; --------`);</span><br><span class="line">					if (property == &quot;userAgent&quot;) &#123;</span><br><span class="line">						return &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36&quot;</span><br><span class="line">					&#125;</span><br><span class="line">					// æ ¹æ®ä¸šåŠ¡é€»è¾‘è¿”å›é»˜è®¤å€¼æˆ–è¿›è¡Œå…¶ä»–å¤„ç†</span><br><span class="line">					return target[property];  // æˆ–è€…å…¶ä»–åˆé€‚çš„é»˜è®¤å€¼</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			set(target, property, value, receiver) &#123;</span><br><span class="line">				console.log(`ã€ set ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof value&#125; --&gt; $&#123;value&#125;`);</span><br><span class="line">				return Reflect.set(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			has(target, propKey) &#123;</span><br><span class="line">				console.log(`ã€ has ã€‘--&gt; [$&#123;String(propKey)&#125;] in [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.has(...arguments)&#125;`);</span><br><span class="line">				return Reflect.has(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			deleteProperty(target, propKey) &#123;</span><br><span class="line">				console.log(`ã€ deleteProperty ã€‘--&gt; delete [$&#123;String(propKey)&#125;] from [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.deleteProperty(...arguments)&#125;`);</span><br><span class="line">				return Reflect.deleteProperty(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			getOwnPropertyDescriptor(target, propKey) &#123;</span><br><span class="line">				console.log(`ã€ getOwnPropertyDescriptor ã€‘--&gt; ($&#123;proxyName&#125;, &quot;$&#123;String(propKey)&#125;&quot;) --&gt; $&#123;JSON.stringify(Reflect.getOwnPropertyDescriptor(...arguments))&#125;`);</span><br><span class="line">				return Reflect.getOwnPropertyDescriptor(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			defineProperty(target, propKey, propDesc) &#123;</span><br><span class="line">				console.log(`ã€ defineProperty ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(propKey)&#125; --&gt; $&#123;JSON.stringify(propDesc)&#125; --&gt; $&#123;Reflect.defineProperty(...arguments)&#125;`);</span><br><span class="line">				return Reflect.defineProperty(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			preventExtensions(target) &#123;</span><br><span class="line">				console.log(`ã€ preventExtensions ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.preventExtensions(...arguments)&#125;`);</span><br><span class="line">				return Reflect.preventExtensions(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			isExtensible(target) &#123;</span><br><span class="line">				console.log(`ã€ isExtensible ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.isExtensible(...arguments)&#125;`);</span><br><span class="line">				return Reflect.isExtensible(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			getPrototypeOf(target) &#123;</span><br><span class="line">				console.log(`ã€ getPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.getPrototypeOf(...arguments)&#125;`);</span><br><span class="line">				return Reflect.getPrototypeOf(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			setPrototypeOf(target, proto) &#123;</span><br><span class="line">				console.log(`ã€ setPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(proto)&#125; --&gt; $&#123;Reflect.setPrototypeOf(...arguments)&#125;`);</span><br><span class="line">				return Reflect.setPrototypeOf(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			ownKeys(target) &#123;</span><br><span class="line">				console.log(`ã€ ownKeys ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(Reflect.ownKeys(...arguments))&#125;`);</span><br><span class="line">				return Reflect.ownKeys(...arguments)</span><br><span class="line">			&#125;,</span><br><span class="line">			apply(target, thisArg, args) &#123;</span><br><span class="line">				console.log(`ã€ apply ã€‘--&gt; $&#123;proxyName&#125;($&#123;args&#125;) --&gt; $&#123;Reflect.apply(...arguments)&#125;`);</span><br><span class="line">				return Reflect.apply(...arguments)</span><br><span class="line">			&#125;,</span><br><span class="line">			construct(target, args) &#123;</span><br><span class="line">				console.log(`ã€ construct ã€‘--&gt; new Proxy($&#123;args&#125;) --&gt; $&#123;Reflect.construct(...arguments)&#125;`);</span><br><span class="line">				return Reflect.construct(...arguments)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	proxyArray.forEach(proxyName =&gt; &#123;</span><br><span class="line">		globalThis[proxyName] = new Proxy(globalThis[proxyName] || &#123;&#125;, getObjhandler(proxyName))</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;)([&#x27;window&#x27;, &#x27;document&#x27;, &#x27;location&#x27;, &#x27;navigator&#x27;, &#x27;history&#x27;, &#x27;screen&#x27;]);</span><br><span class="line">// window åœ¨ç»è¿‡ä»£ç†å™¨è®¾ç½®åï¼Œè½¬æ¢ä¸ºäº† Proxy å¯¹è±¡ï¼ŒObject.is(window, globalThis) æ£€æµ‹åˆ™ä¸º false</span><br><span class="line">globalThis = window;</span><br><span class="line">/* ================================== è¡¥ç¯å¢ƒåŒºåŸŸ END ================================== */</span><br><span class="line"></span><br><span class="line">var _0x4f2a = [&#x27;xZb4mZK4nti1&#x27;, &#x27;mZa3ndy5u0Xgt2nZ&#x27;, &#x27;mti0nJuWmMnHwLDszq&#x27;, &#x27;ExOWmtiZndu2nW&#x27;, &#x27;mJG3mdLHuuDiwNa&#x27;, &#x27;odKRlW&#x27;, &#x27;BMrVD10&#x27;, &#x27;vvzxwfLAywjJza&#x27;, &#x27;qujdrevg&#x27;, &#x27;oeDjvNbuzW&#x27;, &#x27;w29IAMvJDcboyq&#x27;, &#x27;zhrH&#x27;, &#x27;y29Uy2f0&#x27;, &#x27;xZb4mtm0zMnI&#x27;, &#x27;mJroEML4sg0&#x27;, &#x27;mtaXm2n1BwrtuW&#x27;, &#x27;zNvUy3rPB24&#x27;, &#x27;DMLNyxrVCL0&#x27;, &#x27;mtmWotG2vvDAA2Xt&#x27;, &#x27;mdeYmZq1nJC4oq&#x27;, &#x27;ywjJzgvM&#x27;, &#x27;w29IAMvJDcbxAq&#x27;, &#x27;y2HHCKnVzgvbDa&#x27;, &#x27;nJK0uvHZDLfZ&#x27;, &#x27;Dg9tDhjPBMC&#x27;, &#x27;xZb4ntjLowiX&#x27;, &#x27;y2HHCKf0&#x27;, &#x27;BgvUz3rO&#x27;, &#x27;qujdrevgr0HjsG&#x27;, &#x27;mJe0mvP1zufwBq&#x27;, &#x27;ndq0otL5v1DivMC&#x27;, &#x27;z2v0uhjVDg90Eq&#x27;, &#x27;CMfUzg9T&#x27;];</span><br><span class="line">var _0x3b2a2b = _0x5299;</span><br><span class="line">(function (_0x484f5c, _0x4c9781) &#123;</span><br><span class="line">	var _0x5b5144 = _0x5299;</span><br><span class="line">	while (!![]) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			var _0x8f4b64 = parseInt(_0x5b5144(0x1d2)) * -parseInt(_0x5b5144(0x1da)) + -parseInt(_0x5b5144(0x1e1)) * parseInt(_0x5b5144(&#x27;0x1cc&#x27;)) + parseInt(_0x5b5144(&#x27;0x1e6&#x27;)) + -parseInt(_0x5b5144(0x1e5)) + -parseInt(_0x5b5144(0x1e0)) + parseInt(_0x5b5144(&#x27;0x1d5&#x27;)) + -parseInt(_0x5b5144(&#x27;0x1e8&#x27;)) * -parseInt(_0x5b5144(0x1d1));</span><br><span class="line">			if (_0x8f4b64 === _0x4c9781) break; else _0x484f5c[&#x27;push&#x27;](_0x484f5c[&#x27;shift&#x27;]());</span><br><span class="line">		&#125; catch (_0x24a143) &#123;</span><br><span class="line">			_0x484f5c[&#x27;push&#x27;](_0x484f5c[&#x27;shift&#x27;]());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;(_0x4f2a, 0xaa618));</span><br><span class="line">var hexcase = 0x0, b64pad = &#x27;&#x27;, chrsz = 0x8;</span><br><span class="line"></span><br><span class="line">function _0x5299(_0x3d96c8, _0x6e00cb) &#123;</span><br><span class="line">	return _0x5299 = function (_0x4f2a0d, _0x52996e) &#123;</span><br><span class="line">		_0x4f2a0d = _0x4f2a0d - 0x1cb;</span><br><span class="line">		var _0x4419a2 = _0x4f2a[_0x4f2a0d];</span><br><span class="line">		if (_0x5299[&#x27;NuRqdF&#x27;] === undefined) &#123;</span><br><span class="line">			var _0x2ee095 = function (_0x3a9367) &#123;</span><br><span class="line">				var _0x134fcb = &#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=&#x27;;</span><br><span class="line">				var _0x398525 = &#x27;&#x27;, _0x52e9b1 = &#x27;&#x27;;</span><br><span class="line">				for (var _0x2f7fc6 = 0x0, _0x55745b, _0x47055a, _0xdf9aa5 = 0x0; _0x47055a = _0x3a9367[&#x27;charAt&#x27;](_0xdf9aa5++); ~_0x47055a &amp;&amp; (_0x55745b = _0x2f7fc6 % 0x4 ? _0x55745b * 0x40 + _0x47055a : _0x47055a, _0x2f7fc6++ % 0x4) ? _0x398525 += String[&#x27;fromCharCode&#x27;](0xff &amp; _0x55745b &gt;&gt; (-0x2 * _0x2f7fc6 &amp; 0x6)) : 0x0) &#123;</span><br><span class="line">					_0x47055a = _0x134fcb[&#x27;indexOf&#x27;](_0x47055a);</span><br><span class="line">				&#125;</span><br><span class="line">				for (var _0x2853cd = 0x0, _0x4b5792 = _0x398525[&#x27;length&#x27;]; _0x2853cd &lt; _0x4b5792; _0x2853cd++) &#123;</span><br><span class="line">					_0x52e9b1 += &#x27;%&#x27; + (&#x27;00&#x27; + _0x398525[&#x27;charCodeAt&#x27;](_0x2853cd)[&#x27;toString&#x27;](0x10))[&#x27;slice&#x27;](-0x2);</span><br><span class="line">				&#125;</span><br><span class="line">				return decodeURIComponent(_0x52e9b1);</span><br><span class="line">			&#125;;</span><br><span class="line">			_0x5299[&#x27;xuuilA&#x27;] = _0x2ee095, _0x3d96c8 = arguments, _0x5299[&#x27;NuRqdF&#x27;] = !![];</span><br><span class="line">		&#125;</span><br><span class="line">		var _0x1b36c9 = _0x4f2a[0x0], _0x7dadab = _0x4f2a0d + _0x1b36c9, _0x1af7e2 = _0x3d96c8[_0x7dadab];</span><br><span class="line">		return !_0x1af7e2 ? (_0x4419a2 = _0x5299[&#x27;xuuilA&#x27;](_0x4419a2), _0x3d96c8[_0x7dadab] = _0x4419a2) : _0x4419a2 = _0x1af7e2, _0x4419a2;</span><br><span class="line">	&#125;, _0x5299(_0x3d96c8, _0x6e00cb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let lmd5 = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">function core_md5(_0x2f7fc6, _0x55745b) &#123;</span><br><span class="line">	_0x2f7fc6[_0x55745b &gt;&gt; 0x5] |= 0x80 &lt;&lt; _0x55745b % 0x20, _0x2f7fc6[(_0x55745b + 0x40 &gt;&gt;&gt; 0x9 &lt;&lt; 0x4) + 0xe] = _0x55745b;</span><br><span class="line">	var _0x47055a = 0x67452301, _0xdf9aa5 = -0x10325477, _0x2853cd = -0x67452302, _0x4b5792 = 0x10325476;</span><br><span class="line">	for (var _0xc26d62 = 0x0; _0xc26d62 &lt; _0x2f7fc6[&#x27;length&#x27;]; _0xc26d62 += 0x10) &#123;</span><br><span class="line">		var _0x41dc6f = _0x47055a, _0x1477b2 = _0xdf9aa5, _0x1723b5 = _0x2853cd, _0x3f85d4 = _0x4b5792;</span><br><span class="line">		_0x47055a = md5_ff(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x0], 0x7, -0x28955b88), _0x4b5792 = md5_ff(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x1], 0xc, -0x173848aa), _0x2853cd = md5_ff(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x2], 0x11, 0x242070db), _0xdf9aa5 = md5_ff(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x3], 0x16, -0x3e423112), _0x47055a = md5_ff(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x4], 0x7, -0xa83f051), _0x4b5792 = md5_ff(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x5], 0xc, 0x4787c62a), _0x2853cd = md5_ff(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x6], 0x11, -0x57cfb9ed), _0xdf9aa5 = md5_ff(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x7], 0x16, -0x2b96aff), _0x47055a = md5_ff(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x8], 0x7, 0x698098d8), _0x4b5792 = md5_ff(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x9], 0xc, -0x74bb0851), _0x2853cd = md5_ff(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xa], 0x11, -0xa44f), _0xdf9aa5 = md5_ff(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0xb], 0x16, -0x76a32842), _0x47055a = md5_ff(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0xc], 0x7, 0x6b901122), _0x4b5792 = md5_ff(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0xd], 0xc, -0x2678e6d), _0x2853cd = md5_ff(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xe], 0x11, -0x5986bc72), _0xdf9aa5 = md5_ff(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0xf], 0x16, 0x49b40821), _0x47055a = md5_gg(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x1], 0x5, -0x9e1da9e), _0x4b5792 = md5_gg(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x6], 0x9, -0x3fbf4cc0), _0x2853cd = md5_gg(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xb], 0xe, 0x265e5a51), _0xdf9aa5 = md5_gg(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x0], 0x14, -0x16493856), _0x47055a = md5_gg(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x5], 0x5, -0x29d0efa3), _0x4b5792 = md5_gg(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0xa], 0x9, 0x2441453), _0x2853cd = md5_gg(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xf], 0xe, -0x275e197f), _0xdf9aa5 = md5_gg(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x4], 0x14, -0x182c0438), _0x47055a = md5_gg(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x9], 0x5, 0x21e1cde6), _0x4b5792 = md5_gg(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0xe], 0x9, -0x3cc8f82a), _0x2853cd = md5_gg(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x3], 0xe, -0xb2af279), _0xdf9aa5 = md5_gg(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x8], 0x14, 0x455a14ed), _0x47055a = md5_gg(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0xd], 0x5, -0x561c16fb), _0x4b5792 = md5_gg(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x2], 0x9, -0x3105c08), _0x2853cd = md5_gg(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x7], 0xe, 0x676f02d9), _0xdf9aa5 = md5_gg(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0xc], 0x14, -0x72d5b376), _0x47055a = md5_hh(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x5], 0x4, -0x5c6be), _0x4b5792 = md5_hh(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x8], 0xb, -0x788e097f), _0x2853cd = md5_hh(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xb], 0x10, 0x6d9d6122), _0xdf9aa5 = md5_hh(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0xe], 0x17, -0x21ac7f4), _0x47055a = md5_hh(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x1], 0x4, -0x5b4115bc), _0x4b5792 = md5_hh(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x4], 0xb, 0x4bdecfa9), _0x2853cd = md5_hh(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x7], 0x10, -0x944b4a0), _0xdf9aa5 = md5_hh(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0xa], 0x17, -0x41404390), _0x47055a = md5_hh(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0xd], 0x4, 0x289b7ec6), _0x4b5792 = md5_hh(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x0], 0xb, -0x155ed806), _0x2853cd = md5_hh(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x3], 0x10, -0x2b10cf7b), _0xdf9aa5 = md5_hh(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x6], 0x17, 0x4881d05), _0x47055a = md5_hh(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x9], 0x4, -0x262b2fc7), _0x4b5792 = md5_hh(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0xc], 0xb, -0x1924661b), _0x2853cd = md5_hh(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xf], 0x10, 0x1fa27cf8), _0xdf9aa5 = md5_hh(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x2], 0x17, -0x3b53a99b), _0x47055a = md5_ii(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x0], 0x6, -0xbd6ddbc), _0x4b5792 = md5_ii(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x7], 0xa, 0x432aff97), _0x2853cd = md5_ii(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xe], 0xf, -0x546bdc59), _0xdf9aa5 = md5_ii(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x5], 0x15, -0x36c5fc7), _0x47055a = md5_ii(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0xc], 0x6, 0x655b59c3), _0x4b5792 = md5_ii(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0x3], 0xa, -0x70f3336e), _0x2853cd = md5_ii(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0xa], 0xf, -0x100b83), _0xdf9aa5 = md5_ii(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x1], 0x15, -0x7a7ba22f), _0x47055a = md5_ii(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x8], 0x6, 0x6fa87e4f), _0x4b5792 = md5_ii(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0xf], 0xa, -0x1d31920), _0x2853cd = md5_ii(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x6], 0xf, -0x5cfebcec), _0xdf9aa5 = md5_ii(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0xd], 0x15, 0x4e0811a1), _0x47055a = md5_ii(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792, _0x2f7fc6[_0xc26d62 + 0x4], 0x6, -0x8ac817e), _0x4b5792 = md5_ii(_0x4b5792, _0x47055a, _0xdf9aa5, _0x2853cd, _0x2f7fc6[_0xc26d62 + 0xb], 0xa, -0x42c50dcb), _0x2853cd = md5_ii(_0x2853cd, _0x4b5792, _0x47055a, _0xdf9aa5, _0x2f7fc6[_0xc26d62 + 0x2], 0xf, 0x2ad7d2bb), _0xdf9aa5 = md5_ii(_0xdf9aa5, _0x2853cd, _0x4b5792, _0x47055a, _0x2f7fc6[_0xc26d62 + 0x9], 0x15, -0x14792c6f), _0x47055a = safe_add(_0x47055a, _0x41dc6f), _0xdf9aa5 = safe_add(_0xdf9aa5, _0x1477b2), _0x2853cd = safe_add(_0x2853cd, _0x1723b5), _0x4b5792 = safe_add(_0x4b5792, _0x3f85d4);</span><br><span class="line">	&#125;</span><br><span class="line">	return Array(_0x47055a, _0xdf9aa5, _0x2853cd, _0x4b5792);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function md5_cmn(_0x4fedd5, _0x4ad202, _0x3dab77, _0xe30333, _0x179e32, _0x134940) &#123;</span><br><span class="line">	return safe_add(bit_rol(safe_add(safe_add(_0x4ad202, _0x4fedd5), safe_add(_0xe30333, _0x134940)), _0x179e32), _0x3dab77);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function md5_ff(_0x48dd01, _0x590894, _0x2a8b56, _0x5a1ed7, _0x39782e, _0x1c6730, _0x65ff94) &#123;</span><br><span class="line">	return md5_cmn(_0x590894 &amp; _0x2a8b56 | ~_0x590894 &amp; _0x5a1ed7, _0x48dd01, _0x590894, _0x39782e, _0x1c6730, _0x65ff94);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function md5_gg(_0x38eafa, _0x3c9926, _0x494836, _0x9ba7f5, _0x29faac, _0x4a5104, _0x1a6d52) &#123;</span><br><span class="line">	return md5_cmn(_0x3c9926 &amp; _0x9ba7f5 | _0x494836 &amp; ~_0x9ba7f5, _0x38eafa, _0x3c9926, _0x29faac, _0x4a5104, _0x1a6d52);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function md5_hh(_0x493e8f, _0x241c10, _0x4b56bc, _0x511e91, _0x5cacdb, _0x12d467, _0x19c090) &#123;</span><br><span class="line">	return md5_cmn(_0x241c10 ^ _0x4b56bc ^ _0x511e91, _0x493e8f, _0x241c10, _0x5cacdb, _0x12d467, _0x19c090);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function md5_ii(_0x1e564b, _0x1cb61f, _0x40aea0, _0x1cd8ad, _0x3a955f, _0x527294, _0x2a51ff) &#123;</span><br><span class="line">	return md5_cmn(_0x40aea0 ^ (_0x1cb61f | ~_0x1cd8ad), _0x1e564b, _0x1cb61f, _0x3a955f, _0x527294, _0x2a51ff);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function core_hmac_md5(_0x22b4fd, _0x599a94) &#123;</span><br><span class="line">	var _0x1e547d = _0x5299, _0x3440f1 = str2binl(_0x22b4fd);</span><br><span class="line">	if (_0x3440f1[_0x1e547d(0x1de)] &gt; 0x10) _0x3440f1 = core_md5(_0x3440f1, _0x22b4fd[_0x1e547d(0x1de)] * chrsz);</span><br><span class="line">	var _0x2074c1 = Array(0x10), _0x1a616d = Array(0x10);</span><br><span class="line">	for (var _0x57b248 = 0x0; _0x57b248 &lt; 0x10; _0x57b248++) &#123;</span><br><span class="line">		_0x2074c1[_0x57b248] = _0x3440f1[_0x57b248] ^ 0x36363636, _0x1a616d[_0x57b248] = _0x3440f1[_0x57b248] ^ 0x5c5c5c5c;</span><br><span class="line">	&#125;</span><br><span class="line">	var _0x15a71b = core_md5(_0x2074c1[_0x1e547d(&#x27;0x1cf&#x27;)](str2binl(_0x599a94)), 0x200 + _0x599a94[&#x27;length&#x27;] * chrsz);</span><br><span class="line">	return core_md5(_0x1a616d[_0x1e547d(0x1cf)](_0x15a71b), 0x200 + 0x80);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function safe_add(_0x1d693d, _0x2213b8) &#123;</span><br><span class="line">	var _0xf479d8 = (_0x1d693d &amp; 0xffff) + (_0x2213b8 &amp; 0xffff),</span><br><span class="line">		_0x1654f5 = (_0x1d693d &gt;&gt; 0x10) + (_0x2213b8 &gt;&gt; 0x10) + (_0xf479d8 &gt;&gt; 0x10);</span><br><span class="line">	return _0x1654f5 &lt;&lt; 0x10 | _0xf479d8 &amp; 0xffff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bit_rol(_0x582e5a, _0x296943) &#123;</span><br><span class="line">	return _0x582e5a &lt;&lt; _0x296943 | _0x582e5a &gt;&gt;&gt; 0x20 - _0x296943;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function str2binl(_0xb2b531) &#123;</span><br><span class="line">	var _0x49f657 = _0x5299, _0x2694a4 = Array(), _0x3c61d4 = (0x1 &lt;&lt; chrsz) - 0x1;</span><br><span class="line">	for (var _0xcf1ffd = 0x0; _0xcf1ffd &lt; _0xb2b531[_0x49f657(&#x27;0x1de&#x27;)] * chrsz; _0xcf1ffd += chrsz) _0x2694a4[_0xcf1ffd &gt;&gt; 0x5] |= (_0xb2b531[_0x49f657(&#x27;0x1d9&#x27;)](_0xcf1ffd / chrsz) &amp; _0x3c61d4) &lt;&lt; _0xcf1ffd % 0x20;</span><br><span class="line">	return _0x2694a4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function binl2str(_0x494a15) &#123;</span><br><span class="line">	var _0x21474f = _0x5299, _0x22bebd = &#x27;&#x27;, _0x4ae780 = (0x1 &lt;&lt; chrsz) - 0x1;</span><br><span class="line">	for (var _0x5339a0 = 0x0; _0x5339a0 &lt; _0x494a15[_0x21474f(0x1de)] * 0x20; _0x5339a0 += chrsz) _0x22bebd += String[&#x27;fromCharCo&#x27; + &#x27;de&#x27;](_0x494a15[_0x5339a0 &gt;&gt; 0x5] &gt;&gt;&gt; _0x5339a0 % 0x20 &amp; _0x4ae780);</span><br><span class="line">	return _0x22bebd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function binl2hex(_0x105709) &#123;</span><br><span class="line">	var _0x3e0fbc = _0x5299,</span><br><span class="line">		_0x3090af = hexcase ? _0x3e0fbc(0x1d6) + _0x3e0fbc(0x1cb) : _0x3e0fbc(0x1d6) + _0x3e0fbc(&#x27;0x1d7&#x27;), _0x48992b = &#x27;&#x27;;</span><br><span class="line">	for (var _0x27af63 = 0x0; _0x27af63 &lt; _0x105709[_0x3e0fbc(&#x27;0x1de&#x27;)] * 0x4; _0x27af63++) &#123;</span><br><span class="line">		_0x48992b += _0x3090af[_0x3e0fbc(&#x27;0x1dd&#x27;)](_0x105709[_0x27af63 &gt;&gt; 0x2] &gt;&gt; _0x27af63 % 0x4 * 0x8 + 0x4 &amp; 0xf) + _0x3090af[_0x3e0fbc(&#x27;0x1dd&#x27;)](_0x105709[_0x27af63 &gt;&gt; 0x2] &gt;&gt; _0x27af63 % 0x4 * 0x8 &amp; 0xf);</span><br><span class="line">	&#125;</span><br><span class="line">	return _0x48992b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function binl2b64(_0x1fcb8d) &#123;</span><br><span class="line">	var _0x1f69a8 = _0x5299,</span><br><span class="line">		_0x4b8368 = _0x1f69a8(0x1df) + &#x27;KLMNOPQRST&#x27; + _0x1f69a8(&#x27;0x1eb&#x27;) + &#x27;efghijklmn&#x27; + &#x27;opqrstuvwx&#x27; + _0x1f69a8(0x1e7) + _0x1f69a8(0x1e9),</span><br><span class="line">		_0x37174f = &#x27;&#x27;;</span><br><span class="line">	for (var _0x539d82 = 0x0; _0x539d82 &lt; _0x1fcb8d[_0x1f69a8(0x1de)] * 0x4; _0x539d82 += 0x3) &#123;</span><br><span class="line">		var _0x3a7b6d = (_0x1fcb8d[_0x539d82 &gt;&gt; 0x2] &gt;&gt; 0x8 * (_0x539d82 % 0x4) &amp; 0xff) &lt;&lt; 0x10 | (_0x1fcb8d[_0x539d82 + 0x1 &gt;&gt; 0x2] &gt;&gt; 0x8 * ((_0x539d82 + 0x1) % 0x4) &amp; 0xff) &lt;&lt; 0x8 | _0x1fcb8d[_0x539d82 + 0x2 &gt;&gt; 0x2] &gt;&gt; 0x8 * ((_0x539d82 + 0x2) % 0x4) &amp; 0xff;</span><br><span class="line">		for (var _0x7aed3a = 0x0; _0x7aed3a &lt; 0x4; _0x7aed3a++) &#123;</span><br><span class="line">			if (_0x539d82 * 0x8 + _0x7aed3a * 0x6 &gt; _0x1fcb8d[_0x1f69a8(0x1de)] * 0x20) _0x37174f += b64pad; else _0x37174f += _0x4b8368[_0x1f69a8(&#x27;0x1dd&#x27;)](_0x3a7b6d &gt;&gt; 0x6 * (0x3 - _0x7aed3a) &amp; 0x3f);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return _0x37174f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window[_0x3b2a2b(&#x27;0x1ce&#x27;)] = function (_0x4ecca8) &#123;</span><br><span class="line">	var _0x5d2d42 = _0x3b2a2b;</span><br><span class="line">	typeof Document !== _0x5d2d42(&#x27;0x1d3&#x27;) &amp;&amp; (Document = function () &#123;</span><br><span class="line">	&#125;);</span><br><span class="line">	try &#123;</span><br><span class="line">		return navigator + &#x27;&#x27; === _0x5d2d42(&#x27;0x1cd&#x27;) + _0x5d2d42(0x1d4)</span><br><span class="line">			&amp;&amp; window[_0x5d2d42(&#x27;0x1db&#x27;)]() === _0x5d2d42(&#x27;0x1d8&#x27;) + _0x5d2d42(&#x27;0x1ea&#x27;)</span><br><span class="line">			&amp;&amp; Object[_0x5d2d42(0x1e2) + &#x27;peOf&#x27;](document) instanceof Document</span><br><span class="line">			&amp;&amp; Object[&#x27;is&#x27;](window, globalThis) ? lmd5[_0x5d2d42(0x1d0)](&#x27;dta&#x27;, _0x4ecca8) : lmd5[_0x5d2d42(0x1e4)](_0x4ecca8);</span><br><span class="line">	&#125; catch (_0x57ab12) &#123;</span><br><span class="line">		return lmd5[&#x27;_0x398525&#x27;](_0x4ecca8);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;, lmd5[_0x3b2a2b(&#x27;0x1dc&#x27;)] = function (_0x4ad119) &#123;</span><br><span class="line">	return binl2hex(core_md5(str2binl(_0x4ad119), _0x4ad119[&#x27;length&#x27;] * chrsz));</span><br><span class="line">&#125;, lmd5[_0x3b2a2b(&#x27;0x1e4&#x27;)] = function (_0x523268) &#123;</span><br><span class="line">	var _0x30c42f = _0x3b2a2b;</span><br><span class="line">	let _0x184fa8 = String(Math[_0x30c42f(0x1e3)]());</span><br><span class="line">	return binl2hex(core_md5(str2binl(_0x184fa8), _0x184fa8[_0x30c42f(&#x27;0x1de&#x27;)] * chrsz));</span><br><span class="line">&#125;, lmd5[_0x3b2a2b(0x1d0)] = function (_0x2d7b8d, _0x2916db) &#123;</span><br><span class="line">	return binl2hex(core_hmac_md5(_0x2d7b8d, _0x2916db));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(window.dta(&quot;&quot;));</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€è¡¥ç¯å¢ƒ-VS-ç¯å¢ƒæ£€æµ‹"><a href="#äº”ã€è¡¥ç¯å¢ƒ-VS-ç¯å¢ƒæ£€æµ‹" class="headerlink" title="äº”ã€è¡¥ç¯å¢ƒ VS ç¯å¢ƒæ£€æµ‹"></a>äº”ã€è¡¥ç¯å¢ƒ VS ç¯å¢ƒæ£€æµ‹</h2><blockquote>
<p><strong>åç¯å¢ƒè„šæœ¬ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ol>
<li>å¯¹äºåˆå§‹åŒ–è¿‡çš„ navigatorã€document ç­‰æµè§ˆå™¨å¯¹è±¡ï¼Œè¡¥ç¯å¢ƒæ—¶ä¸éœ€è¦ var&#x2F;let é‡æ–°å£°æ˜ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨</li>
<li>åœ¨è‡ªæ‰§è¡Œå‡½æ•°ä¸­çš„è¡¥ç¯å¢ƒè„šæœ¬éœ€è¦è€ƒè™‘<strong>å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜çš„ä½œç”¨åŸŸè§„åˆ™</strong>ï¼Œæ–°ç‰ˆæœ¬çš„åç¯å¢ƒè„šæœ¬ä¸è¡¥ç¯å¢ƒåŒºåŸŸè„±ç¦»ï¼Œæ— éœ€è€ƒè™‘</li>
</ol>
<p><strong>ä¼˜åŒ–ç‰ˆä»£ç†å™¨ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/* ================================= è¡¥ç¯å¢ƒåŒºåŸŸ START ================================= */</span><br><span class="line">function getObjhandler(proxyName) &#123; return &#123; get(target, property, receiver) &#123; if (target[property] instanceof Object) &#123; console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`); return new Proxy(target[property], getObjhandler(`$&#123;proxyName&#125;.$&#123;String(property)&#125;`)) &#125; if (typeof property == &quot;symbol&quot;) &#123; console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;target[property]&#125;`); return Reflect.get(...arguments) &#125; console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`); try &#123; return Reflect.get(...arguments) &#125; catch (error) &#123; console.error(`ã€å¼‚å¸¸æ•è·ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;target[property]&#125;: \n$&#123;error.message&#125; --------`); if (property == &quot;userAgent&quot;) &#123; return &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36&quot; &#125; return target[property] &#125; &#125;, set(target, property, value, receiver) &#123; console.log(`ã€ set ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof value&#125; --&gt; $&#123;value&#125;`); return Reflect.set(...arguments) &#125;, has(target, propKey) &#123; console.log(`ã€ has ã€‘--&gt; [$&#123;String(propKey)&#125;] in [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.has(...arguments)&#125;`); return Reflect.has(...arguments) &#125;, deleteProperty(target, propKey) &#123; console.log(`ã€ deleteProperty ã€‘--&gt; delete [$&#123;String(propKey)&#125;] from [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.deleteProperty(...arguments)&#125;`); return Reflect.deleteProperty(...arguments) &#125;, getOwnPropertyDescriptor(target, propKey) &#123; console.log(`ã€ getOwnPropertyDescriptor ã€‘--&gt; ($&#123;proxyName&#125;, &quot;$&#123;String(propKey)&#125;&quot;) --&gt; $&#123;JSON.stringify(Reflect.getOwnPropertyDescriptor(...arguments))&#125;`); return Reflect.getOwnPropertyDescriptor(...arguments) &#125;, defineProperty(target, propKey, propDesc) &#123; console.log(`ã€ defineProperty ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(propKey)&#125; --&gt; $&#123;JSON.stringify(propDesc)&#125; --&gt; $&#123;Reflect.defineProperty(...arguments)&#125;`); return Reflect.defineProperty(...arguments) &#125;, preventExtensions(target) &#123; console.log(`ã€ preventExtensions ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.preventExtensions(...arguments)&#125;`); return Reflect.preventExtensions(...arguments) &#125;, isExtensible(target) &#123; console.log(`ã€ isExtensible ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.isExtensible(...arguments)&#125;`); return Reflect.isExtensible(...arguments) &#125;, getPrototypeOf(target) &#123; console.log(`ã€ getPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.getPrototypeOf(...arguments)&#125;`); return Reflect.getPrototypeOf(...arguments) &#125;, setPrototypeOf(target, proto) &#123; console.log(`ã€ setPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(proto)&#125; --&gt; $&#123;Reflect.setPrototypeOf(...arguments)&#125;`); return Reflect.setPrototypeOf(...arguments) &#125;, ownKeys(target) &#123; console.log(`ã€ ownKeys ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(Reflect.ownKeys(...arguments))&#125;`); return Reflect.ownKeys(...arguments) &#125;, apply(target, thisArg, args) &#123; console.log(`ã€ apply ã€‘--&gt; $&#123;proxyName&#125;($&#123;args&#125;) --&gt; $&#123;Reflect.apply(...arguments)&#125;`); return Reflect.apply(...arguments) &#125;, construct(target, args) &#123; console.log(`ã€ construct ã€‘--&gt; new Proxy($&#123;args&#125;) --&gt; $&#123;Reflect.construct(...arguments)&#125;`); return Reflect.construct(...arguments) &#125; &#125; &#125;</span><br><span class="line">// ------------------------------------ åˆå§‹åŒ–ç¯å¢ƒ -------------------------------------</span><br><span class="line">window = global;</span><br><span class="line">exports = undefined;</span><br><span class="line"></span><br><span class="line">// ------------------------------------ åˆå§‹åŒ–ä»£ç† -------------------------------------</span><br><span class="line">!(function getEnvironment(proxyArray) &#123;</span><br><span class="line">    proxyArray.forEach(proxyName =&gt; &#123;</span><br><span class="line">        globalThis[proxyName] = new Proxy(globalThis[proxyName] || &#123;&#125;, getObjhandler(proxyName))</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)([&#x27;window&#x27;, &#x27;document&#x27;, &#x27;location&#x27;, &#x27;navigator&#x27;, &#x27;history&#x27;, &#x27;screen&#x27;]);</span><br><span class="line">// window åœ¨ç»è¿‡ä»£ç†å™¨è®¾ç½®åï¼Œè½¬æ¢ä¸ºäº† Proxy å¯¹è±¡ï¼ŒObject.is(window, globalThis) æ£€æµ‹åˆ™ä¸º false</span><br><span class="line">globalThis = window;</span><br><span class="line">/* ================================== è¡¥ç¯å¢ƒåŒºåŸŸ END ================================== */</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">/* ================================= è¡¥ç¯å¢ƒåŒºåŸŸ START ================================= */</span><br><span class="line">window = global;</span><br><span class="line">exports = undefined;</span><br><span class="line">// ----------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">// ----------------------------------------------------------------------------------</span><br><span class="line">!(function getEnvironment(proxyArray) &#123;</span><br><span class="line">	function getObjhandler(proxyName) &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			get(target, property, receiver) &#123;</span><br><span class="line">				if (target[property] instanceof Object) &#123;</span><br><span class="line">					console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`);</span><br><span class="line">					return new Proxy(target[property], getObjhandler(`$&#123;proxyName&#125;.$&#123;String(property)&#125;`));</span><br><span class="line">				&#125;</span><br><span class="line">				if (typeof property == &#x27;symbol&#x27;) &#123;</span><br><span class="line">					console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;target[property]&#125;`);</span><br><span class="line">					return Reflect.get(...arguments);</span><br><span class="line">				&#125;</span><br><span class="line">				console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`);</span><br><span class="line">				try &#123;</span><br><span class="line">					return Reflect.get(...arguments);</span><br><span class="line">				&#125; catch (error) &#123;</span><br><span class="line">					console.error(`ã€å¼‚å¸¸æ•è·ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;target[property]&#125;: \n$&#123;error.message&#125; --------`);</span><br><span class="line">					if (property == &quot;userAgent&quot;) &#123;</span><br><span class="line">						return &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36&quot;</span><br><span class="line">					&#125;</span><br><span class="line">					// æ ¹æ®ä¸šåŠ¡é€»è¾‘è¿”å›é»˜è®¤å€¼æˆ–è¿›è¡Œå…¶ä»–å¤„ç†</span><br><span class="line">					return target[property];  // æˆ–è€…å…¶ä»–åˆé€‚çš„é»˜è®¤å€¼</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			set(target, property, value, receiver) &#123;</span><br><span class="line">				console.log(`ã€ set ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof value&#125; --&gt; $&#123;value&#125;`);</span><br><span class="line">				return Reflect.set(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			has(target, propKey) &#123;</span><br><span class="line">				console.log(`ã€ has ã€‘--&gt; [$&#123;String(propKey)&#125;] in [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.has(...arguments)&#125;`);</span><br><span class="line">				return Reflect.has(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			deleteProperty(target, propKey) &#123;</span><br><span class="line">				console.log(`ã€ deleteProperty ã€‘--&gt; delete [$&#123;String(propKey)&#125;] from [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.deleteProperty(...arguments)&#125;`);</span><br><span class="line">				return Reflect.deleteProperty(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			getOwnPropertyDescriptor(target, propKey) &#123;</span><br><span class="line">				console.log(`ã€ getOwnPropertyDescriptor ã€‘--&gt; ($&#123;proxyName&#125;, &quot;$&#123;String(propKey)&#125;&quot;) --&gt; $&#123;JSON.stringify(Reflect.getOwnPropertyDescriptor(...arguments))&#125;`);</span><br><span class="line">				return Reflect.getOwnPropertyDescriptor(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			defineProperty(target, propKey, propDesc) &#123;</span><br><span class="line">				console.log(`ã€ defineProperty ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(propKey)&#125; --&gt; $&#123;JSON.stringify(propDesc)&#125; --&gt; $&#123;Reflect.defineProperty(...arguments)&#125;`);</span><br><span class="line">				return Reflect.defineProperty(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			preventExtensions(target) &#123;</span><br><span class="line">				console.log(`ã€ preventExtensions ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.preventExtensions(...arguments)&#125;`);</span><br><span class="line">				return Reflect.preventExtensions(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			isExtensible(target) &#123;</span><br><span class="line">				console.log(`ã€ isExtensible ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.isExtensible(...arguments)&#125;`);</span><br><span class="line">				return Reflect.isExtensible(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			getPrototypeOf(target) &#123;</span><br><span class="line">				console.log(`ã€ getPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.getPrototypeOf(...arguments)&#125;`);</span><br><span class="line">				return Reflect.getPrototypeOf(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			setPrototypeOf(target, proto) &#123;</span><br><span class="line">				console.log(`ã€ setPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(proto)&#125; --&gt; $&#123;Reflect.setPrototypeOf(...arguments)&#125;`);</span><br><span class="line">				return Reflect.setPrototypeOf(...arguments);</span><br><span class="line">			&#125;,</span><br><span class="line">			ownKeys(target) &#123;</span><br><span class="line">				console.log(`ã€ ownKeys ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(Reflect.ownKeys(...arguments))&#125;`);</span><br><span class="line">				return Reflect.ownKeys(...arguments)</span><br><span class="line">			&#125;,</span><br><span class="line">			apply(target, thisArg, args) &#123;</span><br><span class="line">				console.log(`ã€ apply ã€‘--&gt; $&#123;proxyName&#125;($&#123;args&#125;) --&gt; $&#123;Reflect.apply(...arguments)&#125;`);</span><br><span class="line">				return Reflect.apply(...arguments)</span><br><span class="line">			&#125;,</span><br><span class="line">			construct(target, args) &#123;</span><br><span class="line">				console.log(`ã€ construct ã€‘--&gt; new Proxy($&#123;args&#125;) --&gt; $&#123;Reflect.construct(...arguments)&#125;`);</span><br><span class="line">				return Reflect.construct(...arguments)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	proxyArray.forEach(proxyName =&gt; &#123;</span><br><span class="line">		globalThis[proxyName] = new Proxy(globalThis[proxyName] || &#123;&#125;, getObjhandler(proxyName))</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;)([&#x27;window&#x27;, &#x27;document&#x27;, &#x27;location&#x27;, &#x27;navigator&#x27;, &#x27;history&#x27;, &#x27;screen&#x27;]);</span><br><span class="line">// window åœ¨ç»è¿‡ä»£ç†å™¨è®¾ç½®åï¼Œè½¬æ¢ä¸ºäº† Proxy å¯¹è±¡ï¼ŒObject.is(window, globalThis) æ£€æµ‹åˆ™ä¸º false</span><br><span class="line">globalThis = window;</span><br><span class="line">/* ================================== è¡¥ç¯å¢ƒåŒºåŸŸ END ================================== */</span><br></pre></td></tr></table></figure>

<h3 id="1-nvm-â€“-node-ç‰ˆæœ¬"><a href="#1-nvm-â€“-node-ç‰ˆæœ¬" class="headerlink" title="1. nvm â€“ node ç‰ˆæœ¬"></a>1. nvm â€“ node ç‰ˆæœ¬</h3><blockquote>
<p><strong>è¸©å‘ï¼šNode.js 21 ç‰ˆæœ¬ä»¥ä¸Šç¯å¢ƒä¸­è‡ªå¸¦ navigator å¯¹è±¡ï¼Œä¼šå¯¼è‡´è¡¥ç¯å¢ƒè¿‡ç¨‹ä¸­ä¸€äº›æ£€æµ‹ç‚¹è¢«å¿½ç•¥ï¼ˆä»£ç†å¯¹è±¡æ— æ³•æ­£å¸¸åç¯å¢ƒï¼‰</strong></p>
<p><strong>è§£å†³åŠæ³•ï¼ˆ<code>brew install nvm</code>ï¼‰ï¼š</strong></p>
<ol>
<li>å®‰è£…æŒ‡å®šçš„ 16.x ç‰ˆæœ¬ï¼š<code>nvm install 16.20.2</code></li>
<li>è®¾ç½®é»˜è®¤ç‰ˆæœ¬ï¼š<code>nvm alias default 16.20.2</code></li>
<li>éªŒè¯å½“å‰ç‰ˆæœ¬ï¼š<code>node -v</code></li>
</ol>
</blockquote>
<ul>
<li><p><strong>node ä¸­ nvm ä¸èƒ½ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>è®¾ç½® â€“&gt; Executor Map â€“&gt; ç¬¬ä¸€ä¸ª settings.json â€“&gt; which node â€“&gt; <code>*&quot;javascript&quot;*: &quot;path/node&quot;</code></li>
</ul>
</li>
<li><p><strong>æ£€æŸ¥ nvm å®‰è£…çš„å…¨å±€æ¨¡å—è·¯å¾„ï¼š</strong></p>
<ol>
<li>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ Node ç‰ˆæœ¬ï¼š<code>nvm current</code></li>
<li>æŸ¥çœ‹å…¨å±€æ¨¡å—å®‰è£…è·¯å¾„ï¼š<code>npm prefix -g</code></li>
<li>æŸ¥çœ‹å…¨å±€æ¨¡å—ç›®å½•ï¼š<code>ls $(npm prefix -g)/lib/node_modules</code></li>
</ol>
</li>
<li><p><strong>nvm å‘½ä»¤ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">nvm use &lt;version&gt;           ## åˆ‡æ¢ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬node</span><br><span class="line">nvm ls                      ## åˆ—å‡ºæ‰€æœ‰å®‰è£…çš„ç‰ˆæœ¬</span><br><span class="line">nvm current                 ## æ˜¾ç¤ºå½“å‰çš„ç‰ˆæœ¬</span><br><span class="line">nvm ls-remote --lts         ## æŸ¥çœ‹æ‰€æœ‰å¯ä»¥å®‰è£…çš„LTSç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰</span><br><span class="line">nvm alias default v6.9.0    ## è®¾å®šé»˜è®¤çš„nodeç‰ˆæœ¬</span><br><span class="line">nvm uninstall v9.5.0        ## åˆ é™¤æŒ‡å®šç‰ˆæœ¬çš„node ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">nvm install å‘½ä»¤ - å®‰è£…æŒ‡å®šç‰ˆæœ¬nodejs</span><br><span class="line">nvm install 14.5.0 // å®‰è£…14.5.0ç‰ˆæœ¬node</span><br><span class="line">nvm install latest // å®‰è£…æœ€æ–°ç‰ˆæœ¬node</span><br><span class="line"></span><br><span class="line">nvm use v12.19.1            ## ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬</span><br><span class="line">nvm alias default v14.15.1  ## è®¾ç½®é»˜è®¤ç‰ˆæœ¬</span><br><span class="line">nvm run v14.15.1 app.js     ## ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬è¿è¡Œè„šæœ¬</span><br><span class="line">nvm uninstall v14.15.1      ## å¸è½½æŒ‡å®šç‰ˆæœ¬</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p><strong>å•ç‹¬å®‰è£… nodeï¼ˆ<a class="link"   href="https://nodejs.org/zh-cn/download/package-manager"  target="_blank" rel="noopener">å®˜æ–¹ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">brew install node@18</span><br><span class="line">echo &#x27;export PATH=&quot;/opt/homebrew/opt/node@18/bin:$PATH&quot;&#x27; &gt;&gt; ~/.zshrc</span><br><span class="line">echo &#x27;export LDFLAGS=&quot;-L/opt/homebrew/opt/node@18/lib&quot;&#x27; &gt;&gt; ~/.zshrc</span><br><span class="line">echo &#x27;export CPPFLAGS=&quot;-I/opt/homebrew/opt/node@18/include&quot;&#x27; &gt;&gt; ~/.zshrc</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line"># è®¾ç½®æ·˜å®æºï¼ŒæŸ¥çœ‹æºï¼šnpm config get registry</span><br><span class="line">npm config set registry https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-Proxy-Reflect-ä»£ç†"><a href="#2-Proxy-Reflect-ä»£ç†" class="headerlink" title="2. Proxy|Reflect ä»£ç†"></a>2. Proxy|Reflect ä»£ç†</h3><blockquote>
<p><strong>Proxy</strong> æ˜¯ ES6 å¼•å…¥çš„ä¸€ç§å…ƒç¼–ç¨‹ç‰¹æ€§ï¼Œå®ƒå…è®¸é€šè¿‡ä»£ç†å¯¹è±¡<strong>æ‹¦æˆª</strong>å’Œè‡ªå®šä¹‰å¯¹åŸå¯¹è±¡çš„æ“ä½œè¡Œä¸ºï¼Œä¾‹å¦‚è¯»å†™å±æ€§ã€å‡½æ•°è°ƒç”¨ç­‰ï¼›å¯ä»¥åœ¨ä¸ç›´æ¥ä¿®æ”¹å¯¹è±¡çš„æƒ…å†µä¸‹â€æ‹¦æˆªâ€å¯¹å¯¹è±¡çš„æ“ä½œï¼Œå¹¶é€šè¿‡è‡ªå®šä¹‰è¡Œä¸ºæ¥å¤„ç†è¿™äº›æ“ä½œã€‚</p>
<p><strong>Reflect</strong> æ˜¯ ES6 å¼•å…¥çš„å¦ä¸€ä¸ªå·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ç»„æ–¹æ³•ï¼Œç”¨æ¥å¯¹ js å¯¹è±¡è¿›è¡Œé»˜è®¤çš„æ“ä½œã€‚å¯ä»¥è®¤ä¸º Reflect æä¾›äº†ä¸ Proxy æ•æ‰å™¨<strong>ç›¸å¯¹çš„</strong>â€œé»˜è®¤è¡Œä¸ºâ€ï¼Œåœ¨ Proxy æ•æ‰å™¨ä¸­ï¼Œå¸¸å¸¸ä¼šç»“åˆ Reflect æ¥è°ƒç”¨é»˜è®¤è¡Œä¸ºã€‚</p>
<p><strong>æ³¨æ„ï¼šProxy å®ä¾‹ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œå¯ä»¥æ‹¦æˆªåŸå‹é“¾çš„è®¿é—®ï¼Œå¹¶å¯¹åŸå‹é“¾ä¸Šå±æ€§è¿›è¡Œä¿®æ”¹</strong></p>
</blockquote>
<ul>
<li><strong>Proxy åŸºæœ¬è¯­æ³•ï¼š</strong><code>let proxy = new Proxy(target, handler);</code><ol>
<li>targetï¼šæƒ³è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰ï¼‰</li>
<li>handlerï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«è‹¥å¹²â€æ•æ‰å™¨â€å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥æ‹¦æˆªå¯¹ä»£ç†å¯¹è±¡çš„æ“ä½œ</li>
</ol>
</li>
<li><strong>Proxy æ”¯æŒçš„ 13 ç§æ‹¦æˆªæ“ä½œï¼š</strong><ol>
<li>**get(target, propKey, receiver)**ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚ proxy.foo å’Œ proxy[â€˜fooâ€™]</li>
<li>**set(target, propKey, value, receiver)**ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œå¦‚ proxy.foo&#x2F;[â€˜fooâ€™] &#x3D; vï¼Œè¿”å›å¸ƒå°”å€¼</li>
<li>has(target, propKey)ï¼šæ‹¦æˆª propKey in proxy çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>deleteProperty(target, propKey)ï¼šæ‹¦æˆª delete proxy[propKey] çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>ownKeys(target)ï¼šæ‹¦æˆª Object.getOwnPropertyNames(proxy)ã€Object.getOwnPropertySymbols(proxy)ã€Object.keys(proxy) å’Œ forâ€¦in å¾ªç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€Œ Object.keys() çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§</li>
<li>getOwnPropertyDescriptor(target, propKey)ï¼šæ‹¦æˆª Object.getOwnPropertyDescriptor(proxy, propKey)ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡</li>
<li>defineProperty(target, propKey, propDesc)ï¼šæ‹¦æˆª Object.defineProperty(proxy, propKey, propDesc) å’Œ Object.defineProperties(proxy, propDescs)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>preventExtensions(target)ï¼šæ‹¦æˆª Object.preventExtensions(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>getPrototypeOf(target)ï¼šæ‹¦æˆª Object.getPrototypeOf(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡</li>
<li>isExtensible(target)ï¼šæ‹¦æˆª Object.isExtensible(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>setPrototypeOf(target, proto)ï¼šæ‹¦æˆª Object.setPrototypeOf(proxy, proto)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>apply(target, object, args)ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚ proxy(â€¦args)ã€proxy.call(object, â€¦args) å’Œ proxy.apply(â€¦)</li>
<li>construct(target, args)ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚ new proxy(â€¦args)</li>
</ol>
</li>
<li><strong>Reflect é™æ€æ–¹æ³•ï¼š</strong><ul>
<li>Reflect.get(target, name, receiver)ï¼šæŸ¥æ‰¾å¹¶è¿”å› target å¯¹è±¡çš„ name å±æ€§ï¼Œreceiver ç»‘å®š this</li>
<li>Reflect.set(target, name, value, receiver)ï¼šè®¾ç½® target å¯¹è±¡çš„ name å±æ€§ç­‰äº value</li>
<li>Reflect.has(obj, name)ï¼šä½œç”¨å¯¹åº” python çš„ in è¿ç®—ç¬¦</li>
<li>Reflect.deleteProperty(obj, name)ï¼šæ–¹æ³•ç­‰åŒäº delete obj[name]ï¼Œç”¨äºåˆ é™¤å¯¹è±¡çš„å±æ€§</li>
<li>Reflect.construct(target, args)ï¼šç­‰åŒäº new target(â€¦args)ï¼Œè°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•</li>
<li>Reflect.getPrototypeOf(obj)ï¼šè¯»å–å¯¹è±¡çš„ __proto__ å±æ€§ï¼Œå¯¹åº” Object.getPrototypeOf</li>
<li>Reflect.setPrototypeOf(obj, newProto)ï¼šè®¾ç½®ç›®æ ‡å¯¹è±¡çš„åŸå‹ï¼Œå¯¹åº” Object.setPrototypeOf</li>
<li>Reflect.apply(func, thisArg, args)ï¼šç­‰åŒäº Function.prototype.apply.call(func, thisArg, args)</li>
<li>Reflect.defineProperty(target, propertyKey, attributes)ï¼šç­‰åŒäº Object.defineProperty</li>
<li>Reflect.getOwnPropertyDescriptor(target, propertyKey)ï¼šç­‰åŒäº Object.getOwnPropertyDescriptor</li>
<li>Reflect.isExtensible(target)ï¼šå¯¹åº” Object.isExtensible è¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯å¦å¯æ‰©å±•</li>
<li>Reflect.preventExtensions(target)ï¼šå¯¹åº” Object.preventExtensions è®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸å¯æ‰©å±•ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«æ ‡è®°ä¸ºä¸å¯æ‰©å±•åï¼Œä½ ä¸èƒ½å†å‘è¿™ä¸ªå¯¹è±¡ä¸­æ·»åŠ æ–°çš„å±æ€§ï¼Œä½†ä»ç„¶å¯ä»¥ä¿®æ”¹æˆ–åˆ é™¤ç°æœ‰çš„å±æ€§</li>
<li>Reflect.ownKeys(target)ï¼šè¿”å›å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå¯ä»¥è¿”å› Symbol ç±»å‹</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">!(function getEnvironment(proxyArray) &#123;</span><br><span class="line">    window = global;</span><br><span class="line">    exports = undefined;</span><br><span class="line">    // ============ è„šæœ¬ä»…è¡¥äº†å¤§è‡´ç¯å¢ƒï¼Œéœ€è¦åœ¨æ­¤å¤„è¡¥å…¶ä½™ç¼ºå¤±ç¯å¢ƒ ============</span><br><span class="line"></span><br><span class="line">    window.aaa = function () &#123; &#125;</span><br><span class="line"></span><br><span class="line">    function getObjhandler(proxyName) &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            get(target, property, receiver) &#123;</span><br><span class="line">                if (target[property] instanceof Object) &#123;</span><br><span class="line">                    console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`);</span><br><span class="line">                    return new Proxy(target[property], getObjhandler(`$&#123;proxyName&#125;.$&#123;String(property)&#125;`))</span><br><span class="line">                &#125;</span><br><span class="line">                console.log(`ã€ get ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof target[property]&#125;`);</span><br><span class="line">                return Reflect.get(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            set(target, property, value, receiver) &#123;</span><br><span class="line">                console.log(`ã€ set ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(property)&#125; --&gt; $&#123;typeof value&#125; --&gt; $&#123;value&#125;`);</span><br><span class="line">                return Reflect.set(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            has(target, propKey) &#123;</span><br><span class="line">                console.log(`ã€ has ã€‘--&gt; [$&#123;String(propKey)&#125;] in [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.has(...arguments)&#125;`);</span><br><span class="line">                return Reflect.has(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            deleteProperty(target, propKey) &#123;</span><br><span class="line">                console.log(`ã€ deleteProperty ã€‘--&gt; delete [$&#123;String(propKey)&#125;] from [$&#123;proxyName&#125;] --&gt; $&#123;Reflect.deleteProperty(...arguments)&#125;`);</span><br><span class="line">                return Reflect.deleteProperty(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            getOwnPropertyDescriptor(target, propKey) &#123;</span><br><span class="line">                console.log(`ã€ getOwnPropertyDescriptor ã€‘--&gt; ($&#123;proxyName&#125;, &quot;$&#123;String(propKey)&#125;&quot;) --&gt; $&#123;JSON.stringify(Reflect.getOwnPropertyDescriptor(...arguments))&#125;`);</span><br><span class="line">                return Reflect.getOwnPropertyDescriptor(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            defineProperty(target, propKey, propDesc) &#123;</span><br><span class="line">                console.log(`ã€ defineProperty ã€‘--&gt; $&#123;proxyName&#125;.$&#123;String(propKey)&#125; --&gt; $&#123;JSON.stringify(propDesc)&#125; --&gt; $&#123;Reflect.defineProperty(...arguments)&#125;`);</span><br><span class="line">                return Reflect.defineProperty(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            preventExtensions(target) &#123;</span><br><span class="line">                console.log(`ã€ preventExtensions ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.preventExtensions(...arguments)&#125;`);</span><br><span class="line">                return Reflect.preventExtensions(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            isExtensible(target) &#123;</span><br><span class="line">                console.log(`ã€ isExtensible ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;Reflect.isExtensible(...arguments)&#125;`);</span><br><span class="line">                return Reflect.isExtensible(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            getPrototypeOf(target) &#123;</span><br><span class="line">                console.log(`ã€ getPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(Reflect.getPrototypeOf(...arguments))&#125;`);</span><br><span class="line">                return Reflect.getPrototypeOf(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            setPrototypeOf(target, proto) &#123;</span><br><span class="line">                console.log(`ã€ setPrototypeOf ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(proto)&#125; --&gt; $&#123;Reflect.setPrototypeOf(...arguments)&#125;`);</span><br><span class="line">                return Reflect.setPrototypeOf(...arguments);</span><br><span class="line">            &#125;,</span><br><span class="line">            ownKeys(target) &#123;</span><br><span class="line">                console.log(`ã€ ownKeys ã€‘--&gt; $&#123;proxyName&#125; --&gt; $&#123;JSON.stringify(Reflect.ownKeys(...arguments))&#125;`);</span><br><span class="line">                return Reflect.ownKeys(...arguments)</span><br><span class="line">            &#125;,</span><br><span class="line">            apply(target, thisArg, args) &#123;</span><br><span class="line">                console.log(`ã€ apply ã€‘--&gt; $&#123;proxyName&#125;($&#123;args&#125;) --&gt; $&#123;Reflect.apply(...arguments)&#125;`);</span><br><span class="line">                return Reflect.apply(...arguments)</span><br><span class="line">            &#125;,</span><br><span class="line">            construct(target, args) &#123;</span><br><span class="line">                console.log(`ã€ construct ã€‘--&gt; new Proxy($&#123;args&#125;) --&gt; $&#123;Reflect.construct(...arguments)&#125;`);</span><br><span class="line">                return Reflect.construct(...arguments)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (var i = 0; i &lt; proxyArray.length; i++) &#123;</span><br><span class="line">        var proxyName = proxyArray[i];</span><br><span class="line">        global[proxyName] = new Proxy(global[proxyName] || &#123;&#125;, getObjhandler(proxyName));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)([&#x27;window&#x27;, &#x27;document&#x27;, &#x27;location&#x27;, &#x27;navigator&#x27;, &#x27;history&#x27;, &#x27;screen&#x27;]);</span><br><span class="line"></span><br><span class="line">window.aaa.bbb = 666</span><br><span class="line">window.aaa.ccc = 123</span><br><span class="line">&#x27;bbb&#x27; in window.aaa</span><br><span class="line">delete window.aaa.bbb</span><br><span class="line">Object.getOwnPropertyDescriptor(window.aaa, &#x27;ccc&#x27;)</span><br><span class="line">Object.defineProperty(window, &#x27;bbb&#x27;, &#123;</span><br><span class="line">    value: 123,</span><br><span class="line">    writable: true</span><br><span class="line">&#125;)</span><br><span class="line">// Object.preventExtensions(window)</span><br><span class="line">Object.isExtensible(window)</span><br><span class="line">Object.getPrototypeOf(window)</span><br><span class="line">Object.setPrototypeOf(window, &#123;gpt: &#x27;chatgpt&#x27;&#125;)</span><br><span class="line">window.gpt</span><br><span class="line"></span><br><span class="line">window.aaa(1)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ã€ get ã€‘--&gt; window.aaa --&gt; function</span><br><span class="line">ã€ set ã€‘--&gt; window.aaa.bbb --&gt; number --&gt; 666</span><br><span class="line">ã€ getOwnPropertyDescriptor ã€‘--&gt; (window.aaa, &quot;bbb&quot;) --&gt; undefined</span><br><span class="line">ã€ defineProperty ã€‘--&gt; window.aaa.bbb --&gt; &#123;&quot;value&quot;:666,&quot;writable&quot;:true,&quot;enumerable&quot;:true,&quot;configurable&quot;:true&#125; --&gt; true</span><br><span class="line">ã€ get ã€‘--&gt; window.aaa --&gt; function</span><br><span class="line">ã€ set ã€‘--&gt; window.aaa.ccc --&gt; number --&gt; 123</span><br><span class="line">ã€ getOwnPropertyDescriptor ã€‘--&gt; (window.aaa, &quot;ccc&quot;) --&gt; undefined</span><br><span class="line">ã€ defineProperty ã€‘--&gt; window.aaa.ccc --&gt; &#123;&quot;value&quot;:123,&quot;writable&quot;:true,&quot;enumerable&quot;:true,&quot;configurable&quot;:true&#125; --&gt; true</span><br><span class="line">ã€ get ã€‘--&gt; window.aaa --&gt; function</span><br><span class="line">ã€ has ã€‘--&gt; [bbb] in [window.aaa] --&gt; true</span><br><span class="line">ã€ get ã€‘--&gt; window.aaa --&gt; function</span><br><span class="line">ã€ deleteProperty ã€‘--&gt; delete [bbb] from [window.aaa] --&gt; true</span><br><span class="line">ã€ get ã€‘--&gt; window.aaa --&gt; function</span><br><span class="line">ã€ getOwnPropertyDescriptor ã€‘--&gt; (window.aaa, &quot;ccc&quot;) --&gt; &#123;&quot;value&quot;:123,&quot;writable&quot;:true,&quot;enumerable&quot;:true,&quot;configurable&quot;:true&#125;</span><br><span class="line">ã€ defineProperty ã€‘--&gt; window.bbb --&gt; &#123;&quot;value&quot;:123,&quot;writable&quot;:true&#125; --&gt; true</span><br><span class="line">ã€ isExtensible ã€‘--&gt; window --&gt; true</span><br><span class="line">ã€ getPrototypeOf ã€‘--&gt; window --&gt; &#123;&#125;</span><br><span class="line">ã€ setPrototypeOf ã€‘--&gt; window --&gt; &#123;&quot;gpt&quot;:&quot;chatgpt&quot;&#125; --&gt; true</span><br><span class="line">ã€ get ã€‘--&gt; window.gpt --&gt; string</span><br><span class="line">ã€ get ã€‘--&gt; window.aaa --&gt; function</span><br><span class="line">ã€ apply ã€‘--&gt; window.aaa(1) --&gt; undefined</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<h3 id="3-è¡¥ç¯å¢ƒæ€è·¯"><a href="#3-è¡¥ç¯å¢ƒæ€è·¯" class="headerlink" title="3. è¡¥ç¯å¢ƒæ€è·¯"></a>3. è¡¥ç¯å¢ƒæ€è·¯</h3><ul>
<li><strong>é€šè¿‡ Object.getPrototypeOf æ–¹æ³•æ£€æµ‹åŸå‹çš„è¡¥æ³•ï¼š</strong><ol>
<li>é¦–å…ˆç¡®è®¤æµè§ˆå™¨ä¸­ï¼Œå½“å‰å¯¹è±¡çš„åŸå‹ç±»å‹ï¼Œ<code>typeof HTMLDocument</code> æ¥ç¡®å®šè¡¥åŸå‹å¯¹è±¡çš„ç±»å‹</li>
<li>è§‚å¯Ÿè¡¥å‡ºæ¥çš„å¯¹è±¡çš„åŸå‹é“¾æ˜¯å¦å’Œæµè§ˆå™¨ä¸­å½“å‰å¯¹è±¡çš„åŸå‹é“¾ä¸€è‡´</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Document() &#123; &#125;</span><br><span class="line">Document.prototype[Symbol.toStringTag] = &quot;Document&quot;;</span><br><span class="line"></span><br><span class="line">function HTMLDocument() &#123; &#125;</span><br><span class="line">HTMLDocument.prototype[Symbol.toStringTag] = &quot;HTMLDocument&quot;;</span><br><span class="line"></span><br><span class="line">// å°† Document ä½œä¸º HTMLDocument çš„åŸå‹</span><br><span class="line">Object.setPrototypeOf(HTMLDocument.prototype, Document.prototype);</span><br><span class="line"></span><br><span class="line">// åˆ›å»º document å¯¹è±¡ï¼Œå¹¶è®¾ç½®å®ƒçš„åŸå‹ä¸º HTMLDocument.prototype</span><br><span class="line">const document = Object.setPrototypeOf(&#123;&#125;, HTMLDocument.prototype);</span><br><span class="line"></span><br><span class="line">// æµ‹è¯•åŸå‹é“¾</span><br><span class="line">console.log(Object.prototype.toString.call(document)); // [object HTMLDocument]</span><br><span class="line">console.log(Object.getPrototypeOf(document)); // HTMLDocument &#123; [Symbol(Symbol.toStringTag)]: &#x27;HTMLDocument&#x27; &#125;</span><br><span class="line">console.log(Object.getPrototypeOf(Object.getPrototypeOf(document))); // Document &#123; [Symbol(Symbol.toStringTag)]: &#x27;Document&#x27; &#125;</span><br><span class="line">console.log(Object.getPrototypeOf(document) instanceof Document); // true</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>è¡¥ç¯å¢ƒæŠ€å·§ï¼š</strong></p>
<ol>
<li><p>é‡åˆ°ç¨‹åºå¡æ­»ä¸åŠ¨æ—¶ï¼Œå¯ä»¥ç›´æ¥æš‚åœ debug è°ƒè¯•ï¼Œå³å¯æ–­ç‚¹è‡³å¯¹åº”å¡æ­»çš„ç¨‹åºä»£ç </p>
</li>
<li><p>ç¨‹åºä¸­å­˜åœ¨ eval æ‰§è¡Œçš„ä¸€æ®µä»£ç ï¼Œå¯æ‰“æ–­ç‚¹è‡³å…¶è°ƒç”¨å¤„ï¼Œå•æ­¥è°ƒè¯•èµ°è¿›è¢«æ‰§è¡Œä»£ç ï¼›å¦‚æœä»£ç æ˜¯è¢«å‹ç¼©è¿‡çš„ï¼Œä¸æ–¹ä¾¿è°ƒè¯•ï¼Œå¯ä»¥å°†ä»£ç æŠ å‡ºæ¥æ ¼å¼åŒ–åï¼Œæ›¿æ¢è¢«æ‰§è¡Œä»£ç è¿›è¡Œè°ƒè¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line">const data = fs.readFileSync(&#x27;/Users/xfblog/Desktop/xxx.js&#x27;, &#x27;utf8&#x27;);</span><br><span class="line"></span><br><span class="line">eval(t1000Source) --&gt; eval(data)</span><br></pre></td></tr></table></figure>
</li>
<li><p>pycharm æ‰§è¡Œ js æ–‡ä»¶æœ‰å¼‚å¸¸æ–­ç‚¹ï¼Œå¯ä»¥é€šè¿‡è°ƒè¯•è‡ªåŠ¨åœ¨ try ä¸­çš„å¼‚å¸¸å¤„æ–­ä¸‹æ–­ç‚¹ï¼Œé¿å…é”™è¿‡ç¯å¢ƒç›‘æµ‹</p>
</li>
<li><p><strong>åœ¨ç¯å¢ƒéƒ½è¡¥å®Œäº†ï¼Œå´å‘ç°è¿˜æ˜¯éæ­£å¸¸è¾“å‡ºï¼Œåˆ™éœ€è¿›ä¸€æ­¥è§‚å¯Ÿå…·ä½“ä»£ç ï¼Œæ˜¯å¦æœ‰ç¯å¢ƒç¼ºæ¼ï¼Œä¾‹å¦‚ <code>typeof</code> æ£€æµ‹å¯¹è±¡æ˜¯ä¸æŠ¥é”™çš„</strong></p>
</li>
</ol>
</li>
<li><p><strong>åç¯å¢ƒå¼‚å¸¸è§£å†³æ€è·¯ï¼š</strong></p>
<ol>
<li><p><strong>æ— æ³•åœ¨ä¸€ä¸ªæœªå®šä¹‰çš„å¯¹è±¡ä¸Šè®¾ç½®&#x2F;è¯»å–å±æ€§ï¼š</strong>æ˜¯å› ä¸ºå…¶è°ƒç”¨çš„å¯¹è±¡ä¸º undefinedï¼Œæ‰€ä»¥åº”è¯¥è¡¥å…¶è°ƒç”¨çš„å¯¹è±¡ç¯å¢ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TypeError: Cannot read properties of undefined (reading &#x27;indexOf&#x27;)</span><br><span class="line">TypeError: Cannot set properties of undefined (setting &#x27;bbb&#x27;)</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="4-æµè§ˆå™¨å¤åˆ¶å¯¹è±¡"><a href="#4-æµè§ˆå™¨å¤åˆ¶å¯¹è±¡" class="headerlink" title="4. æµè§ˆå™¨å¤åˆ¶å¯¹è±¡"></a>4. æµè§ˆå™¨å¤åˆ¶å¯¹è±¡</h3><blockquote>
<p><strong>åŸç†ï¼š</strong>forâ€¦in å¾ªç¯çš„ç‰¹ç‚¹æ˜¯å¯ä»¥éå†ä¸€ä¸ªå¯¹è±¡çš„<strong>æ‰€æœ‰å¯æšä¸¾å±æ€§</strong>ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº«çš„å±æ€§ä»¥åŠä»åŸå‹é“¾ä¸­<strong>ç»§æ‰¿çš„å±æ€§</strong></p>
</blockquote>
<ul>
<li>åœ¨å½“å‰æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œæ‰“å¼€æ§åˆ¶å°æ‰§è¡Œè„šæœ¬ï¼Œå¹¶å³é”®å¤åˆ¶ object</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let myobj = &#123;&#125;;</span><br><span class="line">for (let key in navigator) &#123;</span><br><span class="line">    // åªå­˜å‚¨è‡ªèº«å±æ€§åˆ° obj</span><br><span class="line">    // if (!myobj.hasOwnProperty(key)) &#123;</span><br><span class="line">    //     continue;</span><br><span class="line">    // &#125;</span><br><span class="line">    let value = navigator[key];</span><br><span class="line">    myobj[key] = value;</span><br><span class="line">&#125;</span><br><span class="line">console.log(myobj);</span><br></pre></td></tr></table></figure>

<h3 id="5-æµè§ˆå™¨å†…å­˜æ¼«æ¸¸å®šä½"><a href="#5-æµè§ˆå™¨å†…å­˜æ¼«æ¸¸å®šä½" class="headerlink" title="5. æµè§ˆå™¨å†…å­˜æ¼«æ¸¸å®šä½"></a>5. æµè§ˆå™¨å†…å­˜æ¼«æ¸¸å®šä½</h3><blockquote>
<p><strong>Github æºç åœ°å€ï¼š</strong><a class="link"   href="https://github.com/JSREI/ast-hook-for-js-RE"  target="_blank" rel="noopener">aHR0cHM6Ly9naXRodWIuY29tL0pTUkVJL2FzdC1ob29rLWZvci1qcy1SRQ&#x3D;&#x3D;<i class="fas fa-external-link-alt"></i></a></p>
<p><strong>å¿«é€Ÿå¯åŠ¨ï¼š</strong></p>
<ol>
<li><code>npx node src/proxy-server/proxy-server.js</code></li>
<li><code>npx node src/api-server/api-server.js</code></li>
</ol>
</blockquote>
<ul>
<li><strong>é¡¹ç›®å®‰è£…ï¼š</strong><ol>
<li><code>git clone git@github.com:JSREI/ast-hook-for-js-RE.git</code></li>
<li><code>cd ast-hook-for-js-RE</code></li>
<li><code>npm install</code></li>
<li>å®‰è£…å¼‚å¸¸ï¼š<code>rm -rf node_modules</code>ã€<code>npm cache verify</code>ã€<code>npm cache clean --force</code></li>
</ol>
</li>
<li><strong>é¡¹ç›®å¯åŠ¨ï¼š</strong><ol>
<li><code>npx anyproxy ca</code></li>
<li>æµè§ˆå™¨æ‰“å¼€ <code>http://127.0.0.1:8002/</code>ï¼ŒRootCA ä¸‹è½½æ ¹è¯ä¹¦</li>
<li>åŒå‡»è¯ä¹¦å®‰è£…åˆ°<strong>ç³»ç»Ÿ</strong>ï¼Œæ˜¾ç¤ºç®€ä»‹å°†å…¶è®¾ç½®ä¸º<strong>ä¿¡ä»»</strong>è¯ä¹¦</li>
<li>åœ¨é¡¹ç›®è·¯å¾„ä¸‹ï¼Œå¼€å¯ä»£ç†æœåŠ¡ <code>npx node src/proxy-server/proxy-server.js</code></li>
<li>äº§ç”Ÿäº†ç¼“å­˜æ–‡ä»¶å¤¹ <code>js-file-cache</code></li>
<li><strong>æµè§ˆå™¨è¿›è¡Œä»£ç†ï¼ˆProxy SwitchyOmegaï¼‰ï¼š</strong>æ·»åŠ  127.0.0.1:10086 ä»£ç†</li>
</ol>
</li>
</ul>
<h3 id="6-EventTarget-API"><a href="#6-EventTarget-API" class="headerlink" title="6. EventTarget API"></a>6. EventTarget API</h3><blockquote>
<p> <strong>EventTargetï¼š</strong>æ˜¯ä¸€ä¸ª Web APIï¼Œå‡ ä¹æ‰€æœ‰ DOM å…ƒç´ ï¼ˆä¾‹ div æˆ– buttonï¼‰éƒ½ç»§æ‰¿è‡ªå®ƒã€‚é€šè¿‡æ„é€ å‡½æ•° EventTarget()ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ EventTarget å¯¹è±¡å®ä¾‹ï¼Œå³ä¸€ä¸ªæ²¡æœ‰ UI è¡¨ç°çš„è‡ªå®šä¹‰å¯¹è±¡ï¼Œç”¨äºå¤„ç†å’Œè§¦å‘äº‹ä»¶å’Œè‡ªå®šä¹‰äº‹ä»¶</p>
</blockquote>
<ul>
<li><p><strong>åŸå‹æ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>EventTarget.addEventListenerï¼š</strong>æ³¨å†Œäº‹ä»¶ï¼Œåœ¨ EventTarget å¯¹è±¡ä¸Šæ³¨å†Œç‰¹å®šäº‹ä»¶ç±»å‹çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå³äº‹ä»¶å¤„ç†å‡½æ•°</li>
<li><strong>EventTarget.removeEventListenerï¼š</strong>æ³¨é”€äº‹ä»¶ï¼Œä» EventTarget å¯¹è±¡ä¸­ç§»é™¤æŒ‡å®šçš„äº‹ä»¶ç›‘å¬å™¨</li>
<li><strong>EventTarget.dispatchEventï¼š</strong>è§¦å‘äº‹ä»¶ï¼Œå°† Event äº‹ä»¶åˆ†æ´¾åˆ°æ­¤ EventTarget å®ä¾‹ä¸Šï¼Œè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦æˆåŠŸè§¦å‘äº†äº‹ä»¶</li>
</ol>
</li>
<li><p><strong>ç®€å•å®ç°ï¼š</strong></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">EventTarget</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">listeners</span> = &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventTarget</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">listeners</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">EventTarget</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">addEventListener</span> = <span class="keyword">function</span> (<span class="params">type, callback</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (!(type <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">listeners</span>)) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">listeners</span>[type] = [];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">listeners</span>[type].<span class="title function_">push</span>(callback);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventTarget</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">removeEventListener</span> = <span class="keyword">function</span> (<span class="params">type, callback</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (!(type <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">listeners</span>)) &#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> stack = <span class="variable language_">this</span>.<span class="property">listeners</span>[type];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = stack.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (stack[i] === callback) &#123;</span><br><span class="line">			stack.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">removeEventListener</span>(type, callback);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventTarget</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dispatchEvent</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (!(event.<span class="property">type</span> <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">listeners</span>)) &#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> stack = <span class="variable language_">this</span>.<span class="property">listeners</span>[event.<span class="property">type</span>];</span><br><span class="line">	event.<span class="property">target</span> = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = stack.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">		stack[i].<span class="title function_">call</span>(<span class="variable language_">this</span>, event);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€Canvas-ä¸éªŒè¯ç ä¸“é¢˜"><a href="#å…­ã€Canvas-ä¸éªŒè¯ç ä¸“é¢˜" class="headerlink" title="å…­ã€Canvas ä¸éªŒè¯ç ä¸“é¢˜"></a>å…­ã€Canvas ä¸éªŒè¯ç ä¸“é¢˜</h2><blockquote>
<p><strong>é€†å‘æŠ€å·§ï¼š</strong>äº‹ä»¶ç›‘å¬æ–­ç‚¹ â€“&gt; canvas ç”»å¸ƒ</p>
</blockquote>
<h3 id="1-canvas-ç»˜å›¾æ“ä½œ"><a href="#1-canvas-ç»˜å›¾æ“ä½œ" class="headerlink" title="1. canvas ç»˜å›¾æ“ä½œ"></a>1. canvas ç»˜å›¾æ“ä½œ</h3><ul>
<li>åœ¨ HTML ä¸­ä½¿ç”¨ canvas æ ‡ç­¾ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªå®½500åƒç´ ã€é«˜400åƒç´ çš„ç”»å¸ƒï¼Œå¹¶åŠ ä¸Šé»‘è‰²è¾¹æ¡†</span><br><span class="line">&lt;canvas id=&quot;myCanvas&quot; width=&quot;500&quot; height=&quot;400&quot; style=&quot;border:1px solid #000;&quot;&gt;&lt;/canvas&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>js è·å– canvas ä¸Šä¸‹æ–‡ï¼Œè¿›è¡Œç»˜å›¾æ“ä½œï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">const canvas = document.getElementById(&#x27;myCanvas&#x27;);</span><br><span class="line">const ctx = canvas.getContext(&#x27;2d&#x27;); // è·å–2Dä¸Šä¸‹æ–‡ï¼Œcanvas æœ‰ä¸¤ç§ä¸Šä¸‹æ–‡ç±»å‹ï¼š2d å’Œ webglï¼ˆ3Dç»˜å›¾ï¼‰</span><br><span class="line"></span><br><span class="line">1. å¡«å……çŸ©å½¢ï¼ˆfillRectï¼‰ï¼šfillRect(x, y, width, height) è¡¨ç¤ºåœ¨æŒ‡å®šä½ç½®ç»˜åˆ¶ä¸€ä¸ªå¡«å……çš„çŸ©å½¢</span><br><span class="line">ctx.fillStyle = &#x27;blue&#x27;; // è®¾ç½®å¡«å……é¢œè‰²</span><br><span class="line">ctx.fillRect(50, 50, 100, 100); // åœ¨(50, 50)ä½ç½®ç»˜åˆ¶100x100çš„çŸ©å½¢</span><br><span class="line"></span><br><span class="line">2. ç»˜åˆ¶çŸ©å½¢è¾¹æ¡†ï¼ˆstrokeRectï¼‰</span><br><span class="line">ctx.strokeStyle = &#x27;red&#x27;; // è®¾ç½®è¾¹æ¡†é¢œè‰²</span><br><span class="line">ctx.lineWidth = 5; // è®¾ç½®è¾¹æ¡†å®½åº¦</span><br><span class="line">ctx.strokeRect(200, 50, 100, 100); // åœ¨(200, 50)ä½ç½®ç»˜åˆ¶çŸ©å½¢è¾¹æ¡†</span><br><span class="line"></span><br><span class="line">3. æ¸…é™¤åŒºåŸŸï¼ˆclearRectï¼‰</span><br><span class="line">ctx.clearRect(0, 0, canvas.width, canvas.height); // æ¸…ç©ºæ•´ä¸ªç”»å¸ƒ</span><br><span class="line"></span><br><span class="line">4. ç»˜åˆ¶è·¯å¾„ï¼ˆbeginPathã€moveToã€lineToã€strokeï¼‰</span><br><span class="line">ctx.beginPath(); // å¼€å§‹æ–°è·¯å¾„</span><br><span class="line">ctx.moveTo(50, 150); // ç§»åŠ¨åˆ°(50, 150)</span><br><span class="line">ctx.lineTo(200, 150); // ç”»ä¸€æ¡çº¿åˆ°(200, 150)</span><br><span class="line">ctx.lineTo(125, 250); // å†ç”»ä¸€æ¡çº¿åˆ°(125, 250)</span><br><span class="line">ctx.closePath(); // é—­åˆè·¯å¾„</span><br><span class="line">ctx.stroke(); // ç»˜åˆ¶è·¯å¾„</span><br><span class="line"></span><br><span class="line">5. ç»˜åˆ¶åœ†å½¢æˆ–å¼§çº¿ï¼ˆarcï¼‰ï¼šarc(x, y, radius, startAngle, endAngle, anticlockwise) æ–¹æ³•ç”¨äºç»˜åˆ¶å¼§çº¿æˆ–åœ†å½¢</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.arc(150, 150, 75, 0, Math.PI * 2, false); // ç»˜åˆ¶åœ†å½¢</span><br><span class="line">ctx.fillStyle = &#x27;green&#x27;;</span><br><span class="line">ctx.fill(); // å¡«å……åœ†å½¢</span><br><span class="line"></span><br><span class="line">6. ç»˜åˆ¶æ–‡æœ¬ï¼ˆfillTextã€strokeTextï¼‰</span><br><span class="line">ctx.font = &#x27;30px Arial&#x27;; // è®¾ç½®å­—ä½“</span><br><span class="line">ctx.fillStyle = &#x27;black&#x27;;</span><br><span class="line">ctx.fillText(&#x27;Hello Canvas&#x27;, 50, 300); // å¡«å……æ–‡æœ¬</span><br><span class="line"></span><br><span class="line">7. æ·»åŠ å›¾ç‰‡ï¼ˆdrawImageï¼‰</span><br><span class="line">const img = new Image();</span><br><span class="line">img.src = &#x27;https://example.com/image.jpg&#x27;;</span><br><span class="line">img.onload = () =&gt; &#123;</span><br><span class="line">  ctx.drawImage(img, 0, 0, 300, 200); // åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å›¾ç‰‡</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>åŠ¨ç”»æ•ˆæœï¼š</strong>é€šè¿‡ä¸æ–­æ¸…é™¤ç”»å¸ƒå’Œé‡ç»˜ï¼Œå¯ä»¥å®ç°åŠ¨ç”»æ•ˆæœ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let x = 0;</span><br><span class="line">function animate() &#123;</span><br><span class="line">  ctx.clearRect(0, 0, canvas.width, canvas.height); // æ¸…é™¤ç”»å¸ƒ</span><br><span class="line">  ctx.fillRect(x, 100, 50, 50); // ç»˜åˆ¶çŸ©å½¢</span><br><span class="line">  x += 2; // æ›´æ–°xåæ ‡</span><br><span class="line">  if (x &gt; canvas.width) x = 0; // é‡ç½®ä½ç½®</span><br><span class="line">  requestAnimationFrame(animate); // å¾ªç¯è°ƒç”¨åŠ¨ç”»</span><br><span class="line">&#125;</span><br><span class="line">animate(); // å¯åŠ¨åŠ¨ç”»</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>äº‹ä»¶äº¤äº’ï¼š</strong>å¯ä»¥ç»™Canvasç»‘å®šäº‹ä»¶ï¼Œæ¯”å¦‚é¼ æ ‡ç‚¹å‡»</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">canvas.addEventListener(&#x27;click&#x27;, (event) =&gt; &#123;</span><br><span class="line">  const rect = canvas.getBoundingClientRect(); // è·å–ç”»å¸ƒçš„ä½ç½®</span><br><span class="line">  const x = event.clientX - rect.left;</span><br><span class="line">  const y = event.clientY - rect.top;</span><br><span class="line">  console.log(`ç‚¹å‡»ä½ç½®: ($&#123;x&#125;, $&#123;y&#125;)`);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-hook-canvas-è¿˜åŸæ–¹æ³•"><a href="#2-hook-canvas-è¿˜åŸæ–¹æ³•" class="headerlink" title="2. hook canvas è¿˜åŸæ–¹æ³•"></a>2. hook canvas è¿˜åŸæ–¹æ³•</h3><blockquote>
<p>åœ¨ js éªŒè¯ç é€†å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é€†å‘çš„ç¬¬ä¸€æ­¥æŒ‘æˆ˜é€šå¸¸æ˜¯å›¾ç‰‡è¢«åˆ‡å‰²æˆå¤šä¸ª<strong>ä¹±åºå—</strong>ï¼Œéœ€è¦å°†è¿™äº›å°å—æŒ‰æ­£ç¡®é¡ºåºæ‹¼æ¥æˆåŸå›¾ï¼ˆé€†å‘ï¼‰</p>
<p><strong>è¿˜åŸæ€è·¯ï¼š</strong>éªŒè¯ç é€šå¸¸å°†ä¸€å¼ å›¾ç‰‡åˆ‡å‰²ä¸ºè‹¥å¹²å—ï¼Œå¹¶æ‰“ä¹±é¡ºåºç»„æˆä¸€å¼ æ–°çš„å›¾ç‰‡ã€‚ä¹±åºå›¾ç‰‡å—é€šå¸¸ä¼šä»¥æ•°ç»„æˆ–å…ƒç´ åˆ—è¡¨çš„å½¢å¼ç»™å‡ºï¼Œé€šè¿‡ hook å…¶è¿˜åŸå‡½æ•°ï¼ˆå¯¹åº” canvas ä¸­çš„ drawImageã€putImageData å‡½æ•°ï¼‰ï¼Œé€†å‘åˆ†æè¿˜åŸé€»è¾‘å®Œæˆä¹±åºå›¾ç‰‡ç»˜åˆ¶è¿˜åŸ</p>
</blockquote>
<ul>
<li><strong>drawIamgeï¼š</strong>æ˜¯ç”¨äºå°†å›¾ç‰‡ï¼ˆæˆ–è§†é¢‘å¸§ï¼‰ç»˜åˆ¶åˆ° Canvas ä¸Šçš„é‡è¦æ–¹æ³•ï¼Œæ”¯æŒ<strong>ç¼©æ”¾ã€è£å‰ªå’Œä½ç§»</strong><ul>
<li><code>c.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);</code></li>
<li>imageï¼šè¦ç»˜åˆ¶çš„å›¾åƒå¯¹è±¡</li>
<li>sx, syï¼šæºå›¾åƒçš„è£å‰ªèµ·å§‹ä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼‰</li>
<li>sWidth, sHeightï¼šè£å‰ªåŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦</li>
<li>dx, dyï¼šç›®æ ‡ç”»å¸ƒä¸Šçš„ç»˜åˆ¶ä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼‰</li>
<li>dWidth, dHeightï¼šç»˜åˆ¶åˆ°ç›®æ ‡ç”»å¸ƒä¸Šçš„å°ºå¯¸</li>
</ul>
</li>
<li><strong>putImageDataï¼š</strong>ç”¨äºå°†åƒç´ æ•°æ®å†™å…¥ Canvas çš„æŒ‡å®šä½ç½®ï¼Œé€‚åˆè¿›è¡Œ<strong>å›¾åƒå¤„ç†å’Œåƒç´ çº§æ“ä½œ</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// é€šè¿‡æ‰“å°å°±å¯ä»¥çŸ¥é“å½“å‰ä¸»è¦é€šè¿‡ canvas çš„ä»€ä¹ˆå‡½æ•°è¿›è¡Œè¿˜åŸçš„ï¼Œç¡®å®šåå† hook + debugger è°ƒè¯•</span><br><span class="line">// åŠ«æŒ drawImage æ–¹æ³•</span><br><span class="line">let _drawImage = CanvasRenderingContext2D.prototype.drawImage;</span><br><span class="line">CanvasRenderingContext2D.prototype.drawImage = function (...args) &#123;</span><br><span class="line">    console.log(&quot;ã€ drawImage ã€‘--&gt;&quot;, args);</span><br><span class="line">    // debugger;</span><br><span class="line">    return _drawImage.apply(this, args);</span><br><span class="line">&#125;;</span><br><span class="line">// åŠ«æŒ putImageData æ–¹æ³•</span><br><span class="line">let _putImageData = CanvasRenderingContext2D.prototype.putImageData;</span><br><span class="line">CanvasRenderingContext2D.prototype.putImageData = function (...args) &#123;</span><br><span class="line">    console.log(&quot;ã€ putImageData ã€‘--&gt;&quot;, args);</span><br><span class="line">    // debugger;</span><br><span class="line">    return _putImageData.apply(this, args);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-éªŒè¯ç åº•å›¾ä¹±åºè¿˜åŸ"><a href="#3-éªŒè¯ç åº•å›¾ä¹±åºè¿˜åŸ" class="headerlink" title="3. éªŒè¯ç åº•å›¾ä¹±åºè¿˜åŸ"></a>3. éªŒè¯ç åº•å›¾ä¹±åºè¿˜åŸ</h3><blockquote>
<p><strong>å¸¸è§éªŒè¯ç å¹³å°ï¼š</strong></p>
<ul>
<li>ç½‘æ˜“æ˜“ç›¾ï¼ˆyidunï¼ŒèƒŒæ™¯å¸¦ç¼ºå£+ç¼ºå£ï¼‰ï¼š<a class="link"   href="https://dun.163.com/trial/jigsaw"  target="_blank" rel="noopener">03fff674e9e95e3ac8bfe84466f24c6c<i class="fas fa-external-link-alt"></i></a></li>
<li>é¡¶è±¡ï¼ˆdxï¼Œcanvasï¼ŒèƒŒæ™¯å¸¦ç¼ºå£+ç¼ºå£ï¼‰ï¼š<a class="link"   href="https://www.dingxiang-inc.com/business/captcha"  target="_blank" rel="noopener">ef51a97e8dfa006dbca1825bae38cf48<i class="fas fa-external-link-alt"></i></a></li>
<li>å°ç›¾å®‰å…¨ï¼ŒåŒç›¾ï¼ˆtdï¼Œcanvasï¼ŒèƒŒæ™¯å¸¦ç¼ºå£+ç¼ºå£ï¼‰ï¼š<a class="link"   href="https://xiaodun.com/onlineExperience/slidingPuzzle"  target="_blank" rel="noopener">ad4cc66dab6d1618e3ed703379ce2d0b<i class="fas fa-external-link-alt"></i></a></li>
<li>æ•°ç¾ï¼ˆshumeiï¼ŒèƒŒæ™¯å¸¦ç¼ºå£+ç¼ºå£ï¼‰ï¼š<a class="link"   href="https://www.ishumei.com/new/product/tw/code"  target="_blank" rel="noopener">70dba825d22eeeb5cec343ec195067e4<i class="fas fa-external-link-alt"></i></a></li>
<li>æéªŒï¼ˆgeetestï¼Œcanvasï¼ŒèƒŒæ™¯å¸¦ç¼ºå£+ç¼ºå£+å®Œæ•´èƒŒæ™¯ï¼‰ï¼š<a class="link"   href="https://www.geetest.com/show"  target="_blank" rel="noopener">3281b0760f9fc3cee6e0e2d0a87d5034<i class="fas fa-external-link-alt"></i></a></li>
<li>VAPTCHAï¼ˆvpï¼Œcanvasï¼Œç”»è½¨è¿¹ï¼‰ï¼š<a class="link"   href="https://www.vaptcha.com/?lang=cn&from=0#demo"  target="_blank" rel="noopener">a9e9cdc19da9fd4ba57abecae8ffaced<i class="fas fa-external-link-alt"></i></a></li>
<li>è…¾è®¯ï¼ˆtcï¼ŒèƒŒæ™¯å¸¦ç¼ºå£+ç¼ºå£ï¼‰ï¼š<a class="link"   href="https://admin.xiaoe-tech.com/t/login?reg_source=0101&src_page=A#/acount"  target="_blank" rel="noopener">b7d893c351d69c0da5a545cbff1d5520<i class="fas fa-external-link-alt"></i></a></li>
<li>è°·æ­Œï¼ˆhcaptchaï¼Œ9å›¾æ‰¾å®ç‰©ï¼‰ï¼š<a class="link"   href="https://www.google.com/recaptcha/api2/demo"  target="_blank" rel="noopener">e497cdff45d62c05b741c80b38584632<i class="fas fa-external-link-alt"></i></a>ï¼Œ<a class="link"   href="https://www.yescaptcha.com/auth/register"  target="_blank" rel="noopener">å®šåˆ¶è§£å†³æ–¹æ¡ˆ<i class="fas fa-external-link-alt"></i></a></li>
</ul>
</blockquote>
<ul>
<li><strong>å…·ä½“è¿˜åŸæ€è·¯ï¼š</strong><ol>
<li>é€šè¿‡ hook canvas å®šä½ä¹±åºå›¾ç‰‡è¿˜åŸé€»è¾‘ï¼Œä¸»è¦é€†å‘è¿˜åŸé€»è¾‘ä¸­å¾ªç¯å¯¹å›¾ç‰‡è¿›è¡Œæ­£ç¡®é¡ºåºç»˜åˆ¶çš„æ•°ç»„çš„ç”Ÿæˆ</li>
</ol>
</li>
<li><strong>è¿˜åŸä»£ç é€»è¾‘ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">import execjs</span><br><span class="line">import math</span><br><span class="line">from PIL import Image</span><br><span class="line"></span><br><span class="line">def draw_image(canvas, source_img, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight):</span><br><span class="line">    &quot;&quot;&quot;æ¨¡æ‹ŸJSä¸­çš„ c.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</span><br><span class="line">    :param canvas: åœ¨å¾ªç¯å¼€å§‹ä¹‹å‰åˆ›å»ºä¸€ä¸ªç©ºçš„ canvasï¼Œä»¥ä¾¿æ‰€æœ‰å—éƒ½åœ¨åŒä¸€ä¸ªç”»å¸ƒä¸Šç»˜åˆ¶</span><br><span class="line">    :param source_img: ä¼ å…¥æºå›¾ç‰‡å¯¹è±¡ï¼Œé¿å…åœ¨æ¯æ¬¡å¾ªç¯ä¸­é‡æ–°åŠ è½½å›¾ç‰‡ï¼Œæå‡æ•ˆç‡</span><br><span class="line">    :param sx, sy: æºå›¾åƒçš„è£å‰ªèµ·å§‹ä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼‰</span><br><span class="line">    :param sWidth, sHeight: è£å‰ªåŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦</span><br><span class="line">    :param dx, dy: ç›®æ ‡ç”»å¸ƒä¸Šçš„ç»˜åˆ¶ä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼‰</span><br><span class="line">    :param dWidth, dHeight: ç»˜åˆ¶åˆ°ç›®æ ‡ç”»å¸ƒä¸Šçš„å°ºå¯¸</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # è£å‰ªå‡ºæŒ‡å®šåŒºåŸŸ (sx, sy, sx + sWidth, sy + sHeight)</span><br><span class="line">    cropped_img = source_img.crop((sx, sy, sx + sWidth, sy + sHeight))</span><br><span class="line">    # ç¼©æ”¾è£å‰ªåçš„å›¾åƒåˆ°æŒ‡å®šå°ºå¯¸</span><br><span class="line">    resized_img = cropped_img.resize((dWidth, dHeight))</span><br><span class="line">    # åœ¨ç›®æ ‡ç”»å¸ƒä¸Šç²˜è´´ç¼©æ”¾åçš„å›¾åƒ</span><br><span class="line">    canvas.paste(resized_img, (dx, dy))</span><br><span class="line"></span><br><span class="line"># å‡è®¾çš„è¾“å…¥æ•°æ®</span><br><span class="line">input_image_path = &#x27;./6dfe1f16aa0c4f32be0072c5ca0d2f02.webp&#x27;  # ä¹±çš„å›¾ç‰‡è·¯å¾„</span><br><span class="line"></span><br><span class="line"># åŠ è½½åŸå§‹å›¾ç‰‡</span><br><span class="line">image = Image.open(input_image_path)</span><br><span class="line">img_width, img_height = image.size  # è·å–å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºç›®æ ‡ç”»å¸ƒï¼Œå¤§å°ä¸åŸå§‹å›¾ç‰‡ç›¸åŒ</span><br><span class="line">canvas = Image.new(&#x27;RGBA&#x27;, (img_width, img_height))</span><br><span class="line"></span><br><span class="line"># ---------------- é€†å‘é€»è¾‘ï¼šæ¨¡æ‹Ÿ t æ•°ç»„å’Œä¹±åºé€»è¾‘ ----------------</span><br><span class="line">arr = execjs.compile(open(&#x27;./get_canvas.js&#x27;).read()).call(&#x27;f1&#x27;, &#x27;6dfe1f16aa0c4f32be0072c5ca0d2f02&#x27;)</span><br><span class="line">s = math.floor(400 / len(arr))</span><br><span class="line"></span><br><span class="line">def drow_image(n, r):</span><br><span class="line">    t = n * s</span><br><span class="line">    i = s</span><br><span class="line">    draw_image(canvas, image, t, 0, i, img_height, r * s, 0, i, img_height)</span><br><span class="line"></span><br><span class="line"># éå† arr æ•°ç»„ï¼Œå¹¶åœ¨åŒä¸€ä¸ªç”»å¸ƒä¸Šç»˜åˆ¶æ‰€æœ‰å—</span><br><span class="line">for index, item in enumerate(arr):</span><br><span class="line">    drow_image(item, index)</span><br><span class="line"></span><br><span class="line"># æœ€ç»ˆä¿å­˜ç»“æœ</span><br><span class="line">canvas.save(&#x27;./restored-image.png&#x27;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ç½‘é¡µæ‰‹åŠ¨æå–å›¾ç‰‡æ•°æ®ï¼š</strong><ol>
<li>åˆ†æéªŒè¯ç æ—¶ï¼Œå‘ç°å…¶æ˜¯é€šè¿‡ Canvas ç”»å¸ƒç”Ÿæˆçš„ï¼Œä¸”æ²¡æœ‰æä¾› API æ¥å£å¯ä»¥è·å–å›¾ç‰‡</li>
<li>é€šè¿‡ <code>document.querySelector(&#39;&#39;).toDataURL()</code> å°† Canvas å†…å®¹è½¬æ¢ä¸ºåŒ…å«å›¾åƒæ•°æ®çš„ Data URL</li>
<li>é€šè¿‡ä½¿ç”¨ base64 å’Œ PIL åº“æ¥å¤„ç†åŒ…å«åœ¨ Data URL ä¸­çš„å›¾åƒæ•°æ®ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import base64, io</span><br><span class="line">from PIL import Image  # pip install pillow</span><br><span class="line"></span><br><span class="line">bg = &#x27;data:image/png;base64,......JRU5ErkJggg==&#x27;</span><br><span class="line"></span><br><span class="line">images = bg.split(&#x27;,&#x27;)[1]</span><br><span class="line">images = base64.b64decode(images)  # å°†base64ç¼–ç çš„å›¾åƒæ•°æ®è§£ç ä¸ºäºŒè¿›åˆ¶æ•°æ®</span><br><span class="line">images = Image.open(io.BytesIO(images))  # å°†äºŒè¿›åˆ¶æ•°æ®åŒ…è£…ä¸ºä¸€ä¸ªç±»æ–‡ä»¶å¯¹è±¡</span><br><span class="line">images.save(&#x27;bg.png&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="4-ä¸‡èƒ½-canvas-åº•å›¾è¿˜åŸ"><a href="#4-ä¸‡èƒ½-canvas-åº•å›¾è¿˜åŸ" class="headerlink" title="4. ä¸‡èƒ½ canvas åº•å›¾è¿˜åŸ"></a>4. ä¸‡èƒ½ canvas åº•å›¾è¿˜åŸ</h3><blockquote>
<p><strong>å®‰è£… <a class="link"   href="https://github.com/Automattic/node-canvas"  target="_blank" rel="noopener">node-canvas<i class="fas fa-external-link-alt"></i></a> åº“ï¼š</strong></p>
<ol>
<li><code>brew install pkg-config cairo pango libpng jpeg giflib librsvg pixman python-setuptools</code></li>
<li><code>export SDKROOT=$(xcrun --show-sdk-path)</code></li>
<li><code>npm install canvas</code>ï¼ˆé¡¹ç›®é‡Œå®‰è£…ï¼‰</li>
</ol>
</blockquote>
<ul>
<li><strong>Hook æ­¥éª¤ï¼š</strong><ol>
<li>é€šè¿‡å¿«é€Ÿæ‰¹é‡ hook æ¡†æ¶ï¼Œç›´æ¥ hook CanvasRenderingContext2D åŸå‹ä¸Šæ‰€æœ‰æ–¹æ³•ï¼Œæ ¹æ®æ—¥å¿—è¿›è¡Œæ–­ç‚¹è·Ÿæ ˆ</li>
<li>æ‰£éªŒè¯ç çš„ä¸»ä½“ js è¿˜åŸéƒ¨åˆ†ï¼Œç›´æ¥åˆ©ç”¨ js ä¸­çš„ canvas åº“è¿›è¡Œè¿˜åŸ</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const &#123; createCanvas, Image &#125; = require(&#x27;canvas&#x27;);</span><br><span class="line">var CryptoJS = require(&quot;crypto-js&quot;);</span><br><span class="line"></span><br><span class="line">const canvas = createCanvas(400, 200);</span><br><span class="line">const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line"></span><br><span class="line">// Draw cat with lime helmet</span><br><span class="line">function main() &#123;</span><br><span class="line">    let image = new Image()</span><br><span class="line">    image.src = &quot;data:image/png;base64,xxxxxx...&quot;</span><br><span class="line"></span><br><span class="line">    // ä¸»ä½“è¿˜åŸé€»è¾‘</span><br><span class="line">    ctx.drawImage(image, 50, 0, 70, 70)</span><br><span class="line"></span><br><span class="line">    return canvas.toDataURL()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-æ»‘åŠ¨è·ç¦»-distance-è¯†åˆ«"><a href="#5-æ»‘åŠ¨è·ç¦»-distance-è¯†åˆ«" class="headerlink" title="5. æ»‘åŠ¨è·ç¦» distance è¯†åˆ«"></a>5. æ»‘åŠ¨è·ç¦» distance è¯†åˆ«</h3><ul>
<li><strong>è®¡ç®—æ–¹æ³•ï¼š</strong><ol>
<li><strong>GitHub åŸºäºäººå·¥æ™ºèƒ½çš„æ·±åº¦ç½‘ç»œè®­ç»ƒæ¨¡å‹ ddddocr å¼€æºåº“ï¼š</strong><a class="link"   href="https://github.com/sml2h3/ddddocr"  target="_blank" rel="noopener">f70901e4adbfaa715cd0753e2adf6bea<i class="fas fa-external-link-alt"></i></a></li>
<li><strong>ç¬¬ä¸‰æ–¹æ‰“ç å¹³å°ï¼ˆ<a class="link"   href="https://www.jfbym.com/demo.html"  target="_blank" rel="noopener">äº‘ç <i class="fas fa-external-link-alt"></i></a>ï¼‰ï¼š</strong>é€šè¿‡å®Œæ•´å›¾ç‰‡ä¸ç¼ºå¤±æ»‘å—çš„å›¾ç‰‡è¿›è¡Œåƒç´ å¯¹æ¯”ï¼ˆå›¾ç‰‡ â€“&gt; çŸ©é˜µ â€“&gt; åƒç´ ç‚¹ï¼‰</li>
<li><strong>è¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼š</strong>OpenCV è¯†åˆ«æ»‘åŠ¨è·ç¦»</li>
</ol>
</li>
<li><strong>è¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">from PIL import Image</span><br><span class="line">from pathlib import Path</span><br><span class="line"></span><br><span class="line">def imshow(img, winname=&#x27;test&#x27;, delay=0):</span><br><span class="line">    &quot;&quot;&quot;ä½¿ç”¨OpenCVæ˜¾ç¤ºå›¾ç‰‡&quot;&quot;&quot;</span><br><span class="line">    cv2.imshow(winname, img)</span><br><span class="line">    cv2.waitKey(delay)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">def cv2_open(img, flag=None):</span><br><span class="line">    &quot;&quot;&quot;å°†ä¸åŒç±»å‹çš„å›¾ç‰‡ç»Ÿä¸€è½¬æ¢ä¸ºOpenCVæ ¼å¼&quot;&quot;&quot;</span><br><span class="line">    if isinstance(img, bytes):</span><br><span class="line">        img = cv2.imdecode(np.frombuffer(img, dtype=np.uint8), 1)</span><br><span class="line">    elif isinstance(img, (str, Path)):</span><br><span class="line">        img = cv2.imread(str(img))</span><br><span class="line">    elif isinstance(img, np.ndarray):</span><br><span class="line">        img = img</span><br><span class="line">    elif isinstance(img, Image.Image):</span><br><span class="line">        img = cv2.cvtColor(np.asarray(img), cv2.COLOR_RGB2BGR)</span><br><span class="line">    else:</span><br><span class="line">        raise ValueError(f&#x27;æ— æ³•è§£æçš„å›¾ç‰‡ç±»å‹: &#123;type(img)&#125;&#x27;)</span><br><span class="line">    if flag is not None:</span><br><span class="line">        img = cv2.cvtColor(img, flag)</span><br><span class="line">    return img</span><br><span class="line"></span><br><span class="line">def get_distance(bg_img, slice_img):</span><br><span class="line">    &quot;&quot;&quot;æ ¸å¿ƒé€»è¾‘ï¼Œå®ŒæˆèƒŒæ™¯å›¾ä¸æ»‘å—ä¹‹é—´çš„åŒ¹é…è®¡ç®—&quot;&quot;&quot;</span><br><span class="line">    # è¯»å–ä¸¤å¼ å›¾ç‰‡ï¼Œåœ¨è¯»å–å›¾åƒçš„åŒæ—¶è¿›è¡Œç°åº¦è½¬æ¢</span><br><span class="line">    tp_gray = cv2_open(slice_img, flag=cv2.COLOR_BGR2GRAY)</span><br><span class="line">    bg_gray = cv2_open(bg_img, flag=cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    # å¯¹èƒŒæ™¯å›¾è¿›è¡Œéå±€éƒ¨å‡å€¼å»å™ªï¼Œèƒ½å¤ŸåŒæ—¶ä¿ç•™è¾¹ç¼˜å’Œç»†èŠ‚</span><br><span class="line">    bg_shift = cv2.fastNlMeansDenoising(bg_gray, None, h=10, templateWindowSize=7, searchWindowSize=21)</span><br><span class="line">    # è¾¹ç¼˜æ£€æµ‹</span><br><span class="line">    tp_gray = cv2.Canny(tp_gray, 255, 255)</span><br><span class="line">    bg_gray = cv2.Canny(bg_shift, 255, 255)</span><br><span class="line"></span><br><span class="line">    # æ¨¡æ¿åŒ¹é…</span><br><span class="line">    result = cv2.matchTemplate(bg_gray, tp_gray, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(result)  # è§£æåŒ¹é…ç»“æœ</span><br><span class="line">    # if save_path or im_show:</span><br><span class="line">    #     # éœ€è¦ç»˜åˆ¶çš„æ–¹æ¡†é«˜åº¦å’Œå®½åº¦</span><br><span class="line">    #     tp_height, tp_width = tp_gray.shape[:2]</span><br><span class="line">    #     # çŸ©å½¢å·¦ä¸Šè§’ç‚¹ä½ç½®</span><br><span class="line">    #     x, y = max_loc</span><br><span class="line">    #     # çŸ©å½¢å³ä¸‹è§’ç‚¹ä½ç½®</span><br><span class="line">    #     _x, _y = x + tp_width, y + tp_height</span><br><span class="line">    #     # ç»˜åˆ¶çŸ©å½¢</span><br><span class="line">    #     bg_img = cv2_open(bg_img)</span><br><span class="line">    #     cv2.rectangle(bg_img, (x, y), (_x, _y), (0, 0, 255), 2)</span><br><span class="line">    #     # ä¿å­˜ç¼ºå£è¯†åˆ«ç»“æœåˆ°èƒŒæ™¯å›¾</span><br><span class="line">    #     if save_path:</span><br><span class="line">    #         save_path = Path(save_path).resolve()</span><br><span class="line">    #         save_path = save_path.parent / f&quot;&#123;save_path.stem&#125;&#123;save_path.suffix&#125;&quot;</span><br><span class="line">    #         save_path = save_path.__str__()</span><br><span class="line">    #         cv2.imwrite(save_path, bg_img)</span><br><span class="line">    #     # æ˜¾ç¤ºç¼ºå£è¯†åˆ«ç»“æœ</span><br><span class="line">    #     if im_show:</span><br><span class="line">    #         imshow(bg_img)</span><br><span class="line">    return max_loc[0]</span><br><span class="line"></span><br><span class="line">with open(&quot;./bg_img.png&quot;, &quot;rb&quot;) as f:</span><br><span class="line">    bg_img = f.read()</span><br><span class="line">with open(&quot;./slider_img.webp&quot;, &quot;rb&quot;) as f:</span><br><span class="line">    slice_img = f.read()</span><br><span class="line">distance = get_distance(bg_img, slice_img)</span><br><span class="line">print(distance)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>è¾¹ç¼˜æ£€æµ‹ç®—æ³•è¯¦è§£ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">from PIL import Image</span><br><span class="line">from pathlib import Path</span><br><span class="line"></span><br><span class="line">def imshow(img, winname=&#x27;test&#x27;, delay=0):</span><br><span class="line">    &quot;&quot;&quot;ä½¿ç”¨OpenCVæ˜¾ç¤ºå›¾ç‰‡&quot;&quot;&quot;</span><br><span class="line">    cv2.imshow(winname, img)</span><br><span class="line">    cv2.waitKey(delay)  # ç­‰å¾…æŒ‰é”®</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">def pil_to_cv2(img):</span><br><span class="line">    &quot;&quot;&quot;PILå›¾åƒè½¬ä¸ºOpenCVæ ¼å¼&quot;&quot;&quot;</span><br><span class="line">    img = cv2.cvtColor(np.asarray(img), cv2.COLOR_RGB2BGR)</span><br><span class="line">    return img</span><br><span class="line"></span><br><span class="line">def bytes_to_cv2(img):</span><br><span class="line">    &quot;&quot;&quot;å°†äºŒè¿›åˆ¶å›¾ç‰‡è½¬æ¢ä¸ºOpenCVæ ¼å¼&quot;&quot;&quot;</span><br><span class="line">    img_buffer_np = np.frombuffer(img, dtype=np.uint8)</span><br><span class="line">    img_np = cv2.imdecode(img_buffer_np, 1)</span><br><span class="line">    return img_np</span><br><span class="line"></span><br><span class="line">def cv2_open(img, flag=None):</span><br><span class="line">    &quot;&quot;&quot;å°†ä¸åŒç±»å‹çš„å›¾ç‰‡ç»Ÿä¸€è½¬æ¢ä¸ºOpenCVæ ¼å¼&quot;&quot;&quot;</span><br><span class="line">    if isinstance(img, bytes):</span><br><span class="line">        img = bytes_to_cv2(img)</span><br><span class="line">    elif isinstance(img, (str, Path)):</span><br><span class="line">        img = cv2.imread(str(img))</span><br><span class="line">    elif isinstance(img, np.ndarray):</span><br><span class="line">        img = img</span><br><span class="line">    elif isinstance(img, Image.Image):</span><br><span class="line">        img = pil_to_cv2(img)</span><br><span class="line">    else:</span><br><span class="line">        raise ValueError(f&#x27;æ— æ³•è§£æçš„å›¾ç‰‡ç±»å‹: &#123;type(img)&#125;&#x27;)</span><br><span class="line">    if flag is not None:</span><br><span class="line">        img = cv2.cvtColor(img, flag)</span><br><span class="line">    return img</span><br><span class="line"></span><br><span class="line"># ç¬¬ä¸€æ­¥ï¼šè¯»å–å›¾ç‰‡å¹¶å±•ç¤ºåŸå›¾</span><br><span class="line">with open(&quot;./DXCaptcha_20241028/bg_img.png&quot;, &quot;rb&quot;) as f:</span><br><span class="line">    bg_img = f.read()</span><br><span class="line">with open(&quot;./DXCaptcha_20241028/slider_img.webp&quot;, &quot;rb&quot;) as f:</span><br><span class="line">    slice_img = f.read()</span><br><span class="line"></span><br><span class="line">bg = cv2_open(bg_img)</span><br><span class="line">tp = cv2_open(slice_img)</span><br><span class="line"></span><br><span class="line"># å±•ç¤ºèƒŒæ™¯å›¾å’Œæ»‘å—å›¾</span><br><span class="line">print(&quot;å±•ç¤ºåŸå§‹èƒŒæ™¯å›¾ï¼š&quot;)</span><br><span class="line">imshow(bg, &#x27;Background&#x27;)</span><br><span class="line">print(&quot;å±•ç¤ºåŸå§‹æ»‘å—å›¾ï¼š&quot;)</span><br><span class="line">imshow(tp, &#x27;Slider&#x27;)</span><br><span class="line"></span><br><span class="line"># ç¬¬äºŒæ­¥ï¼šå°†ä¸¤å¼ å›¾ç‰‡éƒ½è½¬ä¸ºç°åº¦å›¾</span><br><span class="line">tp_gray = cv2.cvtColor(tp, cv2.COLOR_BGR2GRAY)</span><br><span class="line">bg_gray = cv2.cvtColor(bg, cv2.COLOR_BGR2GRAY)</span><br><span class="line"># å±•ç¤ºç°åº¦åŒ–åçš„å›¾ç‰‡</span><br><span class="line">print(&quot;å±•ç¤ºç°åº¦æ»‘å—å›¾ï¼š&quot;)</span><br><span class="line">imshow(tp_gray, &#x27;Gray Slider&#x27;)  # å±•ç¤ºç°åº¦æ»‘å—</span><br><span class="line">imshow(bg_gray, &#x27;Gray Background&#x27;)  # å±•ç¤ºç°åº¦èƒŒæ™¯</span><br><span class="line"></span><br><span class="line"># ç¬¬ä¸‰æ­¥ï¼šå¯¹èƒŒæ™¯ç°åº¦å›¾è¿›è¡Œéå±€éƒ¨å‡å€¼å»å™ªï¼Œèƒ½å¤ŸåŒæ—¶ä¿ç•™è¾¹ç¼˜å’Œç»†èŠ‚</span><br><span class="line">bg_shift = cv2.fastNlMeansDenoising(bg_gray, None, h=10, templateWindowSize=7, searchWindowSize=21)</span><br><span class="line"># å¯¹èƒŒæ™¯å›¾è¿›è¡Œé‡‘å­—å¡”å‡å€¼æ¼‚ç§»æ»¤æ³¢å¤„ç†</span><br><span class="line"># bg_shift = cv2.pyrMeanShiftFiltering(bg_img, 5, 50)</span><br><span class="line"># å¯¹èƒŒæ™¯å›¾è¿›è¡Œé«˜æ–¯æ»¤æ³¢å¤„ç†</span><br><span class="line"># bg_shift = cv2.GaussianBlur(bg_img, (5, 5), 0)</span><br><span class="line">print(&quot;å±•ç¤ºæ»¤æ³¢åçš„èƒŒæ™¯å›¾ï¼š&quot;)</span><br><span class="line">imshow(bg_shift, &#x27;Filtered Background&#x27;)</span><br><span class="line"></span><br><span class="line">def trackbar(x):</span><br><span class="line">    &quot;&quot;&quot;ä½¿ç”¨ OpenCV åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œå¹¶åœ¨è¯¥çª—å£ä¸­æ·»åŠ ä¸¤ä¸ªæ»‘åŠ¨æ¡ï¼ˆtrackbarsï¼‰ï¼Œç”¨äºè°ƒæ•´ Canny è¾¹ç¼˜æ£€æµ‹ç®—æ³•çš„é˜ˆå€¼&quot;&quot;&quot;</span><br><span class="line">    test1 = cv2.getTrackbarPos(&quot;test1&quot;, &quot;cannyTest&quot;)</span><br><span class="line">    test2 = cv2.getTrackbarPos(&quot;test2&quot;, &quot;cannyTest&quot;)</span><br><span class="line">    canny_img1 = cv2.Canny(tp_gray, test1, test2)</span><br><span class="line">    canny_img2 = cv2.Canny(bg_shift, test1, test2)</span><br><span class="line">    cv2.imshow(&quot;canny_img1&quot;, canny_img1)</span><br><span class="line">    cv2.imshow(&quot;canny_img2&quot;, canny_img2)</span><br><span class="line"></span><br><span class="line">cv2.namedWindow(&#x27;cannyTest&#x27;)</span><br><span class="line">cv2.createTrackbar(&quot;test1&quot;, &quot;cannyTest&quot;, 0, 255, trackbar)</span><br><span class="line">cv2.createTrackbar(&quot;test2&quot;, &quot;cannyTest&quot;, 0, 255, trackbar)</span><br><span class="line"></span><br><span class="line"># ç¬¬å››æ­¥ï¼šå¯¹æ»¤æ³¢åçš„èƒŒæ™¯å›¾å’Œæ»‘å—è¿›è¡Œè¾¹ç¼˜æ£€æµ‹å¹¶å±•ç¤º</span><br><span class="line">tp_edge = cv2.Canny(tp_gray, 255, 255)</span><br><span class="line">bg_edge = cv2.Canny(bg_shift, 255, 255)</span><br><span class="line">print(&quot;å±•ç¤ºæ»‘å—è¾¹ç¼˜æ£€æµ‹ç»“æœï¼š&quot;)</span><br><span class="line">imshow(tp_edge, &#x27;Slider Edge&#x27;)</span><br><span class="line">print(&quot;å±•ç¤ºèƒŒæ™¯å›¾è¾¹ç¼˜æ£€æµ‹ç»“æœï¼š&quot;)</span><br><span class="line">imshow(bg_edge, &#x27;Background Edge&#x27;)</span><br><span class="line"></span><br><span class="line"># ç¬¬äº”æ­¥ï¼šä½¿ç”¨æ¨¡æ¿åŒ¹é…ï¼Œå¹¶å±•ç¤ºåŒ¹é…ç»“æœ</span><br><span class="line">result = cv2.matchTemplate(bg_edge, tp_edge, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(result)</span><br><span class="line"></span><br><span class="line"># æ ‡å‡ºåŒ¹é…ä½ç½®</span><br><span class="line">x, y = max_loc</span><br><span class="line">tp_height, tp_width = tp_gray.shape[:2]</span><br><span class="line">cv2.rectangle(bg, (x, y), (x + tp_width, y + tp_height), (0, 0, 255), 2)</span><br><span class="line"></span><br><span class="line">print(f&quot;åŒ¹é…åˆ°çš„ä½ç½®ï¼šx=&#123;x&#125;, y=&#123;y&#125;&quot;)</span><br><span class="line">print(&quot;å±•ç¤ºåŒ¹é…åçš„èƒŒæ™¯å›¾ï¼š&quot;)</span><br><span class="line">imshow(bg, &#x27;Matched Background&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="6-é¼ æ ‡è½¨è¿¹-track-ç”Ÿæˆ"><a href="#6-é¼ æ ‡è½¨è¿¹-track-ç”Ÿæˆ" class="headerlink" title="6. é¼ æ ‡è½¨è¿¹ track ç”Ÿæˆ"></a>6. é¼ æ ‡è½¨è¿¹ track ç”Ÿæˆ</h3><blockquote>
<p>åŸºäºè´å¡å°”æ›²çº¿ç”Ÿæˆè½¨è¿¹å¯ä»¥å‚è€ƒï¼š<a class="link"   href="https://github.com/2833844911/gurs"  target="_blank" rel="noopener">fa5294b67caaf91f4de8d6ed551a810e<i class="fas fa-external-link-alt"></i></a></p>
<p>ä½¿ç”¨ tanh å’Œ arctan å‡½æ•°æ•´åˆç”Ÿæˆè½¨è¿¹å¯ä»¥å‚è€ƒï¼š<a class="link"   href="https://www.52pojie.cn/forum.php?mod=viewthread&tid=1162979"  target="_blank" rel="noopener">7a15c1aca3c556ac8b660040c6811234<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
<ul>
<li><strong>è½¨è¿¹ç”Ÿæˆç®—æ³• newï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import math</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">trail_1 = [</span><br><span class="line">    [</span><br><span class="line">        9,</span><br><span class="line">        1,</span><br><span class="line">        111</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        13,</span><br><span class="line">        1,</span><br><span class="line">        121</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        19,</span><br><span class="line">        1,</span><br><span class="line">        126</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        28,</span><br><span class="line">        1,</span><br><span class="line">        136</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        36,</span><br><span class="line">        1,</span><br><span class="line">        146</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        49,</span><br><span class="line">        1,</span><br><span class="line">        153</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        61,</span><br><span class="line">        1,</span><br><span class="line">        163</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        75,</span><br><span class="line">        -2,</span><br><span class="line">        171</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        86,</span><br><span class="line">        -2,</span><br><span class="line">        180</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        96,</span><br><span class="line">        -4,</span><br><span class="line">        190</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        104,</span><br><span class="line">        -4,</span><br><span class="line">        198</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        114,</span><br><span class="line">        -5,</span><br><span class="line">        204</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        122,</span><br><span class="line">        -5,</span><br><span class="line">        214</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        128,</span><br><span class="line">        -6,</span><br><span class="line">        222</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        134,</span><br><span class="line">        -7,</span><br><span class="line">        230</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        139,</span><br><span class="line">        -7,</span><br><span class="line">        242</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        143,</span><br><span class="line">        -7,</span><br><span class="line">        246</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        147,</span><br><span class="line">        -8,</span><br><span class="line">        253</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        151,</span><br><span class="line">        -8,</span><br><span class="line">        266</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        155,</span><br><span class="line">        -8,</span><br><span class="line">        272</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        158,</span><br><span class="line">        -8,</span><br><span class="line">        292</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        161,</span><br><span class="line">        -9,</span><br><span class="line">        299</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        165,</span><br><span class="line">        -9,</span><br><span class="line">        303</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        168,</span><br><span class="line">        -10,</span><br><span class="line">        306</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        171,</span><br><span class="line">        -10,</span><br><span class="line">        313</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        176,</span><br><span class="line">        -10,</span><br><span class="line">        322</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        179,</span><br><span class="line">        -10,</span><br><span class="line">        330</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        184,</span><br><span class="line">        -11,</span><br><span class="line">        341</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        188,</span><br><span class="line">        -11,</span><br><span class="line">        355</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        191,</span><br><span class="line">        -11,</span><br><span class="line">        361</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        194,</span><br><span class="line">        -11,</span><br><span class="line">        367</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        196,</span><br><span class="line">        -11,</span><br><span class="line">        375</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        198,</span><br><span class="line">        -12,</span><br><span class="line">        384</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        201,</span><br><span class="line">        -12,</span><br><span class="line">        393</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        203,</span><br><span class="line">        -12,</span><br><span class="line">        401</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        206,</span><br><span class="line">        -12,</span><br><span class="line">        412</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        208,</span><br><span class="line">        -12,</span><br><span class="line">        420</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        211,</span><br><span class="line">        -13,</span><br><span class="line">        430</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        214,</span><br><span class="line">        -13,</span><br><span class="line">        437</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        215,</span><br><span class="line">        -13,</span><br><span class="line">        448</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        218,</span><br><span class="line">        -13,</span><br><span class="line">        454</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        220,</span><br><span class="line">        -13,</span><br><span class="line">        465</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        223,</span><br><span class="line">        -13,</span><br><span class="line">        473</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        225,</span><br><span class="line">        -13,</span><br><span class="line">        485</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        227,</span><br><span class="line">        -13,</span><br><span class="line">        497</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        228,</span><br><span class="line">        -14,</span><br><span class="line">        505</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        229,</span><br><span class="line">        -14,</span><br><span class="line">        516</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        231,</span><br><span class="line">        -14,</span><br><span class="line">        525</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        232,</span><br><span class="line">        -14,</span><br><span class="line">        534</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        233,</span><br><span class="line">        -14,</span><br><span class="line">        540</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        235,</span><br><span class="line">        -14,</span><br><span class="line">        551</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        237,</span><br><span class="line">        -14,</span><br><span class="line">        562</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        239,</span><br><span class="line">        -14,</span><br><span class="line">        573</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        240,</span><br><span class="line">        -14,</span><br><span class="line">        583</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        241,</span><br><span class="line">        -14,</span><br><span class="line">        588</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        243,</span><br><span class="line">        -14,</span><br><span class="line">        612</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        244,</span><br><span class="line">        -14,</span><br><span class="line">        621</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        245,</span><br><span class="line">        -14,</span><br><span class="line">        632</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        247,</span><br><span class="line">        -14,</span><br><span class="line">        638</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        248,</span><br><span class="line">        -14,</span><br><span class="line">        653</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        249,</span><br><span class="line">        -14,</span><br><span class="line">        661</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        250,</span><br><span class="line">        -14,</span><br><span class="line">        673</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        251,</span><br><span class="line">        -14,</span><br><span class="line">        684</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        252,</span><br><span class="line">        -14,</span><br><span class="line">        696</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        253,</span><br><span class="line">        -14,</span><br><span class="line">        709</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        254,</span><br><span class="line">        -14,</span><br><span class="line">        727</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        255,</span><br><span class="line">        -14,</span><br><span class="line">        740</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        256,</span><br><span class="line">        -14,</span><br><span class="line">        762</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        256,</span><br><span class="line">        -15,</span><br><span class="line">        785</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        257,</span><br><span class="line">        -15,</span><br><span class="line">        809</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        258,</span><br><span class="line">        -15,</span><br><span class="line">        836</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        259,</span><br><span class="line">        -15,</span><br><span class="line">        864</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        260,</span><br><span class="line">        -15,</span><br><span class="line">        875</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        261,</span><br><span class="line">        -15,</span><br><span class="line">        899</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        262,</span><br><span class="line">        -15,</span><br><span class="line">        950</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        263,</span><br><span class="line">        -15,</span><br><span class="line">        969</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        264,</span><br><span class="line">        -15,</span><br><span class="line">        983</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        265,</span><br><span class="line">        -15,</span><br><span class="line">        1016</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        266,</span><br><span class="line">        -15,</span><br><span class="line">        1035</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        267,</span><br><span class="line">        -15,</span><br><span class="line">        1057</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        268,</span><br><span class="line">        -15,</span><br><span class="line">        1069</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        269,</span><br><span class="line">        -15,</span><br><span class="line">        1102</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        270,</span><br><span class="line">        -15,</span><br><span class="line">        1244</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line">trail_2 = [</span><br><span class="line">    [</span><br><span class="line">        11,</span><br><span class="line">        0,</span><br><span class="line">        140</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        13,</span><br><span class="line">        0,</span><br><span class="line">        147</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        16,</span><br><span class="line">        0,</span><br><span class="line">        158</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        19,</span><br><span class="line">        0,</span><br><span class="line">        168</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        21,</span><br><span class="line">        0,</span><br><span class="line">        177</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        24,</span><br><span class="line">        -1,</span><br><span class="line">        184</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        27,</span><br><span class="line">        -1,</span><br><span class="line">        193</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        30,</span><br><span class="line">        -1,</span><br><span class="line">        202</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        32,</span><br><span class="line">        -1,</span><br><span class="line">        213</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        34,</span><br><span class="line">        -1,</span><br><span class="line">        217</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        37,</span><br><span class="line">        -1,</span><br><span class="line">        228</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        38,</span><br><span class="line">        -1,</span><br><span class="line">        235</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        41,</span><br><span class="line">        -1,</span><br><span class="line">        249</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        43,</span><br><span class="line">        -1,</span><br><span class="line">        261</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        45,</span><br><span class="line">        -2,</span><br><span class="line">        270</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        47,</span><br><span class="line">        -2,</span><br><span class="line">        282</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        49,</span><br><span class="line">        -2,</span><br><span class="line">        293</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        50,</span><br><span class="line">        -2,</span><br><span class="line">        301</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        51,</span><br><span class="line">        -2,</span><br><span class="line">        312</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        53,</span><br><span class="line">        -2,</span><br><span class="line">        322</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        54,</span><br><span class="line">        -2,</span><br><span class="line">        332</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        56,</span><br><span class="line">        -2,</span><br><span class="line">        342</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        58,</span><br><span class="line">        -2,</span><br><span class="line">        352</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        60,</span><br><span class="line">        -2,</span><br><span class="line">        362</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        62,</span><br><span class="line">        -2,</span><br><span class="line">        374</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        65,</span><br><span class="line">        -2,</span><br><span class="line">        384</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        66,</span><br><span class="line">        -2,</span><br><span class="line">        392</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        68,</span><br><span class="line">        -2,</span><br><span class="line">        399</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        69,</span><br><span class="line">        -2,</span><br><span class="line">        409</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        71,</span><br><span class="line">        -2,</span><br><span class="line">        422</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        73,</span><br><span class="line">        -2,</span><br><span class="line">        428</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        74,</span><br><span class="line">        -2,</span><br><span class="line">        436</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        76,</span><br><span class="line">        -2,</span><br><span class="line">        447</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        77,</span><br><span class="line">        -2,</span><br><span class="line">        452</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        79,</span><br><span class="line">        -2,</span><br><span class="line">        466</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        82,</span><br><span class="line">        -2,</span><br><span class="line">        476</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        83,</span><br><span class="line">        -2,</span><br><span class="line">        485</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        85,</span><br><span class="line">        -2,</span><br><span class="line">        495</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        86,</span><br><span class="line">        -2,</span><br><span class="line">        506</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        87,</span><br><span class="line">        -2,</span><br><span class="line">        515</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        88,</span><br><span class="line">        -2,</span><br><span class="line">        523</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        90,</span><br><span class="line">        -2,</span><br><span class="line">        542</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        91,</span><br><span class="line">        -2,</span><br><span class="line">        549</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        93,</span><br><span class="line">        -2,</span><br><span class="line">        562</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        94,</span><br><span class="line">        -2,</span><br><span class="line">        568</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        95,</span><br><span class="line">        -2,</span><br><span class="line">        586</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        96,</span><br><span class="line">        -2,</span><br><span class="line">        604</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        97,</span><br><span class="line">        -2,</span><br><span class="line">        630</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        98,</span><br><span class="line">        -2,</span><br><span class="line">        640</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        99,</span><br><span class="line">        -2,</span><br><span class="line">        661</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        100,</span><br><span class="line">        -2,</span><br><span class="line">        680</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        101,</span><br><span class="line">        -2,</span><br><span class="line">        708</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        102,</span><br><span class="line">        -2,</span><br><span class="line">        728</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        103,</span><br><span class="line">        -2,</span><br><span class="line">        756</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        104,</span><br><span class="line">        -2,</span><br><span class="line">        782</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        105,</span><br><span class="line">        -2,</span><br><span class="line">        804</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        106,</span><br><span class="line">        -2,</span><br><span class="line">        821</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        107,</span><br><span class="line">        -2,</span><br><span class="line">        862</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        108,</span><br><span class="line">        -2,</span><br><span class="line">        890</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        109,</span><br><span class="line">        -2,</span><br><span class="line">        927</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        110,</span><br><span class="line">        -2,</span><br><span class="line">        951</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        111,</span><br><span class="line">        -2,</span><br><span class="line">        1029</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        112,</span><br><span class="line">        -2,</span><br><span class="line">        1052</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        113,</span><br><span class="line">        -2,</span><br><span class="line">        1095</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        114,</span><br><span class="line">        -2,</span><br><span class="line">        1112</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        115,</span><br><span class="line">        -2,</span><br><span class="line">        1135</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        116,</span><br><span class="line">        -2,</span><br><span class="line">        1213</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line">trail_3 = [</span><br><span class="line">    [</span><br><span class="line">        13,</span><br><span class="line">        0,</span><br><span class="line">        86</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        18,</span><br><span class="line">        -1,</span><br><span class="line">        96</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        22,</span><br><span class="line">        -1,</span><br><span class="line">        102</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        28,</span><br><span class="line">        -1,</span><br><span class="line">        114</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        33,</span><br><span class="line">        -2,</span><br><span class="line">        120</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        38,</span><br><span class="line">        -2,</span><br><span class="line">        125</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        43,</span><br><span class="line">        -2,</span><br><span class="line">        139</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        47,</span><br><span class="line">        -3,</span><br><span class="line">        149</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        51,</span><br><span class="line">        -3,</span><br><span class="line">        156</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        55,</span><br><span class="line">        -3,</span><br><span class="line">        164</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        58,</span><br><span class="line">        -3,</span><br><span class="line">        172</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        60,</span><br><span class="line">        -4,</span><br><span class="line">        179</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        63,</span><br><span class="line">        -4,</span><br><span class="line">        186</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        65,</span><br><span class="line">        -4,</span><br><span class="line">        195</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        68,</span><br><span class="line">        -4,</span><br><span class="line">        204</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        70,</span><br><span class="line">        -4,</span><br><span class="line">        217</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        72,</span><br><span class="line">        -4,</span><br><span class="line">        221</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        75,</span><br><span class="line">        -4,</span><br><span class="line">        232</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        77,</span><br><span class="line">        -5,</span><br><span class="line">        239</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        78,</span><br><span class="line">        -5,</span><br><span class="line">        251</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        81,</span><br><span class="line">        -5,</span><br><span class="line">        257</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        82,</span><br><span class="line">        -5,</span><br><span class="line">        269</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        84,</span><br><span class="line">        -6,</span><br><span class="line">        276</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        85,</span><br><span class="line">        -6,</span><br><span class="line">        284</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        86,</span><br><span class="line">        -6,</span><br><span class="line">        292</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        87,</span><br><span class="line">        -6,</span><br><span class="line">        305</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        88,</span><br><span class="line">        -6,</span><br><span class="line">        312</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        89,</span><br><span class="line">        -6,</span><br><span class="line">        323</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        90,</span><br><span class="line">        -6,</span><br><span class="line">        340</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        91,</span><br><span class="line">        -6,</span><br><span class="line">        362</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        92,</span><br><span class="line">        -6,</span><br><span class="line">        370</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        93,</span><br><span class="line">        -6,</span><br><span class="line">        391</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        94,</span><br><span class="line">        -6,</span><br><span class="line">        401</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        96,</span><br><span class="line">        -6,</span><br><span class="line">        417</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        97,</span><br><span class="line">        -6,</span><br><span class="line">        438</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        98,</span><br><span class="line">        -6,</span><br><span class="line">        464</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        99,</span><br><span class="line">        -6,</span><br><span class="line">        487</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        100,</span><br><span class="line">        -6,</span><br><span class="line">        501</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        101,</span><br><span class="line">        -6,</span><br><span class="line">        521</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        102,</span><br><span class="line">        -6,</span><br><span class="line">        548</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        103,</span><br><span class="line">        -6,</span><br><span class="line">        565</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        104,</span><br><span class="line">        -6,</span><br><span class="line">        590</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        105,</span><br><span class="line">        -6,</span><br><span class="line">        642</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        106,</span><br><span class="line">        -6,</span><br><span class="line">        688</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        107,</span><br><span class="line">        -6,</span><br><span class="line">        721</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        108,</span><br><span class="line">        -6,</span><br><span class="line">        735</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        109,</span><br><span class="line">        -6,</span><br><span class="line">        770</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        110,</span><br><span class="line">        -6,</span><br><span class="line">        832</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        111,</span><br><span class="line">        -6,</span><br><span class="line">        857</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        112,</span><br><span class="line">        -6,</span><br><span class="line">        887</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        113,</span><br><span class="line">        -6,</span><br><span class="line">        902</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        114,</span><br><span class="line">        -6,</span><br><span class="line">        923</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        115,</span><br><span class="line">        -6,</span><br><span class="line">        950</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        115,</span><br><span class="line">        -5,</span><br><span class="line">        999</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        116,</span><br><span class="line">        -5,</span><br><span class="line">        1008</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        117,</span><br><span class="line">        -5,</span><br><span class="line">        1034</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        118,</span><br><span class="line">        -5,</span><br><span class="line">        1081</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        118,</span><br><span class="line">        -4,</span><br><span class="line">        1089</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        119,</span><br><span class="line">        -4,</span><br><span class="line">        1100</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        120,</span><br><span class="line">        -4,</span><br><span class="line">        1122</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        121,</span><br><span class="line">        -4,</span><br><span class="line">        1159</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line">trail_4 = [</span><br><span class="line">    [</span><br><span class="line">        9,</span><br><span class="line">        0,</span><br><span class="line">        136</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        14,</span><br><span class="line">        -1,</span><br><span class="line">        143</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        17,</span><br><span class="line">        -1,</span><br><span class="line">        152</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        22,</span><br><span class="line">        -2,</span><br><span class="line">        161</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        29,</span><br><span class="line">        -2,</span><br><span class="line">        169</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        35,</span><br><span class="line">        -2,</span><br><span class="line">        177</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        41,</span><br><span class="line">        -3,</span><br><span class="line">        186</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        51,</span><br><span class="line">        -3,</span><br><span class="line">        200</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        58,</span><br><span class="line">        -3,</span><br><span class="line">        206</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        69,</span><br><span class="line">        -4,</span><br><span class="line">        212</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        77,</span><br><span class="line">        -4,</span><br><span class="line">        220</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        87,</span><br><span class="line">        -4,</span><br><span class="line">        231</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        95,</span><br><span class="line">        -4,</span><br><span class="line">        237</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        105,</span><br><span class="line">        -4,</span><br><span class="line">        245</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        114,</span><br><span class="line">        -4,</span><br><span class="line">        254</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        120,</span><br><span class="line">        -4,</span><br><span class="line">        266</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        124,</span><br><span class="line">        -4,</span><br><span class="line">        271</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        128,</span><br><span class="line">        -4,</span><br><span class="line">        285</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        131,</span><br><span class="line">        -4,</span><br><span class="line">        295</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        133,</span><br><span class="line">        -4,</span><br><span class="line">        302</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        135,</span><br><span class="line">        -4,</span><br><span class="line">        308</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        136,</span><br><span class="line">        -4,</span><br><span class="line">        316</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        137,</span><br><span class="line">        -4,</span><br><span class="line">        324</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        138,</span><br><span class="line">        -4,</span><br><span class="line">        335</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        139,</span><br><span class="line">        -4,</span><br><span class="line">        340</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        141,</span><br><span class="line">        -4,</span><br><span class="line">        353</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        142,</span><br><span class="line">        -4,</span><br><span class="line">        362</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        143,</span><br><span class="line">        -4,</span><br><span class="line">        372</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        144,</span><br><span class="line">        -4,</span><br><span class="line">        387</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        145,</span><br><span class="line">        -4,</span><br><span class="line">        389</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        146,</span><br><span class="line">        -4,</span><br><span class="line">        406</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        147,</span><br><span class="line">        -4,</span><br><span class="line">        425</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        148,</span><br><span class="line">        -4,</span><br><span class="line">        455</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        149,</span><br><span class="line">        -4,</span><br><span class="line">        466</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        150,</span><br><span class="line">        -4,</span><br><span class="line">        483</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        150,</span><br><span class="line">        -5,</span><br><span class="line">        492</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        151,</span><br><span class="line">        -5,</span><br><span class="line">        499</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        150,</span><br><span class="line">        -5,</span><br><span class="line">        1202</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line">trail_5 = [</span><br><span class="line">    [</span><br><span class="line">        8,</span><br><span class="line">        -1,</span><br><span class="line">        128</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        12,</span><br><span class="line">        -2,</span><br><span class="line">        137</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        15,</span><br><span class="line">        -2,</span><br><span class="line">        145</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        19,</span><br><span class="line">        -2,</span><br><span class="line">        156</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        22,</span><br><span class="line">        -4,</span><br><span class="line">        160</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        26,</span><br><span class="line">        -4,</span><br><span class="line">        174</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        29,</span><br><span class="line">        -5,</span><br><span class="line">        178</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        32,</span><br><span class="line">        -5,</span><br><span class="line">        187</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        35,</span><br><span class="line">        -5,</span><br><span class="line">        198</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        37,</span><br><span class="line">        -5,</span><br><span class="line">        207</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        38,</span><br><span class="line">        -6,</span><br><span class="line">        212</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        40,</span><br><span class="line">        -6,</span><br><span class="line">        222</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        43,</span><br><span class="line">        -7,</span><br><span class="line">        230</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        44,</span><br><span class="line">        -7,</span><br><span class="line">        240</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        48,</span><br><span class="line">        -8,</span><br><span class="line">        250</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        50,</span><br><span class="line">        -8,</span><br><span class="line">        256</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        53,</span><br><span class="line">        -8,</span><br><span class="line">        266</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        56,</span><br><span class="line">        -9,</span><br><span class="line">        274</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        60,</span><br><span class="line">        -9,</span><br><span class="line">        281</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        64,</span><br><span class="line">        -10,</span><br><span class="line">        292</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        69,</span><br><span class="line">        -10,</span><br><span class="line">        302</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        73,</span><br><span class="line">        -10,</span><br><span class="line">        310</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        78,</span><br><span class="line">        -11,</span><br><span class="line">        319</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        83,</span><br><span class="line">        -12,</span><br><span class="line">        327</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        88,</span><br><span class="line">        -12,</span><br><span class="line">        336</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        92,</span><br><span class="line">        -13,</span><br><span class="line">        343</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        97,</span><br><span class="line">        -13,</span><br><span class="line">        352</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        100,</span><br><span class="line">        -13,</span><br><span class="line">        359</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        103,</span><br><span class="line">        -13,</span><br><span class="line">        367</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        106,</span><br><span class="line">        -13,</span><br><span class="line">        375</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        108,</span><br><span class="line">        -13,</span><br><span class="line">        386</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        111,</span><br><span class="line">        -13,</span><br><span class="line">        393</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        112,</span><br><span class="line">        -13,</span><br><span class="line">        402</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        115,</span><br><span class="line">        -13,</span><br><span class="line">        411</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        117,</span><br><span class="line">        -13,</span><br><span class="line">        422</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        118,</span><br><span class="line">        -13,</span><br><span class="line">        428</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        120,</span><br><span class="line">        -13,</span><br><span class="line">        438</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        122,</span><br><span class="line">        -13,</span><br><span class="line">        444</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        123,</span><br><span class="line">        -13,</span><br><span class="line">        456</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        125,</span><br><span class="line">        -13,</span><br><span class="line">        465</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        126,</span><br><span class="line">        -13,</span><br><span class="line">        472</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        127,</span><br><span class="line">        -13,</span><br><span class="line">        479</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        129,</span><br><span class="line">        -13,</span><br><span class="line">        490</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        131,</span><br><span class="line">        -13,</span><br><span class="line">        501</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        133,</span><br><span class="line">        -13,</span><br><span class="line">        512</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        135,</span><br><span class="line">        -13,</span><br><span class="line">        524</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        137,</span><br><span class="line">        -13,</span><br><span class="line">        529</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        139,</span><br><span class="line">        -13,</span><br><span class="line">        541</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        140,</span><br><span class="line">        -13,</span><br><span class="line">        550</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        142,</span><br><span class="line">        -13,</span><br><span class="line">        562</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        143,</span><br><span class="line">        -13,</span><br><span class="line">        576</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        144,</span><br><span class="line">        -13,</span><br><span class="line">        589</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        145,</span><br><span class="line">        -13,</span><br><span class="line">        595</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        147,</span><br><span class="line">        -13,</span><br><span class="line">        608</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        148,</span><br><span class="line">        -13,</span><br><span class="line">        618</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        149,</span><br><span class="line">        -13,</span><br><span class="line">        631</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        151,</span><br><span class="line">        -14,</span><br><span class="line">        644</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        152,</span><br><span class="line">        -14,</span><br><span class="line">        664</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        153,</span><br><span class="line">        -14,</span><br><span class="line">        673</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        155,</span><br><span class="line">        -14,</span><br><span class="line">        694</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        156,</span><br><span class="line">        -14,</span><br><span class="line">        706</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        157,</span><br><span class="line">        -14,</span><br><span class="line">        721</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        158,</span><br><span class="line">        -14,</span><br><span class="line">        731</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        159,</span><br><span class="line">        -14,</span><br><span class="line">        742</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        160,</span><br><span class="line">        -14,</span><br><span class="line">        759</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        161,</span><br><span class="line">        -14,</span><br><span class="line">        774</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        162,</span><br><span class="line">        -14,</span><br><span class="line">        799</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        163,</span><br><span class="line">        -14,</span><br><span class="line">        815</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        164,</span><br><span class="line">        -14,</span><br><span class="line">        839</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        165,</span><br><span class="line">        -14,</span><br><span class="line">        853</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        166,</span><br><span class="line">        -14,</span><br><span class="line">        870</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        167,</span><br><span class="line">        -14,</span><br><span class="line">        899</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        168,</span><br><span class="line">        -14,</span><br><span class="line">        920</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        169,</span><br><span class="line">        -14,</span><br><span class="line">        940</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        170,</span><br><span class="line">        -14,</span><br><span class="line">        956</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        171,</span><br><span class="line">        -14,</span><br><span class="line">        977</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        172,</span><br><span class="line">        -14,</span><br><span class="line">        998</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        173,</span><br><span class="line">        -14,</span><br><span class="line">        1106</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        174,</span><br><span class="line">        -14,</span><br><span class="line">        1129</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        175,</span><br><span class="line">        -14,</span><br><span class="line">        1182</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        175,</span><br><span class="line">        -13,</span><br><span class="line">        1191</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">def show_plt():</span><br><span class="line">    &quot;&quot;&quot;éå†å¹¶ç»˜åˆ¶äº”ç»„è½¨è¿¹æ•°æ®&quot;&quot;&quot;</span><br><span class="line">    for i in range(1, 6):</span><br><span class="line">        trail_list = eval(f&quot;trail_&#123;i&#125;&quot;)  # åŠ¨æ€è·å–ä¸åŒè½¨è¿¹å˜é‡</span><br><span class="line">        print(f&quot;trail_&#123;i&#125;&quot;)</span><br><span class="line"></span><br><span class="line">        # åˆå§‹åŒ– X, Y, T è½´æ•°æ®åˆ—è¡¨</span><br><span class="line">        x_trail = []</span><br><span class="line">        y_trail = []</span><br><span class="line">        t_trail = []</span><br><span class="line"></span><br><span class="line">        # éå†å•æ¡è½¨è¿¹ä¸­çš„æ‰€æœ‰ç‚¹</span><br><span class="line">        for trail in trail_list:</span><br><span class="line">            x, y, t = trail  # åˆ†åˆ«è§£åŒ… x, y, t åæ ‡å€¼</span><br><span class="line">            x_trail.append(x)</span><br><span class="line">            y_trail.append(y)</span><br><span class="line">            t_trail.append(t)</span><br><span class="line"></span><br><span class="line">        # æ‰“å° X è½´å˜åŒ–å·®å¼‚</span><br><span class="line">        print(np.diff(x_trail))</span><br><span class="line">        plt.plot(t_trail, x_trail)  # ç»˜åˆ¶ T-X æ›²çº¿</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"># show_plt()</span><br><span class="line"></span><br><span class="line">def easeOutQuint(x):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    ç¼“åŠ¨å‡½æ•°ï¼šç”¨æ¥ç”Ÿæˆå¹³æ»‘çš„è¿åŠ¨æ›²çº¿ã€‚</span><br><span class="line">    å…¬å¼ï¼šf(x) = 1 - (1 - x)^5</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    return 1 - math.pow(1 - x, 5)</span><br><span class="line"></span><br><span class="line">def get_trail(move_distance, show=False):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æ ¹æ®ä¼ å…¥çš„è·ç¦»ç”Ÿæˆæ¨¡æ‹Ÿçš„è½¨è¿¹æ•°æ®ã€‚</span><br><span class="line">    :param move_distance: è¿åŠ¨çš„è·ç¦»</span><br><span class="line">    :param show: æ˜¯å¦å±•ç¤ºè½¨è¿¹æ³¢åŠ¨æ›²çº¿</span><br><span class="line">    :return: åŒ…å« [x, y, t] åæ ‡çš„è½¨è¿¹åˆ—è¡¨</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __set_pt_time(_dist):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        è®¡ç®—æ¯ä¸ªè½¨è¿¹ç‚¹çš„æ—¶é—´ï¼Œå¹¶éšæœºç”Ÿæˆè¿åŠ¨å’Œåœæ­¢é˜¶æ®µçš„æ—¶é—´ç‚¹ã€‚</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if _dist &lt; 100:</span><br><span class="line">            __need_time = int(random.uniform(500, 1500))  # çŸ­è·ç¦»æ‰€éœ€æ—¶é—´</span><br><span class="line">        else:</span><br><span class="line">            __need_time = int(random.uniform(1000, 2000))  # é•¿è·ç¦»æ‰€éœ€æ—¶é—´</span><br><span class="line"></span><br><span class="line">        __end_pt_time = []  # ç»“æŸé˜¶æ®µçš„æ—¶é—´ç‚¹åˆ—è¡¨</span><br><span class="line">        __move_pt_time = []  # è¿åŠ¨é˜¶æ®µçš„æ—¶é—´ç‚¹åˆ—è¡¨</span><br><span class="line">        __pos_z = []  # æ‰€æœ‰æ—¶é—´ç‚¹çš„æœ€ç»ˆåˆ—è¡¨</span><br><span class="line"></span><br><span class="line">        # è®¡ç®—è¿åŠ¨é˜¶æ®µæ‰€éœ€æ—¶é—´</span><br><span class="line">        total_move_time = __need_time * random.uniform(0.8, 0.9)</span><br><span class="line">        start_point_time = random.uniform(110, 200)  # èµ·å§‹ç‚¹æ—¶é—´</span><br><span class="line">        __start_pt_time = [int(start_point_time)]  # èµ·å§‹é˜¶æ®µæ—¶é—´åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">        sum_move_time = 0  # è¿åŠ¨æ—¶é—´ç´¯è®¡</span><br><span class="line"></span><br><span class="line">        _tmp_total_move_time = total_move_time</span><br><span class="line">        while True:</span><br><span class="line">            delta_time = random.uniform(15, 20)  # éšæœºæ—¶é—´é—´éš”</span><br><span class="line">            if _tmp_total_move_time &lt; delta_time:</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">            sum_move_time += delta_time</span><br><span class="line">            _tmp_total_move_time -= delta_time</span><br><span class="line">            __move_pt_time.append(int(start_point_time + sum_move_time))</span><br><span class="line"></span><br><span class="line">        # å°†å‰©ä½™çš„è¿åŠ¨æ—¶é—´æ·»åŠ ä¸ºæœ€åä¸€ä¸ªç‚¹æ—¶é—´</span><br><span class="line">        last_pt_time = __move_pt_time[-1]</span><br><span class="line">        __move_pt_time.append(int(last_pt_time + _tmp_total_move_time))</span><br><span class="line"></span><br><span class="line">        # è®¡ç®—åœæ­¢é˜¶æ®µçš„æ—¶é—´ç‚¹</span><br><span class="line">        sum_end_time = start_point_time + total_move_time</span><br><span class="line">        other_point_time = __need_time - sum_end_time</span><br><span class="line">        end_first_ptime = other_point_time / 2</span><br><span class="line"></span><br><span class="line">        while True:</span><br><span class="line">            delta_time = random.uniform(110, 200)</span><br><span class="line">            if end_first_ptime - delta_time &lt;= 0:</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">            end_first_ptime -= delta_time</span><br><span class="line">            sum_end_time += delta_time</span><br><span class="line">            __end_pt_time.append(int(sum_end_time))</span><br><span class="line"></span><br><span class="line">        __end_pt_time.append(int(sum_end_time + (other_point_time / 2 + end_first_ptime)))</span><br><span class="line"></span><br><span class="line">        # åˆå¹¶æ‰€æœ‰æ—¶é—´ç‚¹</span><br><span class="line">        __pos_z.extend(__start_pt_time)</span><br><span class="line">        __pos_z.extend(__move_pt_time)</span><br><span class="line">        __pos_z.extend(__end_pt_time)</span><br><span class="line"></span><br><span class="line">        return __pos_z</span><br><span class="line"></span><br><span class="line">    def __get_pos_y(point_count):</span><br><span class="line">        &quot;&quot;&quot;ç”Ÿæˆ Y è½´çš„è½¨è¿¹ç‚¹ï¼Œç”¨äºæ¨¡æ‹Ÿå‚ç›´æ–¹å‘çš„éšæœºè¿åŠ¨&quot;&quot;&quot;</span><br><span class="line">        _pos_y = []</span><br><span class="line">        start_y = random.randint(-1, 1)  # èµ·å§‹ Y åæ ‡</span><br><span class="line">        end_y = random.randint(-13, -5)  # ç»“æŸ Y åæ ‡</span><br><span class="line">        y_values = np.linspace(start_y, end_y, point_count)  # åœ¨èµ·å§‹å’Œç»“æŸä¹‹é—´å‡åŒ€åˆ†å¸ƒ</span><br><span class="line"></span><br><span class="line">        for val in y_values:</span><br><span class="line">            _pos_y.append(int(val))</span><br><span class="line"></span><br><span class="line">        return _pos_y</span><br><span class="line"></span><br><span class="line">    # è·å–æ—¶é—´åˆ—è¡¨å’Œè½¨è¿¹é•¿åº¦</span><br><span class="line">    time_list = __set_pt_time(move_distance)</span><br><span class="line">    trail_length = len(time_list)</span><br><span class="line"></span><br><span class="line">    # æ ¹æ®ç¼“åŠ¨å‡½æ•°ç”Ÿæˆ X è½´è½¨è¿¹</span><br><span class="line">    t = np.linspace(-0.5, 1, trail_length)  # æ—¶é—´èŒƒå›´</span><br><span class="line">    mult = move_distance / 7.59375  # è·ç¦»ç¼©æ”¾ç³»æ•°</span><br><span class="line">    x = [int(mult * (easeOutQuint(i) + 6.59375)) for i in t]  # è®¡ç®— X åæ ‡</span><br><span class="line"></span><br><span class="line">    # ç”Ÿæˆ Y è½´è½¨è¿¹</span><br><span class="line">    y = __get_pos_y(trail_length)</span><br><span class="line"></span><br><span class="line">    # æ·»åŠ é«˜æ–¯å™ªå£°ï¼Œæ¨¡æ‹Ÿæ³¢åŠ¨</span><br><span class="line">    delta_pt = abs(np.random.normal(scale=3, size=trail_length))</span><br><span class="line">    for index in range(len(delta_pt)):</span><br><span class="line">        change_x = int(x[index] + delta_pt[index])</span><br><span class="line">        if index + 1 &lt; trail_length and x[index + 1] &gt; change_x:</span><br><span class="line">            x[index] = change_x</span><br><span class="line"></span><br><span class="line">    # å¦‚æœéœ€è¦å±•ç¤ºè½¨è¿¹æ³¢åŠ¨å›¾</span><br><span class="line">    if show:</span><br><span class="line">        delta_t = [i for i in range(trail_length)]</span><br><span class="line">        plt.plot(delta_t, delta_pt, color=&#x27;green&#x27;)</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line">    # æ‰“å°è½¨è¿¹çš„æ€»ä½ç§»</span><br><span class="line">    print(x[-1] - x[0])</span><br><span class="line"></span><br><span class="line">    # è¿”å›è½¨è¿¹ç»“æœ [x, y, t]</span><br><span class="line">    result = [[x[i], y[i], time_list[i]] for i in range(trail_length)]</span><br><span class="line">    return result</span><br><span class="line"></span><br><span class="line">def showeaseOutQuint(distance):</span><br><span class="line">    &quot;&quot;&quot;ç»˜åˆ¶ç¼“åŠ¨å‡½æ•°æ›²çº¿ï¼Œå±•ç¤ºè·ç¦»éšæ—¶é—´å˜åŒ–çš„è½¨è¿¹&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def func(x):</span><br><span class="line">        return 1 - pow(1 - x, 5) + 6.59375</span><br><span class="line"></span><br><span class="line">    print(func(-0.5), func(1))  # æ‰“å°å‡½æ•°åœ¨è¾¹ç•Œç‚¹çš„å€¼</span><br><span class="line"></span><br><span class="line">    # ç”Ÿæˆæ›²çº¿æ•°æ®</span><br><span class="line">    x = np.linspace(-0.5, 1, 70)</span><br><span class="line">    y = [distance / 7.59375 * func(i) for i in x]</span><br><span class="line"></span><br><span class="line">    # åŠ å…¥éšæœºæ³¢åŠ¨</span><br><span class="line">    delta_pt = abs(np.random.normal(scale=1.1, size=70))</span><br><span class="line">    for index in range(len(delta_pt)):</span><br><span class="line">        change_y = int(x[index] + delta_pt[index])</span><br><span class="line">        if index + 1 &lt; 70 and y[index + 1] &gt; change_y:</span><br><span class="line">            y[index] += change_y</span><br><span class="line"></span><br><span class="line">    # ç»˜åˆ¶æ›²çº¿</span><br><span class="line">    t = np.linspace(100, 1200, 70)</span><br><span class="line">    plt.plot(t, y)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    # ç¤ºä¾‹ï¼šç”Ÿæˆéšæœºè·ç¦»çš„è½¨è¿¹å¹¶æ‰“å°</span><br><span class="line">    distance = 100</span><br><span class="line">    result = get_trail(random.randint(100, 200), False)</span><br><span class="line">    print(result)</span><br><span class="line">    &quot;&quot;&quot;        </span><br><span class="line">    1. æ”¶é›†è½¨è¿¹</span><br><span class="line">    2. ç”»å‡ºè½¨è¿¹å›¾åƒ æ‰¾ç¼“åŠ¨å‡½æ•°ç›¸åŒå½¢çŠ¶</span><br><span class="line">    3. ç»˜åˆ¶ç¼“åŠ¨å‡½æ•° æ‰¾åˆ°ç¬¦åˆå½¢çŠ¶çš„ä½œç”¨åŸŸ</span><br><span class="line">    4. æ‰¾åˆ°ä½œç”¨åŸŸå†…æœ€å¤§å€¼ æœ€å°å€¼ ä¸Šä¸‹ç§»åŠ¨ *è·ç¦»ç³»æ•°</span><br><span class="line">    5. æ›¿æ¢æ—¶é—´ï¼ˆtï¼‰è½´ä¸ºè‡ªå·±çš„</span><br><span class="line">    6. é«˜æ–¯å‡½æ•°å¢åŠ æ³¢åŠ¨</span><br><span class="line">    7. ç»†èŠ‚ä¿®æ”¹ xè½´ tè½´ np.diffå¯¹æ¯”</span><br><span class="line">    &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>è½¨è¿¹ç”Ÿæˆç®—æ³•1ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">def get_slide_track1(self, distance):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æ ¹æ®æ»‘åŠ¨è·ç¦»ç”Ÿæˆæ»‘åŠ¨è½¨è¿¹</span><br><span class="line">    :param distance: éœ€è¦æ»‘åŠ¨çš„è·ç¦»</span><br><span class="line">    :return: æ»‘åŠ¨è½¨è¿¹&lt;type &#x27;list&#x27;&gt;: [[x,y,t], ...]</span><br><span class="line">        x: å·²æ»‘åŠ¨çš„æ¨ªå‘è·ç¦»</span><br><span class="line">        y: å·²æ»‘åŠ¨çš„çºµå‘è·ç¦», é™¤èµ·ç‚¹å¤–, å‡ä¸º0</span><br><span class="line">        t: æ»‘åŠ¨è¿‡ç¨‹æ¶ˆè€—çš„æ—¶é—´, å•ä½: æ¯«ç§’</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __ease_out_expo(sep):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        ç¼“åŠ¨å‡½æ•° easeOutExpo</span><br><span class="line">        å‚è€ƒï¼šhttps://easings.net/zh-cn#easeOutExpo</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if sep == 1:</span><br><span class="line">            return 1</span><br><span class="line">        else:</span><br><span class="line">            return 1 - pow(2, -10 * sep)</span><br><span class="line"></span><br><span class="line">    if not isinstance(distance, int) or distance &lt; 0:</span><br><span class="line">        raise ValueError(f&quot;distanceç±»å‹å¿…é¡»æ˜¯å¤§äºç­‰äº0çš„æ•´æ•°: distance: &#123;distance&#125;, type: &#123;type(distance)&#125;&quot;)</span><br><span class="line">    # åˆå§‹åŒ–è½¨è¿¹åˆ—è¡¨</span><br><span class="line">    slide_track = [</span><br><span class="line">        [random.randint(-50, -10), random.randint(-50, -10), 0],</span><br><span class="line">        [0, 0, 0],</span><br><span class="line">    ]</span><br><span class="line">    # å…±è®°å½•countæ¬¡æ»‘å—ä½ç½®ä¿¡æ¯</span><br><span class="line">    count = 30 + int(distance / 2)</span><br><span class="line">    # åˆå§‹åŒ–æ»‘åŠ¨æ—¶é—´</span><br><span class="line">    t = random.randint(50, 100)</span><br><span class="line">    # è®°å½•ä¸Šä¸€æ¬¡æ»‘åŠ¨çš„è·ç¦»</span><br><span class="line">    _x = 0</span><br><span class="line">    _y = 0</span><br><span class="line">    for i in range(count):</span><br><span class="line">        # å·²æ»‘åŠ¨çš„æ¨ªå‘è·ç¦»</span><br><span class="line">        x = round(__ease_out_expo(i / count) * distance)</span><br><span class="line">        # æ»‘åŠ¨è¿‡ç¨‹æ¶ˆè€—çš„æ—¶é—´</span><br><span class="line">        t += random.randint(10, 20)</span><br><span class="line">        if x == _x:</span><br><span class="line">            continue</span><br><span class="line">        slide_track.append([x, _y, t])</span><br><span class="line">        _x = x</span><br><span class="line">    slide_track.append(slide_track[-1])</span><br><span class="line"></span><br><span class="line">    logger.info(f&quot;ç”Ÿæˆè½¨è¿¹ï¼š&#123;slide_track&#125;&quot;)</span><br><span class="line">    return slide_track</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>è½¨è¿¹ç”Ÿæˆç®—æ³•2ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">def get_slide_track2(self, x):</span><br><span class="line">    # åˆå§‹åŒ–è½¨è¿¹åˆ—è¡¨</span><br><span class="line">    slide_track = [</span><br><span class="line">        [random.randint(-50, -20), random.randint(-50, -10), 0],</span><br><span class="line">        [0, 0, 0],</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    if x &lt; 100:</span><br><span class="line">        move_section = 1  # å¦‚æœç§»åŠ¨è·ç¦»å°äº100 é‚£ä¹ˆmoveæ¬¡æ•°ä¸ºxåŠ ä¸Š 7åˆ°20ä¹‹é—´çš„æ•°</span><br><span class="line">    else:</span><br><span class="line">        move_section = 2  # å¦‚æœç§»åŠ¨è·ç¦»å°äº100 é‚£ä¹ˆmoveæ¬¡æ•°ä¸ºxåŠ ä¸Š 2ä¹˜ 7åˆ°20ä¹‹é—´çš„æ•°</span><br><span class="line"></span><br><span class="line">    up_down = random.randint(0, 1)  # ç¡®å®šä¸€ä¸ªæ–¹å‘ xå¤§äº0æˆ–xå°äº0</span><br><span class="line">    y = 0  # æ•°ç»„çš„yå€¼</span><br><span class="line">    time = random.randint(0, 10)  # åˆå§‹æ—¶é—´ å³ä¸ºç¬¬äºŒä¸ªæ•°ç»„çš„æ—¶é—´  åç»­æ—¶é—´ç´¯åŠ æ“ä½œå°±å¯ä»¥äº†</span><br><span class="line">    count = 0</span><br><span class="line">    flag = 0</span><br><span class="line">    repetition = int(x / 4)  # é‡å¤xå‡ºç°çš„ä¸ªæ•°</span><br><span class="line">    frist_count = random.randint(6, 10)  # å‰é¢yä¸º0çš„æ•°ç»„ä¸ªæ•°</span><br><span class="line">    for i in range(x * random.randint(move_section * 7, move_section * 21)):  # move_section åœ¨è¿™é‡Œèµ·ä½œç”¨</span><br><span class="line">        if i + 1 &gt; x:  # å¦‚æœi+1è¦ç­‰äºx æˆ–è€…å°äºx ä½†è¿™é‡ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç­‰äºx</span><br><span class="line">            break</span><br><span class="line">        if up_down == 0:  # up_downå¦‚æœå¤§äº0 é‚£ä¹ˆè¿™ä¸ªè½¨è¿¹å°±æ˜¯yå¢è½¨è¿¹</span><br><span class="line">            if i &gt; frist_count:</span><br><span class="line">                if count == 0:</span><br><span class="line">                    y += random.randint(0, 1)</span><br><span class="line">                    count += 1</span><br><span class="line">                if flag &gt; random.randint(8, 10):</span><br><span class="line">                    count = 0</span><br><span class="line">                    flag = 0</span><br><span class="line">                if i + 1 &gt; int(x / 5) * 4:</span><br><span class="line">                    time += random.randint(20, 70)</span><br><span class="line">                elif i + 1 &gt; x - 3:</span><br><span class="line">                    time += random.randint(80, 180)</span><br><span class="line">                else:</span><br><span class="line">                    time += random.randint(0, 5)</span><br><span class="line">                slide_track.append([i + 1, y, time])</span><br><span class="line">                flag += 1</span><br><span class="line">                if random.randint(0, 1):</span><br><span class="line">                    if repetition:</span><br><span class="line">                        slide_track.append([i + 1, y, time + random.randint(0, 3)])</span><br><span class="line">                        flag += 1</span><br><span class="line">                        repetition -= 1</span><br><span class="line">            else:  # å‰é¢å‡ ä¸ªæ•°ç»„yéƒ½ä¸º0</span><br><span class="line">                time += random.randint(0, 5)</span><br><span class="line">                slide_track.append([i + 1, y, time])</span><br><span class="line">                if random.randint(0, 1):</span><br><span class="line">                    if repetition:</span><br><span class="line">                        slide_track.append([i + 1, y, time + random.randint(0, 3)])</span><br><span class="line">                        repetition -= 1</span><br><span class="line"></span><br><span class="line">        if up_down == 1:  # up_downå¦‚æœå°äº0 é‚£ä¹ˆè¿™ä¸ªè½¨è¿¹å°±æ˜¯yå‡è½¨è¿¹</span><br><span class="line">            if i &gt; frist_count:</span><br><span class="line">                if count == 0:</span><br><span class="line">                    y -= random.randint(0, 1)</span><br><span class="line">                    count += 1</span><br><span class="line">                if flag &gt; random.randint(8, 10):</span><br><span class="line">                    count = 0</span><br><span class="line">                    flag = 0</span><br><span class="line">                if i + 1 &gt; int(x / 5) * 4:</span><br><span class="line">                    time += random.randint(7, 40)</span><br><span class="line">                elif i + 1 &gt; x - 3:</span><br><span class="line">                    time += random.randint(80, 180)</span><br><span class="line">                else:</span><br><span class="line">                    time += random.randint(0, 5)</span><br><span class="line">                slide_track.append([i + 1, y, time])</span><br><span class="line">                flag += 1</span><br><span class="line">                if random.randint(0, 1):</span><br><span class="line">                    if repetition:</span><br><span class="line">                        slide_track.append([i + 1, y, time + random.randint(0, 3)])</span><br><span class="line">                        flag += 1</span><br><span class="line">                        repetition -= 1</span><br><span class="line">            else:</span><br><span class="line">                time += random.randint(0, 5)</span><br><span class="line">                slide_track.append([i + 1, y, time])</span><br><span class="line">                if random.randint(0, 1):</span><br><span class="line">                    if repetition:</span><br><span class="line">                        slide_track.append([i + 1, y, time + random.randint(0, 3)])</span><br><span class="line">                        repetition -= 1</span><br><span class="line"></span><br><span class="line">    print(f&quot;ç”Ÿæˆè½¨è¿¹æˆåŠŸï¼š&#123;slide_track&#125;\n&quot;)</span><br><span class="line">    return slide_track</span><br></pre></td></tr></table></figure>

<h3 id="7-éªŒè¯ç å‚æ•°è¡¥ç¯å¢ƒæ€è·¯"><a href="#7-éªŒè¯ç å‚æ•°è¡¥ç¯å¢ƒæ€è·¯" class="headerlink" title="7. éªŒè¯ç å‚æ•°è¡¥ç¯å¢ƒæ€è·¯"></a>7. éªŒè¯ç å‚æ•°è¡¥ç¯å¢ƒæ€è·¯</h3><blockquote>
<p><strong>éªŒè¯ç å¸¸è§„ååçˆ¬æµç¨‹ï¼š</strong></p>
<ol>
<li>åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡</li>
<li>å¯åŠ¨ç›‘å¬äº‹ä»¶</li>
<li>æ»‘åŠ¨è§¦å‘äº‹ä»¶ï¼Œæ‰§è¡Œç›‘å¬äº‹ä»¶çš„æ–¹æ³•ï¼ˆä¾‹ï¼šå¾€æ•°ç»„é‡Œ push åŠ å¯†å€¼ï¼‰</li>
<li>æ»‘åŠ¨å®Œå°†å€¼å¯¼å‡º</li>
</ol>
<p><strong>è¡¥ç¯å¢ƒæ ¸å¿ƒæ€è·¯ï¼š</strong>åœ¨å®šä½è‡³åŠ å¯†ä½ç½®åï¼Œé¦–å…ˆéœ€è¦æ˜ç¡®å‚æ•°æ‰€å±å¯¹è±¡ï¼Œæ ¹æ®å‚æ•°æ‰€å±å¯¹è±¡ï¼Œè€ƒè™‘ä¸¤ç§é»‘ç›’è°ƒç”¨æ–¹æ³•</p>
<ol>
<li>ç›´æ¥é€šè¿‡ window.aaa å…¨å±€å¯¼å‡º</li>
<li>é€šè¿‡<strong>å‚æ•°æ‰€å±å¯¹è±¡</strong>å¯¼å‡ºæ–¹æ³•ï¼Œéœ€è¦å…ˆå®šä½å¯¹è±¡å¼€å¯ç›‘å¬é¼ æ ‡äº‹ä»¶çš„åœ°æ–¹ï¼Œæ‰¾åˆ°å¯¹è±¡å£°æ˜çš„ä½ç½®å¹¶æ–­ç‚¹ï¼Œæ³¨å…¥ hook è„šæœ¬ <code>Object = function()&#123;debugger;&#125;</code>ï¼ˆ<strong>æ³¨å…¥åœ¨æ–¹æ³•å£°æ˜ä¹‹åï¼Œå¯¹è±¡ new Object ä¹‹å‰</strong>ï¼‰ï¼Œåœ¨ js ä¸­æ‰§è¡Œç›‘å¬é¼ æ ‡äº‹ä»¶ä»£ç ä»è€Œå¼€å§‹è¡¥ç¯å¢ƒ</li>
</ol>
</blockquote>
<ul>
<li><p><strong>å…³äº EventTarget äº‹ä»¶çš„ç¯å¢ƒï¼š</strong></p>
<ul>
<li><p>ä»£ç†å™¨ä¸ä»…ä»…åªæ˜¯å¯ä»¥ç”¨æ¥ä»£ç†æµè§ˆå™¨å†…ç½®å¯¹è±¡ï¼Œåœ¨è¡¥ç¯å¢ƒä¸­é‡åˆ°è¡¥å¯¹è±¡æ—¶ï¼Œæƒ³è¦çœ‹åˆ°å¯¹è±¡ä¸Šæ‰€éœ€è¦æˆ–ä½¿ç”¨åˆ°çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»£ç†å™¨ä»£ç†å½“å‰å¯¹è±¡ï¼Œå³ <code>return new Proxy(&#123;&#125;, getObjhandler(params))</code>ï¼Œä»¥åå‡ºå½“å‰å¯¹è±¡èº«ä¸Šçš„ç¯å¢ƒ</p>
</li>
<li><p>å½“é‡åˆ° addEventListenerã€removeEventListener å’Œ dispatchEvent API æ—¶ï¼Œåº”è¯¥è€ƒè™‘åœ¨å½“å‰å¯¹è±¡ä¸Šè¡¥ EventTarget åŸå‹ï¼ŒåŒæ—¶ä»£ç†å½“å‰å¯¹è±¡ï¼Œå³å¯åå‡ºäº‹ä»¶ç›¸å…³çš„ç¯å¢ƒï¼ˆå®Œæ•´æ‰§è¡Œä»£ç ï¼Œå³å¯åœ¨<strong>äº‹ä»¶ä¿å­˜å¯¹è±¡</strong>ä¸­è·å–åˆ°å½“å‰ç¯å¢ƒä¸­ç›‘å¬çš„å…·ä½“äº‹ä»¶ï¼‰</p>
</li>
<li><p>éœ€è¦æŒ‰ç…§<strong>äº‹ä»¶è§¦å‘é¡ºåº</strong>è¿›è¡Œæ¨¡æ‹Ÿï¼Œåœ¨æµè§ˆå™¨ä¸­é€šè¿‡æ‰‹åŠ¨å¯¹<strong>è¿™ä¸€ç»„äº‹ä»¶</strong>æ·»åŠ ç›‘å¬äº‹ä»¶ï¼Œå¹¶è§¦å‘äº‹ä»¶ï¼ŒæŒ‰ç…§äº‹ä»¶é¡ºåºåœ¨æœ¬åœ°æ¨¡æ‹Ÿäº‹ä»¶å¯¹è±¡ï¼Œå¹¶è¿›è¡Œä»£ç†ååœ¨å¯¹åº”å¯¹è±¡ä¸Šè§¦å‘äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(&quot;mousedown&quot;, function (e) &#123; console.log(e.type) &#125;);</span><br><span class="line">document.addEventListener(&quot;mousemove&quot;, function (e) &#123; console.log(e.type) &#125;);</span><br><span class="line">document.addEventListener(&quot;mouseup&quot;, function (e) &#123; console.log(e.type) &#125;);</span><br><span class="line"></span><br><span class="line">var xxx1 = &#123;</span><br><span class="line">    type: &quot;mousedown&quot;,</span><br><span class="line">    clientX: 0,</span><br><span class="line">    clientY: 0</span><br><span class="line">&#125;</span><br><span class="line">var xxx2 = &#123;</span><br><span class="line">    type: &quot;mousemove&quot;,</span><br><span class="line">    clientX: 0,</span><br><span class="line">    clientY: 0</span><br><span class="line">&#125;</span><br><span class="line">var xxx3 = &#123;</span><br><span class="line">    type: &quot;mouseup&quot;,</span><br><span class="line">    clientX: 0,</span><br><span class="line">    clientY: 0</span><br><span class="line">&#125;</span><br><span class="line">xxx1 = new Proxy(xxx1, getObjhandler(&quot;mousedown&quot;))</span><br><span class="line">xxx2 = new Proxy(xxx2, getObjhandler(&quot;mousemove&quot;))</span><br><span class="line">xxx3 = new Proxy(xxx3, getObjhandler(&quot;mouseup&quot;))</span><br><span class="line">myslideVerify.dispatchEvent(xxx1)</span><br><span class="line">myslideVerify.dispatchEvent(xxx2)</span><br><span class="line">myslideVerify.dispatchEvent(xxx3)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ€åä¸€æ­¥ï¼Œæ ¡éªŒå®Œè½¨è¿¹åé¢è¿˜ä¼šæœ‰å…¶ä»–ç¯å¢ƒç›‘æµ‹ï¼Œæ‰€ä»¥éœ€è¦å»æµè§ˆå™¨æ‹¿ä¸€å¥—çœŸå®è½¨è¿¹ï¼Œæš‚æ—¶æ¨¡æ‹Ÿï¼Œ<strong>å¾ªç¯è§¦å‘åœ¨æ»‘å—å¯¹è±¡ä¸Š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// https://www.geetest.com/demo/slide-float.html</span><br><span class="line">dom = document.querySelector(&#x27;.geetest_slider_button&#x27;);</span><br><span class="line">track = [];</span><br><span class="line">dom.addEventListener(&quot;mousedown&quot;, function (e) &#123;</span><br><span class="line">    track.push(&#123;</span><br><span class="line">        type: e.type,</span><br><span class="line">        clientX: e.clientX,</span><br><span class="line">        clientY: e.clientY</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">dom.addEventListener(&quot;mousemove&quot;, function (e) &#123;</span><br><span class="line">    track.push(&#123;</span><br><span class="line">        type: e.type,</span><br><span class="line">        clientX: e.clientX,</span><br><span class="line">        clientY: e.clientY</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">dom.addEventListener(&quot;mouseup&quot;, function (e) &#123;</span><br><span class="line">    track.push(&#123;</span><br><span class="line">        type: e.type,</span><br><span class="line">        clientX: e.clientX,</span><br><span class="line">        clientY: e.clientY</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">console.log(&quot;è·å–è½¨è¿¹æ•°ç»„:&quot;, track);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="ä¸ƒã€éªŒè¯ç é€†å‘å®æˆ˜"><a href="#ä¸ƒã€éªŒè¯ç é€†å‘å®æˆ˜" class="headerlink" title="ä¸ƒã€éªŒè¯ç é€†å‘å®æˆ˜"></a>ä¸ƒã€éªŒè¯ç é€†å‘å®æˆ˜</h2><h3 id="1-æéªŒ3ä»£æ»‘å—"><a href="#1-æéªŒ3ä»£æ»‘å—" class="headerlink" title="1. æéªŒ3ä»£æ»‘å—"></a>1. æéªŒ3ä»£æ»‘å—</h3><blockquote>
<p><strong>è¯·æ±‚æ¥å£é€»è¾‘åˆ†æï¼ˆ<a class="link"   href="https://www.geetest.com/demo/slide-float.html"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰ï¼š</strong></p>
<ol>
<li><strong>register-slideï¼š</strong>æºå¸¦æ—¶é—´æˆ³ï¼Œè¿”å› challenge å’Œ gt å€¼</li>
<li><strong>gettype.phpï¼š</strong>æºå¸¦ gt å€¼ï¼Œè¿”å›ä¸€å † js æ–‡ä»¶åœ°å€</li>
<li><strong>get.phpï¼š</strong>æºå¸¦ <strong>w1</strong>ã€challengeã€gt å‚æ•°ï¼Œè¿”å›å¸¦æœ‰ c å’Œ s çš„æ•°æ®</li>
<li><strong>ajax.phpï¼š</strong>æºå¸¦ <strong>w2</strong>ã€challengeã€gt å‚æ•°ï¼Œè¿”å›æ»‘å—ç±»å‹</li>
<li><strong>get.phpï¼š</strong>æºå¸¦ challengeã€gt ç­‰å¤šä¸ªå‚æ•°ï¼Œè¿”å›é‡è¦æ•°æ®ï¼ŒåŒ…å«æ–°çš„ challengeã€s å€¼å’Œå›¾ç‰‡è¯·æ±‚åœ°å€</li>
<li><strong>ajax.phpï¼š</strong>æºå¸¦ <strong>w3</strong>ã€æ–°challengeã€gt å‚æ•°ï¼Œè¿”å›éªŒè¯æˆåŠŸæ•°æ®</li>
</ol>
<p><strong>æ³¨æ„ï¼šæéªŒå¿…é¡»ä¸¥æ ¼æŒ‰é¡ºåºè¯·æ±‚æ¯ä¸€æ¬¡æ¥å£ï¼Œå“ªæ€•è¿”å›çš„æ•°æ®æ²¡æœ‰ç”¨ï¼Œå¦åˆ™åç»­è¯·æ±‚å°±ä¼šæœ‰å“åº”é”™è¯¯çš„é—®é¢˜</strong></p>
<p><strong><span style="color:red;">é€†å‘ w å€¼ï¼šæéªŒ 3 ä»£ä¸­ï¼Œéœ€é€†å‘çš„ w1 å’Œ w2 å‚æ•°ï¼Œå¯ç½®ç©ºï¼Œå¯å›ºå®šï¼Œä¹Ÿå¯èƒ½è¦ js ç”Ÿæˆï¼Œå…·ä½“ç½‘ç«™å…·ä½“åˆ†æ</span></strong></p>
</blockquote>
<ul>
<li><p><strong>çªç ´ç­–ç•¥ï¼š</strong></p>
<ol>
<li>éªŒè¯ç å­˜åœ¨å¤šä¸ªè¯·æ±‚æ¥å£ï¼Œ<strong>åœ¨æœ€ç»ˆè¿›è¡ŒéªŒè¯çš„æ¥å£è½½è·ä¸­é€šå¸¸å­˜åœ¨ä¸€ä¸ªéœ€è¦é€†å‘çš„åŠ å¯†éªŒè¯ w å‚æ•°</strong>ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨å™¨å®šä½æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— â€œwâ€ï¼Œä¸€èˆ¬éœ€è¦<strong>å¯¹æºæ–‡ä»¶ AST æ™®é€šè§£æ··æ·†</strong>åæ›¿æ¢æ–‡ä»¶ï¼Œå®šä½åŠ å¯†ä½ç½®</li>
<li>é€†å‘å‚æ•°é€šå¸¸é‡‡ç”¨<strong>å…¨æ‰£ä»£ç è¡¥ç¯å¢ƒ</strong>ï¼Œ<strong>æ‰€æœ‰æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡å…¨å±€å¯¹è±¡å¯¼å‡ºï¼ˆä¸èƒ½ç›´æ¥å¯¼å‡ºçš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºå¯¼å‡ºçš„å¯¹è±¡å°äº†ï¼Œè¦å¾€å¤§é‡Œå¯¼ï¼Œæˆ–è€…éœ€è¦ç»†æ‰£ä»£ç ï¼‰</strong>ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸º<strong>å­˜åœ¨ç¯å¢ƒæ£€æµ‹</strong>ï¼Œä¸»è¦ä½¿ç”¨è„šæœ¬è¡¥ç¯å¢ƒï¼Œå› ä¸ºç¯å¢ƒä¸å¤šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ v_jstools å·¥å…·ç”Ÿæˆä¸´æ—¶ç¯å¢ƒ</li>
<li>å…¶ä¸­ w3 å‚æ•°ä¸­çš„æ»‘å—ç§»åŠ¨è·ç¦»ã€è½¨è¿¹åŠ å¯†å‚æ•°ï¼Œéƒ½æ˜¯æ ˆå †çš„ä¸Šä¸€å¸§ä¼ è¿‡æ¥çš„ï¼Œéœ€è¦åœ¨ä¸Šä¸€ä¸ªæ ˆåˆ†æ</li>
<li>å¯¹äºæºå¸¦ callback è½½è·æ•°æ®çš„æ¥å£è¿”å›çš„ jsonp æ ¼å¼æ•°æ®ï¼Œ<strong>ä¸€å®šä¸è¦ä¸ºäº†æ–¹ä¾¿è·å– json æ•°æ®ç›´æ¥å»æ‰ callback å‚æ•°ï¼Œå› ä¸º callback ä¹Ÿæ˜¯éªŒè¯å‚æ•°ä¹‹ä¸€</strong>ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å³å¯</li>
</ol>
</li>
<li><p><strong>ç»†èŠ‚é¿å‘æ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>å…³äº challenge å’Œ s å€¼ï¼š</strong>åœ¨ç¬¬ 2 æ¬¡è¯·æ±‚ get.php æ¥å£åï¼Œå“åº”ä¼šè¿”å›æ–°çš„ challenge å€¼å’Œ s å€¼ï¼Œåœ¨åç»­è¯·æ±‚ ajax.php æ ¡éªŒæ¥å£æ—¶ï¼Œéœ€è¦æºå¸¦çš„ ch å€¼å’Œé€†å‘ w3 å‚æ•°ä¸­æ‰€ä½¿ç”¨åˆ°çš„æ‰€æœ‰ ch å€¼ï¼Œéƒ½å¿…é¡»æ˜¯æœ€æ–°çš„</li>
<li><strong>å…³äº w3 ä¸­çš„ passtime æ•°æ®ï¼š</strong>ä¸ç®¡æ˜¯æéªŒå‡ ä»£ï¼Œé€†å‘ w æ—¶éƒ½æœ‰ä¸ª passtime å‚ä¸è®¡ç®—ã€‚è¿™ä¸ªå€¼æœ‰ä¸¤ç§æƒ…å†µï¼šå¦‚æœæ˜¯æ»‘å—ï¼Œåˆ™æ˜¯æ»‘åŠ¨æ‰€ç”¨æ—¶é—´ï¼Œå³è½¨è¿¹çš„æœ€åä¸€ä¸ªæ—¶é—´å€¼ **<code>track[track.length - 1][2]</code>**ï¼›é™¤äº†æ»‘å—çš„å…¶ä»–æƒ…å†µï¼Œå¯ä»¥å†™æ­»ï¼Œä¹Ÿå¯ä»¥éšæœºç”Ÿæˆä¸€ä¸ªå€¼  <strong><code>Math.floor((Math.random()*500) + 4000)</code></strong></li>
<li><strong>å…³äº w ä¸­çš„éšæœºå˜åŒ–å­—ç¬¦ä¸²ï¼š</strong>ä¸ç®¡æ˜¯æéªŒå‡ ä»£ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª 16 ä½éšæœºå­—ç¬¦ä¸²å‚ä¸äº† w çš„åŠ å¯†è®¡ç®—ï¼Œè¿™ä¸ªéšæœºå­—ç¬¦ä¸²ä¸€èˆ¬éƒ½ä¼šç”¨åˆ°ä¸¤æ¬¡ï¼Œè¿™ä¸¤æ¬¡è¦ä¿è¯æ˜¯ä¸€æ ·çš„æ‰è¡Œ</li>
<li><strong>å…³äºç¼ºå£è¯†åˆ«è·ç¦»ï¼š</strong>æ»‘å—è·ç¦»é€šå¸¸ä¸æ˜¯ä»æœ€å·¦è¾¹å¼€å§‹çš„ï¼Œå‰é¢ä¼šæœ‰å‡ ä¸ªåƒç´ çš„ç©ºç™½è·ç¦»ï¼Œæ‰€ä»¥<strong>å®é™… distance &#x3D; ç¼ºå£è¯†åˆ«è·ç¦» - ç©ºç™½è·ç¦»</strong>ï¼ˆè¦ä¸è¦å‡å»è¿™ä¸ªå€¼ã€å‡å»å¤šå°‘ï¼Œå…·ä½“ç½‘å€å…·ä½“åˆ†æï¼‰</li>
<li><strong>å…³äºæ—¶é—´é—´éš”ï¼š</strong>ä¸‰ä»£é‡Œé¢ï¼Œæ•´ä¸ªæµç¨‹èµ°å¾—å¤ªå¿«äº†ä¹Ÿä¸è¡Œï¼Œéœ€è¦åœ¨ç”Ÿæˆ w å€¼ä¹‹åï¼Œéšæœºåœç•™ä¸ª 2 ç§’å·¦å³ï¼Œä¾‹å¦‚ä¸‰ä»£çš„ç‚¹é€‰ï¼ˆæ–‡å­—ç‚¹é€‰ã€å›¾æ ‡ç‚¹é€‰ã€è¯­åºç‚¹é€‰ã€ç©ºé—´æ¨ç†ï¼‰</li>
<li><strong>å…³äº w2 ä¸­çš„ captcha_token å€¼ï¼š</strong>å¦‚æœæ›¿æ¢æ–‡ä»¶è¢«æ£€æµ‹å‡ºæ¥ï¼Œåˆ™è¿”å›çš„ captcha_token æ˜¯å¼‚å¸¸çš„ï¼Œä¼šå¯¼è‡´ä¸€ç›´éªŒè¯å¤±è´¥</li>
</ol>
</li>
<li><p><strong>æéªŒå¸¸è§é”™è¯¯è¿”å›ä¿¡æ¯ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// challenge ä¸å¯¹</span><br><span class="line">geetest_xxxxxxxxxxxxx(&#123;&quot;status&quot;: &quot;error&quot;, &quot;error&quot;: &quot;illegal challenge&quot;, &quot;user_error&quot;: &quot;ç½‘ç»œä¸ç»™åŠ›&quot;, &quot;error_code&quot;: &quot;error_23&quot;&#125;)</span><br><span class="line">// w ç”Ÿæˆä¸å¯¹</span><br><span class="line">geetest_xxxxxxxxxxxxx(&#123;&quot;status&quot;: &quot;error&quot;, &quot;error&quot;: &quot;param decrypt error&quot;, &quot;user_error&quot;: &quot;ç½‘ç»œä¸ç»™åŠ›&quot;, &quot;error_code&quot;: &quot;error_03&quot;&#125;)</span><br><span class="line">// æ»‘åŠ¨éªŒè¯æ²¡æœ‰è½¨è¿¹</span><br><span class="line">geetest_xxxxxxxxxxxxx(&#123;&quot;status&quot;: &quot;error&quot;, &quot;error&quot;: &quot;not proof&quot;, &quot;user_error&quot;: &quot;ç½‘ç»œä¸ç»™åŠ›&quot;, &quot;error_code&quot;: &quot;error_21&quot;&#125;)</span><br><span class="line">// è½¨è¿¹ã€ç¼ºå£è·ç¦»ã€å‚æ•°é—®é¢˜</span><br><span class="line">geetest_xxxxxxxxxxxxx(&#123;&quot;success&quot;: 0, &quot;message&quot;: &quot;fail&quot;&#125;)  // ç¼ºå£è·ç¦»ï¼Œè½¨è¿¹ç”Ÿæˆé—®é¢˜</span><br><span class="line">geetest_xxxxxxxxxxxxx(&#123;&quot;success&quot;: 0, &quot;message&quot;: &quot;forbidden&quot;&#125;)  // å…¶ä½™æ¥å£ w å‚æ•°é—®é¢˜</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-æéªŒ3ä»£ç‚¹é€‰"><a href="#2-æéªŒ3ä»£ç‚¹é€‰" class="headerlink" title="2. æéªŒ3ä»£ç‚¹é€‰"></a>2. æéªŒ3ä»£ç‚¹é€‰</h3><blockquote>
<p><strong>ç‚¹é€‰çš„è¯·æ±‚æ¥å£é€»è¾‘ï¼š</strong>ä¸æ»‘å—ä¸€è‡´</p>
<p><strong>ç‚¹é€‰çš„æ ¸å¿ƒå¤„ç†é€»è¾‘ï¼š</strong></p>
<ol>
<li>é€šè¿‡äº‘ç è¯†åˆ«éªŒè¯ç ï¼Œå¾—åˆ°æ–‡å­—åæ ‡ä¿¡æ¯ï¼Œå¹¶å¯ä»¥é€šè¿‡å¤šç»„åæ ‡å˜åŒ–æ•°æ®ï¼Œåˆ©ç”¨ chatgpt ç”Ÿæˆåæ ‡ç®—æ³•</li>
<li>w3 å‚æ•°çš„é€†å‘ä¸­ï¼Œä¸»è¦æ˜¯å¯¹éªŒè¯ç å›¾ç‰‡ä¸­çš„æ–‡å­—åæ ‡çš„éªŒè¯ï¼Œå…¶ä½™é¼ æ ‡ç§»åŠ¨è½¨è¿¹å’Œé¼ æ ‡ç‚¹å‡»çš„åæ ‡ä¿¡æ¯å‡æœªéªŒè¯ï¼Œä½¿ç”¨ä¸€ç»„å›ºå®šçš„çœŸå®æ•°æ®æ¨¡æ‹Ÿå³å¯</li>
</ol>
<p><strong>ç¡®è®¤ç‚¹å‡»çš„åˆå§‹åæ ‡ä½ç½®ï¼š</strong>äº‹ä»¶ç›‘å¬å™¨æ–­ç‚¹ â€“&gt; é¼ æ ‡ â€“&gt; clickï¼Œæ–­ç‚¹ä¸­ offsetX å’Œ offsetY å³ä¸ºç‚¹å‡»åæ ‡ä¿¡æ¯</p>
</blockquote>
<ul>
<li><p><strong>ç»†èŠ‚é¿å‘æ€»ç»“ï¼š</strong></p>
<ol>
<li><p><strong>å…³äºæ—¶é—´é—´éš”ï¼š</strong>ä¸‰ä»£é‡Œé¢ï¼Œæ•´ä¸ªæµç¨‹èµ°å¾—å¤ªå¿«äº†ä¹Ÿä¸è¡Œï¼Œéœ€è¦åœ¨ç”Ÿæˆ w å€¼ä¹‹åï¼Œéšæœºåœç•™ä¸ª 2 ç§’å·¦å³ï¼Œä¾‹å¦‚ä¸‰ä»£çš„ç‚¹é€‰ï¼ˆæ–‡å­—ç‚¹é€‰ã€å›¾æ ‡ç‚¹é€‰ã€è¯­åºç‚¹é€‰ã€ç©ºé—´æ¨ç†ï¼‰ï¼Œä¼šè¿”å›ä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geetest_xxxxxx(&#123;&quot;status&quot;: &quot;success&quot;, &quot;data&quot;: &#123;&quot;result&quot;: &quot;fail&quot;, &quot;msg&quot;: [&quot;duration short&quot;]&#125;&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h2 id="å…«ã€å¸¸ç”¨-Hook-è„šæœ¬"><a href="#å…«ã€å¸¸ç”¨-Hook-è„šæœ¬" class="headerlink" title="å…«ã€å¸¸ç”¨ Hook è„šæœ¬"></a>å…«ã€å¸¸ç”¨ Hook è„šæœ¬</h2><blockquote>
<p><strong>å¸¸ç”¨ Hook è„šæœ¬ï¼š<a class="link"   href="https://www.cnblogs.com/xiaoweigege/p/14954648.html"  target="_blank" rel="noopener">https://www.cnblogs.com/xiaoweigege/p/14954648.html<i class="fas fa-external-link-alt"></i></a></strong></p>
<p><strong>ä»€ä¹ˆæ˜¯HookæŠ€æœ¯ï¼Ÿ</strong></p>
<ul>
<li>Hookï¼ˆé’©å­ï¼‰æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘ä¸­ä½¿ç”¨çš„æŠ€æœ¯ï¼Œå…¶ç›®çš„æ˜¯æˆªè·ã€ä¿®æ”¹æˆ–æ‰©å±•ç¨‹åºæˆ–ç³»ç»Ÿçš„è¡Œä¸ºï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹ä»£ç çš„æƒ…å†µä¸‹æ”¹å˜ç¨‹åºçš„è¡Œä¸ºï¼ˆ<strong>jsé€†å‘ä¸­é€šè¿‡åœ¨å…³é”®ç‚¹æ’å…¥é’©å­ï¼Œè¿›è¡Œä»£ç è°ƒè¯•æˆ–åˆ†æ</strong>ï¼‰</li>
</ul>
<p><strong>HookæŠ€æœ¯å®ç°çš„å¿…è¦æ¡ä»¶ï¼š</strong></p>
<ol>
<li>å®¢æˆ·ç«¯æ‹¥æœ‰ JavaScript çš„æœ€é«˜è§£é‡Šæƒï¼Œå¯ä»¥æ§åˆ¶ js çš„æ‰§è¡Œç¯å¢ƒï¼Œæ‹¥æœ‰è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ï¼‰ä¿®æ”¹ä»£ç çš„èƒ½åŠ›</li>
<li>JavaScript çš„å¼±ç±»å‹ç‰¹æ€§ï¼Œå…¶ä¸­ <strong>ç±»å‹é—´çš„éšå¼è½¬æ¢</strong> å’Œ <strong>å˜é‡é‡å®šä¹‰</strong> çš„ç‰¹æ€§éƒ½ä¸º Hook æä¾›äº†çµæ´»æ€§</li>
</ol>
<p><strong>æ³¨æ„ï¼šåªæœ‰å½“è¢« Hook å‡½æ•°å’Œæ— é™ debugger åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸæ—¶ï¼Œæ‰èƒ½ Hook æˆåŠŸå¹¶è®¿é—®åˆ°å‡½æ•°çš„å±€éƒ¨å˜é‡</strong></p>
<p><strong>ä½œç”¨ï¼ˆjs é€†å‘ä¸­ï¼‰ï¼š</strong>åŒDOMã€XHRæ–­ç‚¹ä¸€æ ·æ˜¯ç”¨äºç¡®å®šåŠ å¯†ä½ç½®ï¼Œä½†ä½¿ç”¨ hook è°ƒè¯•å¯èƒ½å¾—åˆ°çš„ä½ç½®æ›´è¿‘</p>
</blockquote>
<h3 id="1-hook-Storage"><a href="#1-hook-Storage" class="headerlink" title="1. hook Storage"></a>1. hook Storage</h3><ul>
<li><strong>å¯¹ Storage å¯¹è±¡çš„ setItem æ–¹æ³•è¿›è¡Œ Hookï¼š</strong>åŒ…æ‹¬ localStorage å’Œ sessionStorage</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let old_setItem = Storage.prototype.setItem;</span><br><span class="line">Storage.prototype.setItem = function (key, value) &#123;</span><br><span class="line">    console.log(this, key, value);</span><br><span class="line">    debugger;</span><br><span class="line">    return old_setItem.call(this, key, value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-hook-eval"><a href="#2-hook-eval" class="headerlink" title="2. hook eval"></a>2. hook eval</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let old_eval = eval;</span><br><span class="line">eval = function (code) &#123;</span><br><span class="line">    console.log(&quot;æ‰§è¡Œä»£ç :&quot;, code);</span><br><span class="line">    debugger;</span><br><span class="line">    return old_eval(code);</span><br><span class="line">&#125;</span><br><span class="line">let oldtostr = Function.prototype.toString;</span><br><span class="line">Function.prototype.toString = function () &#123;</span><br><span class="line">    res = oldtostr.call(this);</span><br><span class="line">    if (this.name == &#x27;eval&#x27;) &#123;</span><br><span class="line">        console.log(&quot;åŸå§‹ï¼š&quot; + this.name + &#x27; --&gt; toStringï¼š&#x27; + res);</span><br><span class="line">        return &quot;function eval() &#123; [native code] &#125;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-hook-å…¨å±€å±æ€§"><a href="#3-hook-å…¨å±€å±æ€§" class="headerlink" title="3. hook å…¨å±€å±æ€§"></a>3. hook å…¨å±€å±æ€§</h3><ul>
<li><strong>æ€è·¯ï¼š</strong>å¯¹äºä¸€äº›å°†åŠ å¯†å‚æ•°æŒ‚è½½åˆ° window å…¨å±€å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ hook å±æ€§å®šä¹‰å®ç°å¿«é€Ÿå®šä½åŠ å¯†å †æ ˆ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var _xxx = window.xxx;</span><br><span class="line">    Object.defineProperty(window, &#x27;xxx&#x27;, &#123;</span><br><span class="line">        set: function (new_xxx) &#123;</span><br><span class="line">            debugger;</span><br><span class="line">            _xxx = new_xxx;</span><br><span class="line">        &#125;,</span><br><span class="line">        get: function () &#123;</span><br><span class="line">            return _xxx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="4-hook-XHR-open"><a href="#4-hook-XHR-open" class="headerlink" title="4. hook XHR open"></a>4. hook XHR open</h3><ul>
<li><strong>æ‹¦æˆªæ–¹æ³•ï¼š<code>window.XMLHttpRequest.prototype.open(method, url, async)</code></strong><ul>
<li><strong>ä½œç”¨ï¼š</strong>æ˜¯ XMLHttpRequest å¯¹è±¡çš„åŸå‹é“¾ä¸Šçš„æ–¹æ³•ä¹‹ä¸€ï¼Œç”¨äºåˆå§‹åŒ–ä¸€ä¸ª XMLHttpRequest è¯·æ±‚</li>
<li><strong>å‚æ•°methodï¼š</strong>è¡¨ç¤º HTTP è¯·æ±‚çš„æ–¹æ³•ï¼Œå¦‚ â€œGETâ€ã€â€POSTâ€ ç­‰</li>
<li><strong>å‚æ•°urlï¼š</strong>è¯·æ±‚çš„ URL åœ°å€</li>
<li><strong>å‚æ•°asyncï¼š</strong>æ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ–¹å¼å‘é€è¯·æ±‚ï¼Œé»˜è®¤ä¸º trueï¼ˆå³å¼‚æ­¥ï¼‰</li>
</ul>
</li>
<li><strong>æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°è¢«åŠ å¯†ï¼š</strong>ç”±äºæŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°æ˜¯ç½‘å€ URL çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åˆå§‹åŒ– XMLHttpRequest è¯·æ±‚æ—¶ï¼Œå‚æ•° url ä¸­ä¸€å®šä¼šåŒ…å«è¿™ä¸ªè¢«åŠ å¯†çš„æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ï¼ˆ<a class="link"   href="https://www.qimai.cn"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</li>
<li><strong>applyä½œç”¨ï¼š</strong>è°ƒç”¨åŸå§‹çš„ open æ–¹æ³•ï¼Œå¹¶ä¸”ç¡®ä¿åœ¨ç‰¹å®šçš„ä¸Šä¸‹æ–‡ï¼ˆwindow.XMLHttpRequest.prototypeï¼‰ä¸­æ‰§è¡Œï¼Œå³ç¡®ä¿äº†è°ƒç”¨çš„æ˜¯æœŸæœ›çš„å‡½æ•°ï¼Œæ˜¯è‡ªå·±å®šä¹‰çš„openï¼Œè€Œä¸æ˜¯å…¶ä»–å¯èƒ½å­˜åœ¨çš„åŒåæ–¹æ³•</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var open = window.XMLHttpRequest.prototype.open;</span><br><span class="line">    window.XMLHttpRequest.prototype.open = function (method, url, async) &#123;</span><br><span class="line">        if (url.indexOf(&#x27;analysis&#x27;) != -1) &#123;</span><br><span class="line">            debugger</span><br><span class="line">        &#125;</span><br><span class="line">        return open.apply(this, arguments);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="5-hook-json"><a href="#5-hook-json" class="headerlink" title="5. hook json"></a>5. hook json</h3><blockquote>
<p><strong>åŸç†ï¼šåœ¨ HTTP è¯·æ±‚å’Œå“åº”ä¸­ï¼Œæ•°æ®é€šå¸¸ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ è¾“</strong></p>
<ul>
<li><p><strong>JSON.stringify()ï¼š</strong>å°† JavaScript å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚å¯¹äº POST è¯·æ±‚è€Œè¨€ï¼Œæºå¸¦çš„å‚æ•°é€šå¸¸ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶æ”¾ç½®åœ¨è¯·æ±‚ä½“ä¸­ï¼Œå°†å…¶ä½œä¸ºè¯·æ±‚ä½“çš„ä¸€éƒ¨åˆ†å‘é€ç»™æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º<strong>åºåˆ—åŒ–</strong>ï¼Œæ‰€ä»¥ä¸€å®šä¼š<strong>åœ¨å‘é€è¯·æ±‚å‰</strong>å°†æºå¸¦çš„å‚æ•°å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</p>
</li>
<li><p><strong>JSON.parse()ï¼š</strong>å°† JSON å­—ç¬¦ä¸²è§£æä¸º JavaScript å¯¹è±¡ã€‚<strong>æœåŠ¡å™¨æ‰€è¿”å›æ˜¯åŠ å¯†çš„å­—ç¬¦ä¸²æ•°æ®</strong>ï¼Œæ‰€ä»¥ä¸€å®šéœ€è¦<strong>åœ¨æ¥å—å“åº”æ•°æ®å</strong>å¯¹æ•°æ®è¿›è¡Œè§£å¯†ï¼Œå†å°†è§£å¯†åçš„å­—ç¬¦ä¸²è§£æä¸º js å¯¹è±¡ï¼Œç›®çš„æ˜¯ç¡®ä¿åœ¨å®¢æˆ·ç«¯ä¸­ä»¥ js å¯¹è±¡çš„å½¢å¼å¯ç”¨ï¼Œä»¥ä¾¿åœ¨å®¢æˆ·ç«¯ä¸­å±•ç¤º</p>
</li>
</ul>
</blockquote>
<ul>
<li><p><strong>æ‹¦æˆªæ–¹æ³•ï¼š<code>JSON.parse()</code>ã€<code>JSON.stringify()</code></strong></p>
</li>
<li><p><strong>å“åº”æ•°æ®è¢«åŠ å¯†ï¼š</strong></p>
<ol>
<li>é€šè¿‡ Hook æŠ€æœ¯æ‹¦æˆª <strong><code>JSON.parse</code></strong> çš„è°ƒç”¨ï¼Œç›‘è§† <strong><code>JSON.parse()</code></strong> çš„å‚æ•°å³åŠ å¯†æ•°æ®çš„å˜åŒ–ï¼Œ<strong>æ—¢è°ƒè¯•è‡³æ˜æ–‡æ•°æ®å‡ºç°æ—¶å‘ä¸Šè·Ÿä¸€ä¸ªæ ˆååˆ†æä»£ç ï¼Œä¹Ÿå¯ä»¥è°ƒè¯•è‡³å¯†æ–‡æ•°æ®å‡ºç°æ—¶å‘ä¸‹è°ƒè¯•</strong>ï¼ˆ<a class="link"   href="https://fanyi.youdao.com/index.html#/"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</li>
<li>é€šè¿‡ <strong>XHR æ–­ç‚¹å®šä½</strong>è§£å¯†ä½ç½®ï¼ŒåŸç†æ˜¯å› ä¸ºåœ¨ ajax è°ƒç”¨æ—¶ï¼Œå‘é€è¯·æ±‚ send ä¹‹å‰ï¼Œä¼šé€šè¿‡ <strong>success: ã€.thenã€done</strong> æ–¹æ³•è®¾ç½®è¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼Œåˆ™å¯ä»¥å®šä½åˆ°æ•°æ®è§£å¯†çš„ä½ç½®ï¼ˆ<a class="link"   href="https://www.endata.com.cn/BoxOffice/BO/Month/oneMonth.html"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</li>
<li><strong>å“åº”æ•°æ®åŠ å¯†åªå¯èƒ½é€šè¿‡å¯¹ç§°åŠ å¯†ç®—æ³•æˆ–éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œ</strong>å› ä¸ºå“ˆå¸Œç®—æ³•æ˜¯ä¸å¯é€†çš„ï¼Œåªæœ‰å¯¹ç§°ä¸éå¯¹ç§°ç®—æ³•æ˜¯å¯é€†çš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡**æœç´¢å…³é”®å­— <code>decrypt</code>ã€<code>decrypt(</code>ã€<code>des</code> <strong>å®šä½è§£å¯†ï¼Œ</strong><code>encrypt</code>**å®šä½åŠ å¯†</li>
</ol>
</li>
<li><p><strong>è¯·æ±‚è½½è·å‚æ•°åŠ å¯†ï¼š</strong>é€šè¿‡ Hook æŠ€æœ¯æ‹¦æˆª <strong><code>JSON.stringify</code></strong> çš„è°ƒç”¨ï¼Œç›‘è§† <strong><code>JSON.stringify()</code></strong> çš„å‚æ•°å³åŠ å¯†æ•°æ®çš„å˜åŒ–ï¼Œå‘ä¸Šè·Ÿæ ˆæ‰¾åˆ°å‚æ•°åŠ å¯†çš„ä½ç½®ï¼Œ<strong>åœ¨å‚æ•°ç”Ÿæˆçš„ä½ç½®æ‰“ä¸Šæ–­ç‚¹è°ƒè¯•</strong>ï¼ˆ<a class="link"   href="https://www.hh1024.com/#/ranklist/ranklist"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var _parse = JSON.parse;</span><br><span class="line">    JSON.parse = function (params) &#123;</span><br><span class="line">        console.log(&quot;è§£ææ•°æ®:&quot;, params);</span><br><span class="line">        // è¿™é‡Œå¯ä»¥æ·»åŠ å…¶ä»–é€»è¾‘æ¯”å¦‚ debugger</span><br><span class="line">        debugger</span><br><span class="line">        return _parse(params);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="6-hook-cookie"><a href="#6-hook-cookie" class="headerlink" title="6. hook cookie"></a>6. hook cookie</h3><ul>
<li><strong>æ‹¦æˆªæ–¹æ³•ï¼š<code>Object.defineProperty(obj, prop, descriptor)</code></strong><ul>
<li><strong>ä½œç”¨ï¼š</strong>ç”¨äºå®šä¹‰æˆ–ä¿®æ”¹ï¼ˆæ›¿æ¢ï¼‰å¯¹è±¡çš„å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡</li>
<li><strong>å‚æ•°objï¼š</strong>ç›®æ ‡å¯¹è±¡</li>
<li><strong>å‚æ•°propï¼š</strong>ç›®æ ‡å¯¹è±¡çš„è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§</li>
<li><strong>å‚æ•°descriptorï¼š</strong>æè¿°ç¬¦å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®šå±æ€§çš„å€¼ã€å¯å†™æ€§ç­‰ï¼Œè¿˜å¯ä»¥å®šä¹‰ setter å’Œ getter æ–¹æ³•</li>
</ul>
</li>
<li><strong>cookiesè¢«åŠ å¯†ï¼š</strong>æ³¨æ„ cookie æ˜¯å±äº document å¯¹è±¡çš„å±æ€§ï¼Œå³ **<code>document.cookie</code>**ã€‚é€šè¿‡ Hook æŠ€æœ¯æ‹¦æˆªå‰éœ€è¦å…ˆæ¸…é™¤æµè§ˆå™¨Cookieï¼ˆ<a class="link"   href="http://q.10jqka.com.cn/"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var cookie_data = document.cookie;</span><br><span class="line">    Object.defineProperty(document, &#x27;cookie&#x27;, &#123;</span><br><span class="line">        set: function (new_cookie) &#123;</span><br><span class="line">            // åˆ¤æ–­è®¾ç½®çš„cookieä¸­æ˜¯å¦å­˜åœ¨è¢«åŠ å¯†å€¼çš„é”®ï¼Œå­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œä¸å­˜åœ¨è¿”å›-1</span><br><span class="line">            if (new_cookie.indexOf(&#x27;v&#x27;) != -1) &#123;</span><br><span class="line">                debugger</span><br><span class="line">            &#125;</span><br><span class="line">            cookie_data = new_cookie;</span><br><span class="line">        &#125;,</span><br><span class="line">        get: function () &#123;</span><br><span class="line">            return cookie_data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="7-hook-è¯·æ±‚-å“åº”æ‹¦æˆªå™¨"><a href="#7-hook-è¯·æ±‚-å“åº”æ‹¦æˆªå™¨" class="headerlink" title="7. hook è¯·æ±‚&#x2F;å“åº”æ‹¦æˆªå™¨"></a>7. hook è¯·æ±‚&#x2F;å“åº”æ‹¦æˆªå™¨</h3><blockquote>
<p><strong>å¼•å…¥ï¼š</strong>å½“é€šè¿‡ XHR open Hook å®šä½åŠ å¯†æ—¶ï¼Œ<strong>è·Ÿæ ˆåˆ°äº†å¼‚æ­¥å¸§</strong>ï¼Œæ­¤æ—¶åˆ™éœ€è¦è€ƒè™‘é€šè¿‡å¯»æ‰¾ æ‹¦æˆªå™¨ å»å®šä½åŠ å¯†</p>
<p><strong>è°ƒè¯•æ€è·¯ï¼š</strong></p>
<ol>
<li><strong>æ€è·¯1 - æ‰¾å“åº”æ‹¦æˆªå™¨ï¼š</strong>è°ƒè¯•ç›®çš„æ˜¯å¯»æ‰¾åŠ å¯†ä½ç½®ï¼Œè€ŒåŠ å¯†ä½ç½®æ˜¯åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­ï¼Œä½†è¯·æ±‚æ‹¦æˆªå™¨åˆåœ¨å¼‚æ­¥ä¸­ï¼Œ<strong>é€šè¿‡ Hook XHR open å‘èµ·è¯·æ±‚çš„ debugger å¤„å¼€å§‹è°ƒè¯•ï¼Œæ­¤æ—¶åŠ å¯†å‚æ•°å·²ç»ç”Ÿæˆï¼Œè¯´æ˜æ˜¯å·²ç»ç»è¿‡äº†è¯·æ±‚æ‹¦æˆªå™¨ï¼Œ</strong>æ­¤æ—¶æ— æ³•å†é€šè¿‡è°ƒè¯•è¿›å…¥å¼‚æ­¥ä»£ç ä¸­çš„è¯·æ±‚æ‹¦æˆªå™¨äº†ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ®è¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨é€šå¸¸<strong>æˆå¯¹å‡ºç°</strong>çš„è§„åˆ™ï¼Œé€šè¿‡å®šä½å“åº”æ‹¦æˆªå™¨ï¼Œä»è€Œæ‰¾åˆ°è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆ<strong>æ³¨æ„å¹¶ä¸æ˜¯æ‰€æœ‰ç½‘ç«™éƒ½æœ‰æ‹¦æˆªå™¨çš„ï¼Œä½†æ˜¯åªè¦æœ‰æ‹¦æˆªå™¨ï¼Œé‚£ä¹ˆ Hook XHR open å¹¶å¾€ä¸‹è°ƒè¯•ä¸€å®šä¼šç»è¿‡å“åº”æ‹¦æˆªå™¨</strong>ï¼‰</li>
<li><strong>æ€è·¯2 - æ‰¾è¯·æ±‚æ‹¦æˆªå™¨ï¼š</strong>ä»å¼‚æ­¥å¸§çš„ä¸Šä¸€å¸§å¼€å§‹å¾€ä¸‹è°ƒè¯•ï¼Œæ­¤æ—¶å‚æ•°è¿˜æ²¡æœ‰è¢«åŠ å¯†ï¼Œæ‰€ä»¥åªéœ€ä¸€æ­¥æ­¥è°ƒè¯•å°±å¯ä»¥è¿›å…¥åˆ°å¼‚æ­¥ä»£ç ä¸­çš„è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆ<strong>è°ƒè¯•è¿‡ç¨‹ä¸­æ—¶åˆ»è§‚å¯Ÿæ•°æ®å€¼æ˜¯å¦è¢«åŠ å¯†ï¼Œç¡®å®šåŠ å¯†ä½ç½®</strong>ï¼‰</li>
</ol>
<p><strong>jsåŠ è½½æ‰§è¡Œæ–¹å¼ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åŠ è½½js --&gt; è§¦å‘è¯·æ±‚æ¥å£(ajax) --&gt; æ„é€ è¯·æ±‚å¯¹è±¡ --&gt;ã€è¯·æ±‚æ‹¦æˆªå™¨ã€‘--&gt; å‘é€XHRè¯·æ±‚(Hook XHR open) --&gt; è¿”å›æ•°æ® --&gt;ã€å“åº”æ‹¦æˆªå™¨ã€‘</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p><strong>è¯·æ±‚æ‹¦æˆªå™¨ï¼š</strong>åœ¨å®é™…è¯·æ±‚è¢«å‘é€ä¹‹å‰ä¿®æ”¹è¯·æ±‚çš„é…ç½®ï¼ŒåŒ…æ‹¬æ·»åŠ è®¤è¯ä¿¡æ¯ã€ä¿®æ”¹è¯·æ±‚å¤´ã€è¯·æ±‚å‚æ•°<strong>åŠ å¯†</strong>ç­‰</p>
</li>
<li><p><strong>å“åº”æ‹¦æˆªå™¨ï¼š</strong>åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”åï¼Œç»“æœè¿”å›ä¹‹å‰ä¿®æ”¹å“åº”çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®æ ¼å¼åŒ–å¤„ç†ã€å‚æ•°<strong>è§£å¯†</strong>ç­‰</p>
</li>
<li><p><strong>æ³¨æ„ï¼šæ‹¦æˆªå™¨ä¸æ˜¯ Hook ä»£ç æ®µï¼Œè€Œæ˜¯é€šè¿‡è¯·æ±‚çš„ XHR open Hook è¿›è¡Œ debugger è°ƒè¯•è·Ÿæ ˆï¼Œå®šä½æ‹¦æˆªå™¨</strong></p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var axios = require(&#x27;axios&#x27;)</span><br><span class="line"></span><br><span class="line">// è¯·æ±‚æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">    console.log(&#x27;è¯·æ±‚æ‹¦æˆªå™¨ æˆåŠŸ&#x27;);</span><br><span class="line">    // åŠ å¯†é€»è¾‘</span><br><span class="line">    config.headers[&#x27;sign&#x27;] = &#x27;fkehdjfsdjfiowhek&#x27;;</span><br><span class="line">    return config;</span><br><span class="line">&#125;, function (error) &#123;</span><br><span class="line">    console.log(&#x27;è¯·æ±‚æ‹¦æˆªå™¨ å¤±è´¥&#x27;);</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å“åº”æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">    console.log(&#x27;å“åº”æ‹¦æˆªå™¨ æˆåŠŸ&#x27;);</span><br><span class="line">    // è§£å¯†é€»è¾‘</span><br><span class="line">    return response;</span><br><span class="line">&#125;, function (error) &#123;</span><br><span class="line">    console.log(&#x27;å“åº”æ‹¦æˆªå™¨ å¤±è´¥&#x27;);</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//å‘é€è¯·æ±‚</span><br><span class="line">axios.get(&#x27;http://httpbin.org/get&#x27;).then(res =&gt; console.log(res))</span><br></pre></td></tr></table></figure>

<h3 id="8-hook-XHR-headers"><a href="#8-hook-XHR-headers" class="headerlink" title="8. hook XHR headers"></a>8. hook XHR headers</h3><ul>
<li><strong>æ‹¦æˆªæ–¹æ³•ï¼š<code>window.XMLHttpRequest.prototype.setRequestHeader(key, value)</code></strong><ul>
<li><strong>ä½œç”¨ï¼š</strong>æ˜¯ XMLHttpRequest å¯¹è±¡çš„åŸå‹é“¾ä¸Šçš„æ–¹æ³•ä¹‹ä¸€ï¼Œç”¨äºè®¾ç½® HTTP è¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯</li>
<li><strong>å‚æ•°keyï¼š</strong>è¡¨ç¤ºè¦è®¾ç½®çš„ HTTP å¤´éƒ¨çš„åç§°</li>
<li><strong>å‚æ•°valueï¼š</strong>è¡¨ç¤ºè¦è®¾ç½®çš„ HTTP å¤´éƒ¨çš„å€¼</li>
</ul>
</li>
<li><strong>headerså‚æ•°å€¼è¢«åŠ å¯†ï¼šæ³¨æ„ setRequestHeader æ–¹æ³•æ˜¯åœ¨ open ä¹‹åã€send ä¹‹å‰è°ƒç”¨çš„</strong>ï¼ˆ<a class="link"   href="https://www.qimai.cn"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</li>
<li><strong>headerså‚æ•°é”®å€¼éƒ½è¢«åŠ å¯†ï¼š</strong>ç”±äºæ­¤æ—¶å‚æ•°çš„é”®åä¹Ÿè¢«åŠ å¯†äº†ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡ Hook å…³é”®å­—å®šä½äº†ï¼Œåªèƒ½ç›´æ¥ Hook setRequestHeaderï¼Œä½†æ˜¯è¿™å°†ä¼š Hook åˆ°å…¨éƒ¨çš„å‚æ•°ä¿¡æ¯ï¼Œå¯ä»¥<strong>è°ƒè¯•è‡³åŠ å¯†å‚æ•°å‡ºç°åå†è·Ÿæ ˆå®šä½</strong>ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡<strong>XHRæ–­ç‚¹å®šä½</strong>åŠ å¯†ä½ç½®ï¼Œå› ä¸º <strong>setRequestHeader æ–¹æ³•æ˜¯åœ¨ open ä¹‹åã€send ä¹‹å‰è°ƒç”¨çš„</strong>ï¼Œ<a class="link"   href="https://www.qcc.com/web/search?key=%E4%B8%87%E8%BE%BE%E9%9B%86%E5%9B%A2"  target="_blank" rel="noopener">æµ‹è¯•ç½‘ç«™<i class="fas fa-external-link-alt"></i></a>ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var org = window.XMLHttpRequest.prototype.setRequestHeader;</span><br><span class="line">    window.XMLHttpRequest.prototype.setRequestHeader = function (key, value) &#123;</span><br><span class="line">        if (key == &#x27;&#x27;) &#123;</span><br><span class="line">            debugger</span><br><span class="line">        &#125;</span><br><span class="line">        return org.apply(this, arguments);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="9-å¿«é€Ÿæ‰¹é‡-hook-ç¢°æ’"><a href="#9-å¿«é€Ÿæ‰¹é‡-hook-ç¢°æ’" class="headerlink" title="9. å¿«é€Ÿæ‰¹é‡ hook ç¢°æ’"></a>9. å¿«é€Ÿæ‰¹é‡ hook ç¢°æ’</h3><ul>
<li><strong>å¿«é€Ÿ hook æ¡†æ¶ï¼š</strong>å¿«é€Ÿè°ƒç”¨ hook æ–¹æ³•å®ç° hookï¼ŒåŒæ—¶ä¼ªé€ å‡½æ•° toStringï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">// ä¿æŠ¤ä¼ªé€ å‡½æ•°toString</span><br><span class="line">(() =&gt; &#123;</span><br><span class="line">    const $toString = Function.toString</span><br><span class="line">    const random_toString_symbol = Symbol(&#x27;(&#x27;.concat(&#x27;&#x27;, &#x27;)_&#x27;, (Math.random()) + &#x27;&#x27;).toString(36))</span><br><span class="line">    const myToString = function () &#123;</span><br><span class="line">        return typeof this === &#x27;function&#x27; &amp;&amp; this[random_toString_symbol] || $toString.call(this)</span><br><span class="line">    &#125;</span><br><span class="line">    function set_native(func, key, value) &#123;</span><br><span class="line">        Object.defineProperty(func, key, &#123;</span><br><span class="line">            enumerable: false,</span><br><span class="line">            configurable: true,</span><br><span class="line">            writable: true,</span><br><span class="line">            value: value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    delete Function.prototype.toString</span><br><span class="line">    set_native(Function.prototype, &quot;toString&quot;, myToString)</span><br><span class="line">    set_native(Function.prototype.toString, random_toString_symbol, &quot;function toString() &#123; [native code] &#125;&quot;)</span><br><span class="line">    globalThis.func_set_native = (func) =&gt; &#123;</span><br><span class="line">        random_toString_symbol</span><br><span class="line">        set_native(func, random_toString_symbol, `function $&#123;func.name || &#x27;&#x27;&#125;() &#123; [native code] &#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).call(this);</span><br><span class="line"></span><br><span class="line">// hook å‡½æ•°å®ç°</span><br><span class="line">Function.prototype.hook = function (</span><br><span class="line">    context = globalThis,</span><br><span class="line">    functionName,  // åŒ¿åå‡½æ•°éœ€è¦æŒ‡å®šå’Œ ä¸Šä¸‹æ–‡çš„è°ƒç”¨å¯¹è±¡ ä¸€æ ·çš„åç§°</span><br><span class="line">    onEnter = (ctx, funcname, mythis) =&gt; console.log(`ã€$&#123;funcname&#125;ã€‘onEnter --&gt;`, mythis, ctx.args),</span><br><span class="line">    onLeave = (retval, funcname) =&gt; console.log(`ã€$&#123;funcname&#125;ã€‘onLeave --&gt;`, retval),</span><br><span class="line">) &#123;</span><br><span class="line">    const targetFunction = this;</span><br><span class="line">    const originalName = targetFunction.name || functionName;</span><br><span class="line">    if (!originalName) &#123;</span><br><span class="line">        console.error(&quot;hook function name is empty!&quot;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // åˆ›å»º hook å°è£…å‡½æ•°</span><br><span class="line">    const hookedFunction = function (...args) &#123;</span><br><span class="line">        const ctx = &#123; args &#125;;  // å‚æ•°ä¸Šä¸‹æ–‡</span><br><span class="line">        onEnter(ctx, originalName, this);</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨åŸå§‹å‡½æ•°å¹¶æ•è·è¿”å›å€¼ï¼Œè¿™é‡Œçš„ this -&gt; window å…¨å±€å¯¹è±¡</span><br><span class="line">        const retval = targetFunction.apply(this, ctx.args);</span><br><span class="line">        return onLeave(retval, originalName) || retval;  // è°ƒç”¨ç¦»å¼€é’©å­ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æ›´æ”¹è¿”å›å€¼</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // å°†åŸå§‹å‡½æ•°ä¼ªè£…æˆåŸç”Ÿæ ¼å¼</span><br><span class="line">    Object.defineProperty(hookedFunction, &quot;name&quot;, &#123; value: originalName &#125;);</span><br><span class="line">    func_set_native(hookedFunction);</span><br><span class="line"></span><br><span class="line">    // å°† hooked å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šä¸Šä¸‹æ–‡</span><br><span class="line">    context[originalName] = hookedFunction;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// ------------------ æµ‹è¯•ä»£ç  ------------------</span><br><span class="line">// btoa.hook(undefined, undefined, window);</span><br><span class="line">// btoa(&quot;123&quot;);</span><br><span class="line"></span><br><span class="line">// JSON.stringify.hook(undefined, undefined, JSON);</span><br><span class="line">// JSON.stringify(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// var bbb = &#123;&#125;;</span><br><span class="line">// bbb.b = function (s) &#123; return s + 1 &#125;;</span><br><span class="line">// bbb.b.hook(undefined, undefined, bbb, &quot;b&quot;);</span><br><span class="line">// bbb.b(123)</span><br><span class="line"></span><br><span class="line">// åœ¨å¿«é€Ÿ hook æ¡†æ¶çš„åŸºç¡€ä¸Šï¼Œå®ç°å¯¹æŸäº› API æ‰¹é‡æ·»åŠ  hook æ–¹æ³•</span><br><span class="line">let String_hook_Array = Object.getOwnPropertyDescriptors(String)</span><br><span class="line">let String_prototype_hook_Array = Object.getOwnPropertyDescriptors(String.prototype)</span><br><span class="line"></span><br><span class="line">for (const key in String_hook_Array) &#123;</span><br><span class="line">    let value = String_hook_Array[key]</span><br><span class="line">    if (value[&quot;writable&quot;] &amp;&amp; typeof value.value === &quot;function&quot;) &#123;</span><br><span class="line">        console.log(key);</span><br><span class="line">        value.value.hook(String);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">for (const key in String_prototype_hook_Array) &#123;</span><br><span class="line">    let value = String_prototype_hook_Array[key]</span><br><span class="line">    if (value[&quot;writable&quot;] &amp;&amp; typeof value.value === &quot;function&quot;</span><br><span class="line">        &amp;&amp; key !== &quot;toString&quot; &amp;&amp; key !== &quot;concat&quot;</span><br><span class="line">    ) &#123;</span><br><span class="line">        console.log(key);</span><br><span class="line">        value.value.hook(String.prototype);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(&quot;enum hook start&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å®Œæ•´æ¡†æ¶ï¼šåœ¨å¿«é€Ÿ hook æ¡†æ¶çš„åŸºç¡€ä¸Šï¼Œå®ç°å¯¹æŸäº› API æ‰¹é‡æ·»åŠ  hook æ–¹æ³•</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">// ä¿æŠ¤ä¼ªé€ å‡½æ•°toString</span><br><span class="line">(() =&gt; &#123;</span><br><span class="line">    const $toString = Function.toString</span><br><span class="line">    const random_toString_symbol = Symbol(&#x27;(&#x27;.concat(&#x27;&#x27;, &#x27;)_&#x27;, (Math.random()) + &#x27;&#x27;).toString(36))</span><br><span class="line">    const myToString = function () &#123;</span><br><span class="line">        return typeof this === &#x27;function&#x27; &amp;&amp; this[random_toString_symbol] || $toString.call(this)</span><br><span class="line">    &#125;</span><br><span class="line">    function set_native(func, key, value) &#123;</span><br><span class="line">        Object.defineProperty(func, key, &#123;</span><br><span class="line">            enumerable: false,</span><br><span class="line">            configurable: true,</span><br><span class="line">            writable: true,</span><br><span class="line">            value: value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    delete Function.prototype.toString</span><br><span class="line">    set_native(Function.prototype, &quot;toString&quot;, myToString)</span><br><span class="line">    set_native(Function.prototype.toString, random_toString_symbol, &quot;function toString() &#123; [native code] &#125;&quot;)</span><br><span class="line">    globalThis.func_set_native = (func) =&gt; &#123;</span><br><span class="line">        random_toString_symbol</span><br><span class="line">        set_native(func, random_toString_symbol, `function $&#123;func.name || &#x27;&#x27;&#125;() &#123; [native code] &#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).call(this);</span><br><span class="line"></span><br><span class="line">// hook å‡½æ•°å®ç°</span><br><span class="line">Function.prototype.hook = function (</span><br><span class="line">    context = globalThis,</span><br><span class="line">    functionName,  // åŒ¿åå‡½æ•°éœ€è¦æŒ‡å®šå’Œ ä¸Šä¸‹æ–‡çš„è°ƒç”¨å¯¹è±¡ ä¸€æ ·çš„åç§°</span><br><span class="line">    onEnter = (ctx, funcname, mythis) =&gt; console.log(`ã€$&#123;funcname&#125;ã€‘onEnter --&gt;`, mythis, ctx.args),</span><br><span class="line">    onLeave = (retval, funcname) =&gt; console.log(`ã€$&#123;funcname&#125;ã€‘onLeave --&gt;`, retval),</span><br><span class="line">) &#123;</span><br><span class="line">    const targetFunction = this;</span><br><span class="line">    const originalName = targetFunction.name || functionName;</span><br><span class="line">    if (!originalName) &#123;</span><br><span class="line">        console.error(&quot;hook function name is empty!&quot;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // åˆ›å»º hook å°è£…å‡½æ•°</span><br><span class="line">    const hookedFunction = function (...args) &#123;</span><br><span class="line">        const ctx = &#123; args &#125;;  // å‚æ•°ä¸Šä¸‹æ–‡</span><br><span class="line">        onEnter(ctx, originalName, this);</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨åŸå§‹å‡½æ•°å¹¶æ•è·è¿”å›å€¼ï¼Œè¿™é‡Œçš„ this -&gt; window å…¨å±€å¯¹è±¡</span><br><span class="line">        const retval = targetFunction.apply(this, ctx.args);</span><br><span class="line">        return onLeave(retval, originalName) || retval;  // è°ƒç”¨ç¦»å¼€é’©å­ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æ›´æ”¹è¿”å›å€¼</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // å°†åŸå§‹å‡½æ•°ä¼ªè£…æˆåŸç”Ÿæ ¼å¼</span><br><span class="line">    Object.defineProperty(hookedFunction, &quot;name&quot;, &#123; value: originalName &#125;);</span><br><span class="line">    func_set_native(hookedFunction);</span><br><span class="line"></span><br><span class="line">    // å°† hooked å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šä¸Šä¸‹æ–‡</span><br><span class="line">    context[originalName] = hookedFunction;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// å®ç°é»‘åå•ã€ç™½åå•ï¼Œå¿«é€Ÿ Hook æ¡†æ¶</span><br><span class="line">function batchHook(HookObj, BlackList = [], WhiteList = []) &#123;</span><br><span class="line">    // ç¡®ä¿ BlackList å’Œ WhiteList æ˜¯æ•°ç»„</span><br><span class="line">    function startHook(Descriptors, HookObj) &#123;</span><br><span class="line">        for (const descriptorsKey in Descriptors) &#123;</span><br><span class="line">            let value = Descriptors[descriptorsKey]</span><br><span class="line">            let rawFunc = value[&quot;value&quot;]</span><br><span class="line">            if (</span><br><span class="line">                typeof rawFunc === &quot;function&quot;</span><br><span class="line">                &amp;&amp; value[&quot;writable&quot;]</span><br><span class="line">                &amp;&amp; !BlackList.includes(descriptorsKey)</span><br><span class="line">                &amp;&amp; (WhiteList.length ? WhiteList.includes(descriptorsKey) : true)</span><br><span class="line">            ) &#123;</span><br><span class="line">                console.log(descriptorsKey);</span><br><span class="line">                rawFunc.hook(HookObj);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let HookObjDescriptors = Object.getOwnPropertyDescriptors(HookObj);</span><br><span class="line">    startHook(HookObjDescriptors, HookObj);</span><br><span class="line"></span><br><span class="line">    // å¦‚æœå¯¹è±¡æœ‰åŸå‹é“¾ï¼Œå¤„ç†åŸå‹é“¾ä¸Šçš„æ–¹æ³•</span><br><span class="line">    if (HookObj.prototype) &#123;</span><br><span class="line">        let HookObjPrototypeDescriptors = Object.getOwnPropertyDescriptors(HookObj.prototype);</span><br><span class="line">        startHook(HookObjPrototypeDescriptors, HookObj.prototype);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// -------- å®ä¾‹æµ‹è¯• --------</span><br><span class="line">// batchHook(String, [&quot;toString&quot;, &quot;concat&quot;], [&quot;fromCharCode&quot;]);</span><br><span class="line">batchHook(String, [&quot;toString&quot;, &quot;concat&quot;]);</span><br></pre></td></tr></table></figure>

<h2 id="ä¹ã€Hook-åè°ƒè¯•ç»•è¿‡"><a href="#ä¹ã€Hook-åè°ƒè¯•ç»•è¿‡" class="headerlink" title="ä¹ã€Hook åè°ƒè¯•ç»•è¿‡"></a>ä¹ã€Hook åè°ƒè¯•ç»•è¿‡</h2><h3 id="1-ä¿æŠ¤-console-API"><a href="#1-ä¿æŠ¤-console-API" class="headerlink" title="1. ä¿æŠ¤ console API"></a>1. ä¿æŠ¤ console API</h3><blockquote>
<p><strong>é˜²æ­¢åè°ƒè¯•ç½®ç©º console ç›¸å…³ APIï¼š</strong>é”å®š console å¯¹è±¡ä¸­çš„å¯å†™ä¸”å¯é…ç½®çš„å±æ€§ï¼Œé˜²æ­¢å®ƒä»¬åœ¨è¿è¡Œæ—¶è¢«ä¿®æ”¹</p>
<p>æ²¹çŒ´è„šæœ¬éœ€è¦åœ¨æœ€æ—©æ—¶æœºè¿›è¡Œæ³¨å…¥ï¼š<code>// @run-at       document-start</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">console.clear = function () &#123; &#125;;</span><br><span class="line">Object.getOwnPropertyNames(console).forEach(key =&gt; &#123;</span><br><span class="line">    const descriptor = Object.getOwnPropertyDescriptor(console, key);</span><br><span class="line">    if (descriptor.writable &amp;&amp; descriptor.configurable) &#123;</span><br><span class="line">        Object.defineProperty(console, key, &#123;</span><br><span class="line">            value: console[key],</span><br><span class="line">            configurable: false,</span><br><span class="line">            writable: false,</span><br><span class="line">            enumerable: true</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-å¼•å…¥-Symbol-å¯¹è±¡"><a href="#2-å¼•å…¥-Symbol-å¯¹è±¡" class="headerlink" title="2. å¼•å…¥ Symbol å¯¹è±¡"></a>2. å¼•å…¥ Symbol å¯¹è±¡</h3><blockquote>
<p>Symbol æ˜¯ ES6 å¼•å…¥çš„ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„æ ‡è¯†ç¬¦ã€‚ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸åŒçš„æ˜¯ï¼ŒSymbol å€¼æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½ä¸å…¶ä»–å€¼ç›¸ç­‰ï¼Œå“ªæ€•æ˜¯ä¸¤ä¸ªå…·æœ‰ç›¸åŒæè¿°çš„ Symbolï¼ˆå¸¸ç”¨äºåœ¨å¯¹è±¡ä¸­æ·»åŠ ç§æœ‰å±æ€§æˆ–æ–¹æ³•ï¼Œä»¥é¿å…å‘½åå†²çªï¼‰</p>
</blockquote>
<ul>
<li><p>Symbol å¯¹è±¡ç”¨æ³•ï¼š</p>
<ol>
<li><p><strong>åˆ›å»º Symbolï¼š</strong>åˆ›å»º Symbol æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²ä½œä¸ºæè¿°ï¼Œä¾¿äºè°ƒè¯•æ—¶è¯†åˆ«ã€‚æ¯æ¬¡åˆ›å»ºçš„ Symbol å€¼éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå³ä½¿æè¿°ç›¸åŒï¼Œä¹Ÿä¸ä¼šç›¸ç­‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const sym1 = Symbol(&#x27;description&#x27;);</span><br><span class="line">const sym2 = Symbol(&#x27;description&#x27;);</span><br><span class="line"></span><br><span class="line">console.log(sym1 === sym2); // falseï¼Œæ¯ä¸ª Symbol éƒ½æ˜¯å”¯ä¸€çš„</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨ Symbol ä½œä¸ºå¯¹è±¡çš„é”®ï¼š</strong>Symbol ç»å¸¸è¢«ç”¨ä½œå¯¹è±¡çš„é”®ï¼Œé€‚åˆè¡¨ç¤ºç§æœ‰å±æ€§ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šåœ¨æ™®é€šçš„å¯¹è±¡éå†ï¼ˆå¦‚ forâ€¦inã€Object.keysï¼‰ä¸­å‡ºç°ã€‚ç”±äº mySymbol çš„å”¯ä¸€æ€§ï¼Œè¿™ç§åšæ³•é¿å…äº†ä¸å…¶ä»–é”®åå†²çªçš„é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const mySymbol = Symbol(&#x27;myKey&#x27;);</span><br><span class="line">const obj = &#123;</span><br><span class="line">    [mySymbol]: &#x27;Symbol value&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(obj[mySymbol]); // &quot;Symbol value&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å…¨å±€ Symbol æ³¨å†Œè¡¨ï¼š</strong>é€šè¿‡<code>Symbol.for</code>å’Œ<code>Symbol.keyFor</code>ï¼Œå¯ä»¥åˆ›å»ºå’Œä½¿ç”¨å…¨å±€æ³¨å†Œçš„ Symbolã€‚<code>Symbol.for</code>ä¼šå…ˆåœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å·²æœ‰è¯¥æè¿°çš„ Symbolï¼Œå¦‚æœæœ‰åˆ™è¿”å›è¿™ä¸ªå·²å­˜åœ¨çš„ Symbolï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const globalSym1 = Symbol.for(&#x27;sharedKey&#x27;);</span><br><span class="line">const globalSym2 = Symbol.for(&#x27;sharedKey&#x27;);</span><br><span class="line"></span><br><span class="line">console.log(globalSym1 === globalSym2); // trueï¼Œå…±äº«å…¨å±€ Symbol</span><br><span class="line">console.log(Symbol.keyFor(globalSym1)); // &#x27;sharedKey&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å†…ç½® Symbolï¼š</strong>js æä¾›äº†ä¸€äº›å†…ç½® Symbolï¼Œç”¨äºä¿®æ”¹å¯¹è±¡çš„é»˜è®¤è¡Œä¸ºã€‚è¿™äº›å†…ç½® Symbol éƒ½å­˜å‚¨åœ¨ Symbol å¯¹è±¡ä¸­</p>
<ul>
<li><strong>Symbol.iterator</strong>ï¼šä½¿å¯¹è±¡å¯è¢«è¿­ä»£</li>
<li><strong><span style="color:red;">Symbol.toStringTagï¼šæ›´æ”¹å¯¹è±¡åœ¨ <code>Object.prototype.toString</code> ä¸­çš„è¿”å›ç±»å‹</span></strong></li>
<li><strong>Symbol.hasInstance</strong>ï¼šè‡ªå®šä¹‰ <code>instanceof</code> è¡Œä¸º</li>
<li><strong>Symbol.toPrimitive</strong>ï¼šè‡ªå®šä¹‰å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹å€¼</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨`Symbol.iterator`ä½¿å¯¹è±¡å¯è¢«`for...of`è¿­ä»£</span><br><span class="line">const myIterable = &#123;</span><br><span class="line">    [Symbol.iterator]: function* () &#123;</span><br><span class="line">        yield 1;</span><br><span class="line">        yield 2;</span><br><span class="line">        yield 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">for (let value of myIterable) &#123;</span><br><span class="line">    console.log(value); // 1, 2, 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šæ¯ä¸ª Symbol å€¼éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„</li>
<li><strong>ä¸å¯éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²</strong>ï¼šSymbol ä¸èƒ½ä¸å­—ç¬¦ä¸²ç›´æ¥æ‹¼æ¥</li>
<li><strong>ä¸å¯æšä¸¾</strong>ï¼šSymbol é”®çš„å±æ€§ä¸ä¼šå‡ºç°åœ¨æ™®é€šçš„éå†ï¼ˆå¦‚<code>for...in</code>ã€<code>Object.keys</code>ï¼‰ä¸­ã€‚å¯ä»¥ä½¿ç”¨ <code>Object.getOwnPropertySymbols</code> æ¥è·å–å¯¹è±¡ä¸­çš„ Symbol å±æ€§</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const sym = Symbol(&#x27;desc&#x27;);</span><br><span class="line">console.log(&#x27;Symbol is &#x27; + sym); // æŠ¥é”™ï¼Œä¸èƒ½éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br><span class="line">console.log(`Symbol is $&#123;String(sym)&#125;`); // å¯ä»¥é€šè¿‡ String() æ˜¾å¼è½¬æ¢</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="3-ä¼ªé€ å‡½æ•°-toString"><a href="#3-ä¼ªé€ å‡½æ•°-toString" class="headerlink" title="3. ä¼ªé€ å‡½æ•° toString"></a>3. ä¼ªé€ å‡½æ•° toString</h3><blockquote>
<p>ä½¿ç”¨æ²¹çŒ´è„šæœ¬æœ€å¥½åˆ é™¤<strong>ä¸¥æ ¼æ¨¡å¼ï¼š</strong><code>&#39;use strict&#39;;</code></p>
<p><strong>Symbol.toStringTagï¼š</strong>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å†…ç½® Symbolï¼Œåœ¨ js ä¸­ç”¨äºæ§åˆ¶å¯¹è±¡åœ¨ <strong><code>Object.prototype.toString.call()</code></strong> ä¸­çš„æ˜¾ç¤ºæ ‡ç­¾ã€‚å®ƒå…è®¸ä½ è‡ªå®šä¹‰å¯¹è±¡çš„ <code>[object ...]</code> æ ¼å¼ï¼Œä»è€Œæ›´æ”¹ <code>Object.prototype.toString()</code> æ–¹æ³•è¿”å›çš„å¯¹è±¡ç±»å‹æè¿°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Object.prototype.toString.call(navigator); // &#x27;[object Navigator]&#x27;</span><br><span class="line">Navigator.prototype[Symbol.toStringTag]; // &#x27;Navigator&#x27;</span><br><span class="line"></span><br><span class="line">const myObject = &#123;</span><br><span class="line">[Symbol.toStringTag]: &#x27;MyCustomObject&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(Object.prototype.toString.call(myObject)); // &quot;[object MyCustomObject]&quot;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Function å’Œ Object çš„å…³ç³»ï¼š</strong>Function æ˜¯ Object çš„ä¸€ä¸ªå­ç±»å‹ï¼Œæ‰€æœ‰çš„å‡½æ•°å®é™…ä¸Šä¹Ÿæ˜¯å¯¹è±¡ã€‚è¿™ä¸¤ç§ toString æ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬åˆ†åˆ«é€‚ç”¨äºä¸åŒç±»å‹çš„å¯¹è±¡å¹¶ä¸”è¿”å›ä¸åŒçš„æ ¼å¼</p>
<ol>
<li><p><strong><code>Function.prototype.toString</code>ï¼š</strong>ç”¨äº<strong>å‡½æ•°å¯¹è±¡</strong>ï¼Œè¿”å›å‡½æ•°çš„æºç å­—ç¬¦ä¸²</p>
<ul>
<li>å½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šå¾—åˆ°ç±»ä¼¼ <code>&quot;function funcnName() &#123; [native code] &#125;&quot;</code> çš„å­—ç¬¦ä¸²</li>
<li>Function.prototype.toString.call(Navigator) è¿”å›çš„æ˜¯ â€œfunction Navigator() { [native code] }â€ï¼Œè¡¨ç¤º Navigator æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå¹¶ä¸”å…¶å®ç°æ˜¯<strong>åŸç”Ÿä»£ç </strong></li>
</ul>
</li>
</ol>
<ul>
<li><strong>æ³¨æ„ï¼š</strong>è¿™ä¸ªæ–¹æ³•ä¸“é—¨é’ˆå¯¹å‡½æ•°ç±»å‹ï¼Œå¦‚æœä½ è°ƒç”¨éå‡½æ•°å¯¹è±¡ï¼Œä¼šæŠ›å‡ºé”™è¯¯</li>
</ul>
<ol start="2">
<li><strong><code>Object.prototype.toString</code>ï¼š</strong>æ˜¯ä¸€ç§é€šç”¨çš„ç±»å‹æ£€æµ‹æ–¹æ³•ï¼Œé€‚ç”¨äºæ‰€æœ‰å¯¹è±¡ç±»å‹ï¼ŒåŒ…æ‹¬<strong>åŸºæœ¬ç±»å‹çš„åŒ…è£…å¯¹è±¡</strong></li>
</ol>
<ul>
<li>è°ƒç”¨æ—¶ä¼šè¿”å› <code>&quot;[object Type]&quot;</code> æ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒType è¡¨ç¤ºå¯¹è±¡çš„ç±»å‹</li>
<li>Object.prototype.toString.call(Navigator) è¿”å› â€œ[object Function]â€ï¼Œè¯´æ˜ Navigator æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡</li>
</ul>
</blockquote>
<ul>
<li><strong>ä½¿ç”¨ Symbol å’Œ Object.defineProperty æ¥ä¼ªè£…å‡½æ•°çš„åŸç”Ÿ toString å®ç°ï¼ˆç­‰ä»·äº hook Function ç»•è¿‡å hook çš„é€šç”¨ç‰ˆï¼‰ï¼š</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// ä¿æŠ¤ä¼ªé€ å‡½æ•° toString</span><br><span class="line">(() =&gt; &#123;</span><br><span class="line">    // 1. ä¿å­˜åŸå§‹çš„ Function.toString æ–¹æ³•å¼•ç”¨ï¼Œç¡®ä¿åœ¨é‡æ–°å®šä¹‰åä¾ç„¶å¯ä»¥è°ƒç”¨åŸå§‹æ–¹æ³•</span><br><span class="line">    const $toString = Function.toString</span><br><span class="line"></span><br><span class="line">    // 2. ä½¿ç”¨ Symbol åˆ›å»ºå”¯ä¸€æ ‡è¯†ç¬¦ myFunction_toString_symbolï¼Œç”¨äºæ ‡è®°ä¼ªè£…çš„ toString è¾“å‡º</span><br><span class="line">    const myFunction_toString_symbol = Symbol(&#x27;(&#x27;.concat(&#x27;&#x27;, &#x27;)_&#x27;, (Math.random()) + &#x27;&#x27;).toString(36))</span><br><span class="line"></span><br><span class="line">    // 3. å®šä¹‰è‡ªå®šä¹‰çš„ myToString æ–¹æ³•</span><br><span class="line">    const myToString = function () &#123;</span><br><span class="line">        // å¦‚æœ this æ˜¯ä¸€ä¸ªå‡½æ•°ä¸”åŒ…å« myFunction_toString_symbol å±æ€§ï¼Œåˆ™è¿”å›ä¼ªè£…å­—ç¬¦ä¸²</span><br><span class="line">        return typeof this === &#x27;function&#x27; &amp;&amp; this[myFunction_toString_symbol] || $toString.call(this)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 4. å®šä¹‰ set_native æ–¹æ³•ï¼Œé€šè¿‡ Object.defineProperty è®¾ç½®ä¸å¯æšä¸¾çš„å±æ€§</span><br><span class="line">    function set_native(func, key, value) &#123;</span><br><span class="line">        Object.defineProperty(func, key, &#123;</span><br><span class="line">            enumerable: false,   // ä¸å¯æšä¸¾ï¼Œå¤–éƒ¨ä»£ç æ— æ³•è½»æ˜“éå†åˆ°</span><br><span class="line">            configurable: true,  // å¯é…ç½®ï¼Œå…è®¸åˆ é™¤æˆ–ä¿®æ”¹</span><br><span class="line">            writable: true,      // å¯å†™ï¼Œå…è®¸é‡æ–°èµ‹å€¼</span><br><span class="line">            value: value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 5. åˆ é™¤åŸæœ‰çš„ Function.prototype.toString æ–¹æ³•</span><br><span class="line">    delete Function.prototype.toString</span><br><span class="line"></span><br><span class="line">    // 6. å°†è‡ªå®šä¹‰çš„ myToString æ–¹æ³•è®¾ä¸ºæ–°çš„ Function.prototype.toString æ–¹æ³•</span><br><span class="line">    set_native(Function.prototype, &quot;toString&quot;, myToString)</span><br><span class="line"></span><br><span class="line">    // 7. ç»™ toString æ–¹æ³•è®¾ç½® myFunction_toString_symbol å±æ€§ï¼Œä¼ªè£…è¾“å‡ºä¸ºâ€œåŸç”Ÿä»£ç â€æ ·å¼</span><br><span class="line">    set_native(Function.prototype.toString, myFunction_toString_symbol, &quot;function toString() &#123; [native code] &#125;&quot;)</span><br><span class="line"></span><br><span class="line">    // 8. å®šä¹‰è¾…åŠ©å‡½æ•° func_set_nativeï¼Œç”¨äºåŠ¨æ€è®¾ç½®ä»»æ„å‡½æ•°çš„ä¼ªè£… toString è¾“å‡º</span><br><span class="line">    globalThis.func_set_native = (func) =&gt; &#123;</span><br><span class="line">        // åŠ¨æ€è®¾ç½®ä¼ å…¥å‡½æ•°çš„ myFunction_toString_symbol å±æ€§ï¼Œä½¿å…¶ toString è¾“å‡ºä¼ªè£…ä¸ºâ€œåŸç”Ÿä»£ç â€æ ·å¼</span><br><span class="line">        set_native(func, myFunction_toString_symbol, `function $&#123;func.name || &#x27;&#x27;&#125;() &#123; [native code] &#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).call(this)</span><br></pre></td></tr></table></figure>

<h3 id="4-å®šæ—¶å™¨-debugger"><a href="#4-å®šæ—¶å™¨-debugger" class="headerlink" title="4. å®šæ—¶å™¨ debugger"></a>4. å®šæ—¶å™¨ debugger</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// hook å®šæ—¶å™¨å‡½æ•° æ›¿æ¢debugger</span><br><span class="line">var teshu_setInterval = setInterval;</span><br><span class="line">var teshu_setTimeout = setTimeout;</span><br><span class="line"></span><br><span class="line">setInterval = function setInterval(code, time) &#123;</span><br><span class="line">    code = code.toString().replace(/debugger/, &quot;&quot;).replace(/function\s*\(\)/, &quot;function aaa()&quot;);</span><br><span class="line">    let result = teshu_setInterval(new Function(code), time);</span><br><span class="line">    console.log(&quot;setInterval: --&gt; &quot;, code, time, result);</span><br><span class="line">    return result;</span><br><span class="line">&#125;;</span><br><span class="line">setTimeout = function setTimeout(code, time) &#123;</span><br><span class="line">    code = code.toString().replace(/debugger/, &quot;&quot;).replace(/function\s*\(\)/, &quot;function aaa()&quot;);</span><br><span class="line">    let result = teshu_setTimeout(new Function(code), time);</span><br><span class="line">    console.log(&quot;setTimeout: --&gt; &quot;, code, time, result);</span><br><span class="line">    return result;</span><br><span class="line">&#125;;</span><br><span class="line">// å…¶ä¸­ result å°±æ˜¯å®šæ—¶å™¨ç¼–å·ï¼Œåœ¨æ‰“å°å‡ºå®šæ—¶å™¨ç¼–å·åï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ clearTimeout æˆ– clearInterval æ¸…é™¤å®šæ—¶å™¨</span><br><span class="line"></span><br><span class="line">// ä¿æŠ¤ä¼ªé€ å‡½æ•°toString</span><br><span class="line">(() =&gt; &#123;</span><br><span class="line">    const $toString = Function.toString</span><br><span class="line">    const random_toString_symbol = Symbol(&#x27;(&#x27;.concat(&#x27;&#x27;, &#x27;)_&#x27;, (Math.random()) + &#x27;&#x27;).toString(36))</span><br><span class="line">    const myToString = function () &#123;</span><br><span class="line">        return typeof this === &#x27;function&#x27; &amp;&amp; this[random_toString_symbol] || $toString.call(this)</span><br><span class="line">    &#125;</span><br><span class="line">    function set_native(func, key, value) &#123;</span><br><span class="line">        Object.defineProperty(func, key, &#123;</span><br><span class="line">            enumerable: false,</span><br><span class="line">            configurable: true,</span><br><span class="line">            writable: true,</span><br><span class="line">            value: value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    delete Function.prototype.toString</span><br><span class="line">    set_native(Function.prototype, &quot;toString&quot;, myToString)</span><br><span class="line">    set_native(Function.prototype.toString, random_toString_symbol, &quot;function toString() &#123; [native code] &#125;&quot;)</span><br><span class="line">    globalThis.func_set_native = (func) =&gt; &#123;</span><br><span class="line">        random_toString_symbol</span><br><span class="line">        set_native(func, random_toString_symbol, `function $&#123;func.name || &#x27;&#x27;&#125;() &#123; [native code] &#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).call(this);</span><br><span class="line"></span><br><span class="line">func_set_native(setInterval);</span><br><span class="line">func_set_native(setTimeout);</span><br></pre></td></tr></table></figure>

<h3 id="5-constructor-debugger"><a href="#5-constructor-debugger" class="headerlink" title="5. constructor debugger"></a>5. constructor debugger</h3><blockquote>
<p><strong>ä¸»è¦æ‹¦æˆª <code>new Function(&quot;debugger&quot;)</code> è¿™ç§æ–¹å¼çš„è°ƒç”¨ï¼Œå³é€šè¿‡æ„é€ å™¨æ— çº¿åŠ¨æ€æ„é€  debugger å‡½æ•°çš„æƒ…å†µ</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let _constructor = constructor;</span><br><span class="line">Function.prototype.constructor = function (s) &#123;</span><br><span class="line">    if (s == &quot;debugger&quot;) &#123;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">    return _constructor(s);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="6-å-debugger-æ¡ˆä¾‹"><a href="#6-å-debugger-æ¡ˆä¾‹" class="headerlink" title="6. å debugger æ¡ˆä¾‹"></a>6. å debugger æ¡ˆä¾‹</h3><ul>
<li>æ£€æµ‹ç½‘ç«™ï¼š<a class="link"   href="https://blog.aepkill.com/demos/devtools-detector/"  target="_blank" rel="noopener">34d2d58d6573507b88bfe5df7d651599<i class="fas fa-external-link-alt"></i></a>ï¼Œç½‘ç«™æºç ï¼š<a class="link"   href="https://github.com/AEPKILL/devtools-detector/tree/master/src/checkers"  target="_blank" rel="noopener">1ffd91d5ec85d5e6d3ab008d32241280<i class="fas fa-external-link-alt"></i></a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// æ²¹çŒ´è„šæœ¬æ³¨å…¥åå®šæ—¶å™¨ debugger è„šæœ¬å³å¯</span><br></pre></td></tr></table></figure>

<h2 id="åã€é€†å‘æŠ€å·§ä¸“é¢˜"><a href="#åã€é€†å‘æŠ€å·§ä¸“é¢˜" class="headerlink" title="åã€é€†å‘æŠ€å·§ä¸“é¢˜"></a>åã€é€†å‘æŠ€å·§ä¸“é¢˜</h2><blockquote>
<p><strong>åŸºç¡€çˆ¬è™«çŸ¥è¯†ï¼š</strong></p>
<ul>
<li>é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®çš„æ–¹å¼æ— æ³•å‘é€ get ä»¥å¤–çš„è¯·æ±‚</li>
<li>å®ç° post è¯·æ±‚æ—¶ï¼Œå‚æ•° data å’Œ headers å°½é‡éƒ½ä½¿ç”¨å…³é”®å­—å®å‚ï¼Œå¦‚æœ data ä¸­æºå¸¦çš„æŸä¸€å­—æ®µå€¼ä¸ºç©ºï¼Œåˆ™éœ€ä½¿ç”¨ç©ºå­—ç¬¦ä¸²â€â€ä»£æ›¿ï¼Œè€Œä¸æ˜¯ None</li>
<li>è¯·æ±‚ç§»åŠ¨ç«¯è·å–çš„æ•°æ®æ¥å£æ—¶ï¼Œè¯·æ±‚å¤´çš„ user-agent ä¹Ÿä¸€å®šè¦ç”¨ç§»åŠ¨ç«¯çš„</li>
</ul>
<p><strong>è¯·æ±‚å‚æ•°æœ€ç»ˆæ˜¯ä»¥ Content-Type å­—æ®µç¡®å®šå‚æ•°ç±»å‹çš„ï¼š</strong></p>
<ul>
<li><strong>getè¯·æ±‚[æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°]ï¼š</strong>æ˜¾ç°çš„ï¼Œéœ€è¦é€šè¿‡ request.get() æ–¹æ³•ä¸­çš„ params å‚æ•°ä¼ é€’ï¼Œå¯ä»¥ä¸å®Œæ•´</li>
<li><strong>postè¯·æ±‚[è¡¨å•æ•°æ®]ï¼š</strong>éšè—çš„ï¼Œéœ€è¦é€šè¿‡ request.post() æ–¹æ³•ä¸­çš„ data å‚æ•°ä¼ é€’ï¼Œå¿…é¡»å®Œæ•´</li>
<li><strong>postè¯·æ±‚[è¯·æ±‚è½½è·]ï¼š</strong>éšè—çš„ï¼Œéœ€è¦é€šè¿‡ request.post() æ–¹æ³•ä¸­çš„ json å‚æ•°ä¼ é€’ï¼Œå¿…é¡»å®Œæ•´</li>
<li><strong>postè¯·æ±‚[è¯·æ±‚è½½è·] + <code>&quot;Content-Type&quot;: &quot;application/octet-stream&quot;</code>ï¼š</strong>éœ€è¦ request.post() æ–¹æ³•çš„ data å‚æ•°<strong>ä¼ é€’ bytes ç±»å‹æ•°æ®</strong></li>
</ul>
<p><strong><span style="color:red;">æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°æ„å»ºï¼ˆurl åç¼€ï¼‰ï¼š</span></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import urllib.parse</span><br><span class="line"></span><br><span class="line">urllib.parse.urlencode(params)  # key1=value1&amp;key2=value2&amp;key3=value3</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="1-ç‰¹æ®Šé€†å‘ä»£ç "><a href="#1-ç‰¹æ®Šé€†å‘ä»£ç " class="headerlink" title="1. ç‰¹æ®Šé€†å‘ä»£ç "></a>1. ç‰¹æ®Šé€†å‘ä»£ç </h3><ul>
<li><p><strong>é€—å·è¡¨è¾¾å¼ï¼ˆæœ€åä¸€ä¸ªé€—å·çš„å€¼ï¼‰ï¼š</strong></p>
<ul>
<li><strong>ç”¨æ³•ï¼š</strong>é€—å·åˆ†éš”ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰§è¡Œå…¶ä¸­çš„æ¯ä¸ªå­è¡¨è¾¾å¼ï¼Œä½†è¿”å›å€¼æ˜¯æœ€åä¸€ä¸ªå­è¡¨è¾¾å¼çš„å€¼</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(0, i[jt])((0, i[qt])(a, d))  // ç­‰ä»·äºi[jt](i[qt](a, d))</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¯¼å‡ºæ¨¡å—ä¸­çš„é»˜è®¤æˆå‘˜ï¼ˆå¯¹è±¡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// è¿™é‡Œ export default å¯¼å‡ºäº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ–¹æ³•çš„å¯¹è±¡</span><br><span class="line">// ç”±äº js çš„ç‰¹æ€§ï¼Œç¬¬äºŒä¸ª newGuid çš„å®šä¹‰ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºå®ƒä»¬éƒ½ä½¿ç”¨ç›¸åŒçš„åç§°</span><br><span class="line">// è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªåä¸º format çš„å‚æ•°</span><br><span class="line">export default &#123;</span><br><span class="line">    newGuid()&#123;</span><br><span class="line">        return Guid.NewGuid().ToString(&#x27;N&#x27;).toUpperCase();</span><br><span class="line">    &#125;,</span><br><span class="line">    newGuid(format)&#123;</span><br><span class="line">        return Guid.NewGuid().ToString(format);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å‡½æ•°returnçš„æ˜¯é€—å·è¡¨è¾¾å¼ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var s, u = (s = null, function () &#123;</span><br><span class="line">        return s || (s = function () &#123;</span><br><span class="line">            var e, t, n, r, i = null;</span><br><span class="line">            return i || (t = new RegExp(&quot;\\u200c&quot;, &quot;g&quot;),</span><br><span class="line">                n = new RegExp(&quot;\\u200d&quot;, &quot;g&quot;),</span><br><span class="line">                r = new RegExp(&quot;.&#123;8&#125;&quot;, &quot;g&quot;),</span><br><span class="line">                e = &quot;asdasdasd&quot;,</span><br><span class="line">                i = &#123;key: o.enc.Utf8.parse(e)&#125;),</span><br><span class="line">                i  // é€—å·è¡¨è¾¾å¼</span><br><span class="line">        &#125;()),</span><br><span class="line">            s  // é€—å·è¡¨è¾¾å¼</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>returnå¦ä¸€ä¸ªå¯¹è±¡ï¼Œç›´æ¥èµ‹å€¼æ­¤å¯¹è±¡å³å¯ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function() &#123;</span><br><span class="line">    return new d</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>è‡ªæ‰§è¡Œå…¥å£æ¨¡å—çš„webpackï¼ˆå…¨è‡ªæ‰§è¡Œï¼‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">var protobuf_min = &#123;</span><br><span class="line">    exports: &#123;&#125;  // åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç”¨äºå­˜å‚¨æ¨¡å—çš„å¯¼å‡ºå†…å®¹</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">(function (module) &#123;</span><br><span class="line">    // å®šä¹‰ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•° module</span><br><span class="line"></span><br><span class="line">    !function (g) &#123;</span><br><span class="line">        var r, e, t, i;</span><br><span class="line"></span><br><span class="line">        r = &#123;  // webpackçš„æ¨¡å—</span><br><span class="line">            1: [&#x27;&#x27;],</span><br><span class="line">            2: [&#x27;&#x27;],</span><br><span class="line">            3: [&#x27;&#x27;],</span><br><span class="line">            // ......</span><br><span class="line">            39: [&#x27;&#x27;]</span><br><span class="line">        &#125;,</span><br><span class="line">            e = &#123;&#125;,</span><br><span class="line">            t = [16],</span><br><span class="line"></span><br><span class="line">            i = function t(n) &#123;</span><br><span class="line">                // å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° iï¼Œæ¥å—ä¸€ä¸ªå‚æ•° n</span><br><span class="line">                var o = e[n];</span><br><span class="line">                // ä» e å¯¹è±¡ä¸­è·å–é”®ä¸º n çš„å€¼</span><br><span class="line">                return o || r[n][0].call(o = e[n] = &#123;</span><br><span class="line">                    exports: &#123;&#125;</span><br><span class="line">                &#125;, t, o, o.exports),</span><br><span class="line">                    // å¦‚æœ o ä¸å­˜åœ¨ï¼Œè°ƒç”¨ r[n][0] å‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼èµ‹ç»™ o</span><br><span class="line">                    o.exports</span><br><span class="line">                // è¿”å› o å¯¹è±¡çš„ exports å±æ€§</span><br><span class="line">            &#125;(t[0]),</span><br><span class="line">            // è°ƒç”¨ i å‡½æ•°ï¼Œä¼ å…¥å‚æ•° t[0]ï¼Œå¹¶å°†ç»“æœèµ‹ç»™ i</span><br><span class="line"></span><br><span class="line">            i.util.global.protobuf = i,</span><br><span class="line">            // å°† i å¯¹è±¡èµ‹ç»™ i.util.global.protobuf å±æ€§</span><br><span class="line"></span><br><span class="line">        module &amp;&amp; module.exports &amp;&amp; (module.exports = i);</span><br><span class="line">        // å¦‚æœ module å’Œ module.exports å­˜åœ¨ï¼Œåˆ™å°† i å¯¹è±¡èµ‹ç»™ module.exports</span><br><span class="line">    &#125;();</span><br><span class="line"></span><br><span class="line">&#125;)(protobuf_min);  // å°† protobuf_min ä½œä¸ºå‚æ•°ä¼ å…¥å¤–å±‚çš„ç«‹å³æ‰§è¡Œå‡½æ•°</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-å®šä½åŠ å¯†æ€»ç»“"><a href="#2-å®šä½åŠ å¯†æ€»ç»“" class="headerlink" title="2. å®šä½åŠ å¯†æ€»ç»“"></a>2. å®šä½åŠ å¯†æ€»ç»“</h3><blockquote>
<p><strong>æ³¨æ„ï¼šè°ƒè¯•æ—¶éœ€è¦è°ƒè¯•è‡³éœ€è¦é€†å‘çš„å‚æ•°æˆ–æ•°æ®å¯¹åº”çš„å¯†æ–‡æ•°æ®å‡ºç°æ—¶ï¼Œå³æ­£ç¡®çš„å¯†æ–‡å‡ºç°æ—¶å†è·Ÿæ ˆ</strong></p>
<ul>
<li>å…¶ä¸­<strong>å“åº”æ•°æ®åŠ å¯†ï¼š</strong>å¯ä»¥è°ƒè¯•è‡³æ˜æ–‡æ•°æ®å‡ºç°æ—¶<strong>å‘ä¸Šè·Ÿä¸€ä¸ªæ ˆååˆ†æä»£ç ï¼Œè§£å¯†é€»è¾‘ä¸€èˆ¬åœ¨ JSON.parse é™„è¿‘æˆ–é‡Œé¢</strong>ã€‚ä¹Ÿå¯ä»¥è°ƒè¯•è‡³å¯†æ–‡æ•°æ®å‡ºç°æ—¶<strong>å‘ä¸‹è°ƒè¯•</strong>ï¼ˆä¸å»ºè®®ï¼‰ï¼Œè§‚å¯Ÿæ•°æ®ä»€ä¹ˆæ—¶å€™å˜æˆæ˜æ–‡</li>
<li><strong>æ³¨æ„ï¼šä¸èƒ½è°ƒè¯•è‡³æ˜æ–‡æ•°æ®å‡ºç°æ—¶ï¼Œä¸å‘ä¸Šè·Ÿæ ˆè€Œç›´æ¥å‘ä¸‹è°ƒè¯•</strong>ï¼Œå› ä¸ºè¿™å¯èƒ½å­˜åœ¨è§£å¯†åçš„æ•°æ®é‡æ–°å¤åˆ¶ç»™äº†åŠ å¯†å˜é‡çš„æƒ…å†µï¼Œå¯¼è‡´æ— æ³•è§‚å¯Ÿåˆ°å¯†æ–‡æ•°æ®ï¼Œä¹Ÿå°±æ— æ³•åˆ¤æ–­è§£å¯†é€»è¾‘å­˜åœ¨äºå“ªé‡Œ</li>
<li>å…¶ä¸­<strong>å‚æ•°åŠ å¯†ï¼š</strong>å¦‚æœå‚æ•°è¢«èµ‹å€¼ç»™äº†å¦ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆåº”è¯¥å»æ‰¾é‚£ä¸ªå˜é‡çš„èµ‹å€¼ä½ç½®ï¼Œä¾‹ **<code>wo=&quot;X-Tingyun&quot;</code>**ï¼Œåˆ™éœ€è¦æ‰¾ wo çš„èµ‹å€¼ä½ç½®å³æ˜¯ X-Tingyun çš„èµ‹å€¼ä½ç½® <strong><code>t.addHeader(wo, i)</code></strong></li>
</ul>
</blockquote>
<ul>
<li><strong><span style="color:red;">æ ¹æ®åŠ å¯†æ•°æ®åˆ†æ+æœç´¢å…³é”®å­—å®šä½ï¼š</span></strong></li>
</ul>
<img    
                       lazyload
                       alt="image"
                       data-src="https://osswcf.oss-cn-shanghai.aliyuncs.com/2024/01/1705927789-ee046979a73c226.png"
                         style="width:80%;margin:0 auto;"
                 >

<ul>
<li><strong><span style="color:red;">å“åº”æ•°æ®åŠ å¯†ï¼š</span></strong><ol>
<li><strong>Hook JSON.parse(parmas)ï¼š</strong>ç›‘è§†å‚æ•° parmas çš„å˜åŒ–</li>
<li><strong>XHR æ–­ç‚¹</strong>ï¼šajax è°ƒç”¨æ—¶ä¼šé€šè¿‡ <strong>successã€thenã€done</strong> è®¾ç½®å¤„ç†ï¼ˆè§£å¯†ï¼‰å“åº”æ•°æ®çš„å›è°ƒå‡½æ•°</li>
</ol>
</li>
<li><strong><span style="color:red;">æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°åŠ å¯†ï¼š</span></strong><ol>
<li><strong>Hook XHR open</strong>ï¼šopen æ–¹æ³•çš„å‚æ•° url ä¸­åŒ…å«è¢«åŠ å¯†çš„æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°</li>
</ol>
</li>
<li><strong><span style="color:red;">è¡¨å•æ•°æ®&#x2F;è¯·æ±‚è½½è·å‚æ•°åŠ å¯†ï¼š</span></strong><ol>
<li><strong>Hook JSON.stringify(parmas)ï¼š</strong>ç›‘è§†å‚æ•° parmas çš„å˜åŒ–ï¼Œ<strong>è°ƒè¯•è‡³æ­£ç¡®çš„å¯†æ–‡æ•°æ®å‡ºç°æ—¶è·Ÿæ ˆ</strong></li>
</ol>
</li>
<li><strong><span style="color:red;">è¯·æ±‚å¤´headersä¸­å‚æ•°åŠ å¯†ï¼š</span></strong><ol>
<li><strong>Hook XHR setRequestHeaderï¼š</strong>setRequestHeaderæ˜¯åœ¨ open æ–¹æ³•ä¹‹åã€send æ–¹æ³•ä¹‹å‰è°ƒç”¨çš„</li>
<li><strong><span style="color:red;">å‚æ•°çš„keyå’Œvalueéƒ½è¢«åŠ å¯†ï¼š</span><strong>æ­¤æ—¶æ— æ³•å† Hook å…³é”®å­—äº†ï¼Œåªèƒ½ç›´æ¥ Hook æ•´ä¸ª setRequestHeaderï¼Œä½†æ˜¯è¿™å°†ä¼š Hook åˆ°å…¨éƒ¨çš„å‚æ•°ä¿¡æ¯ï¼Œå¯ä»¥</strong>è°ƒè¯•è‡³éœ€è¦çš„å¯†æ–‡æ•°æ®å‡ºç°åå†è·Ÿæ ˆ</strong></li>
<li><strong>XHRæ–­ç‚¹ï¼š</strong>setRequestHeader æ–¹æ³•æ˜¯åœ¨ open ä¹‹åã€send ä¹‹å‰è°ƒç”¨çš„</li>
</ol>
</li>
<li><strong><span style="color:red;">cookiesåŠ å¯†ï¼š</span></strong><ol>
<li><strong>Hook Object.definePropertyï¼š</strong>Hook å‰éœ€è¦å…ˆæ¸…é™¤æµè§ˆå™¨Cookie</li>
</ol>
</li>
</ul>
<h3 id="3-è°ƒè¯•é—®é¢˜è®°å½•"><a href="#3-è°ƒè¯•é—®é¢˜è®°å½•" class="headerlink" title="3. è°ƒè¯•é—®é¢˜è®°å½•"></a>3. è°ƒè¯•é—®é¢˜è®°å½•</h3><ul>
<li><strong>ä»£ç åœ¨ js ä¸­è°ƒç”¨æ­£å¸¸ï¼Œåœ¨ python è°ƒç”¨å¼‚å¸¸ï¼š</strong><ol>
<li><strong>è€ƒè™‘æ˜¯å¦æ˜¯ python è·å–çš„æ•°æ®æœ‰é—®é¢˜</strong>ï¼Œå¯ä»¥å°†æ•°æ®æ‹¿åˆ° js ä»£ç è¿è¡Œä¸€ä¸‹ï¼Œå¦‚æœæœ‰é—®é¢˜å¯ä»¥è·Ÿç½‘é¡µä¸Šçš„æ•°æ®å¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦æ˜¯å› ä¸ºè¢«åçˆ¬äº†æœåŠ¡å™¨è¿”å›äº†å‡æ•°æ®</li>
<li><strong>è€ƒè™‘æ˜¯å¦æ˜¯ä¼ é€’çš„å‚æ•°æ ¼å¼æœ‰é—®é¢˜ï¼š</strong>åŒæ ·æ˜¯å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œ<strong>æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ JSON.stringify ä¸ä¼šå¯¹é ASCII å­—ç¬¦è¿›è¡Œç¼–ç å¤„ç†ï¼›è€Œ json.dumps ä¼šä½¿ç”¨ ASCII ç¼–ç æ¥å¤„ç†éASCIIå­—ç¬¦ï¼ˆå¦‚æ±‰å­—ï¼‰</strong>ã€‚åœ¨é€šè¿‡ python è°ƒç”¨ js å¹¶ä¼ é€’è¯·æ±‚å‚æ•°è¿‡å»åŠ å¯†æ—¶ï¼Œåº”è¯¥åœ¨ python ä¸­é€šè¿‡ json.dumps æ–¹æ³•è¿›è¡Œè½¬æ¢åå†ä¼ é€’ï¼›è€Œä¸æ˜¯ç›´æ¥ä¼ é€’è¿‡å»ï¼Œå†åœ¨ js ä¸­é€šè¿‡ JSON.stringify æ–¹æ³•è¿›è¡Œè½¬æ¢ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æœ€ç»ˆåœ¨ python ä¸­å¯¹æ•°æ® api å‘èµ·è¯·æ±‚æ—¶æ‰€æºå¸¦çš„è¯·æ±‚å‚æ•°æ ¼å¼å’ŒåŠ å¯†çš„è¯·æ±‚å‚æ•°æ ¼å¼ä¸€è‡´</li>
<li><strong>è€ƒè™‘æ˜¯å¦æ˜¯ä¼ é€’æ•°æ®çš„å­—ç¬¦ä¸²ä¸¤ç«¯æœ‰å¼•å·ï¼š <code>json.dumps(params).strip(&#39;&quot;&#39;)</code></strong></li>
<li><strong>è€ƒè™‘æ˜¯å¦æ˜¯ä¼ é€’æ•°æ®çš„å­—ç¬¦ä¸²ä¸­æœ‰â€ç¾åŒ–â€ç©ºæ ¼ï¼š<code>json.dumps(params).replace(&#39; &#39;, &#39;&#39;)</code></strong></li>
<li><strong>ç¡®ä¿åœ¨ js ä»£ç ä¸­ä½¿ç”¨çš„æ•°æ®æ˜¯å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼š</strong>ç›´æ¥åœ¨åŠ å¯†é€»è¾‘çš„å‡½æ•°å†…éƒ¨è¿›è¡Œ <strong><code>JSON.parse</code></strong> è½¬æ¢</li>
</ol>
</li>
<li><strong>è§£å†³æ— æ³•æ­£å¸¸ä½¿ç”¨å¼€å‘è€…å·¥å…·ï¼š</strong><ol>
<li>è§‚å¯Ÿé¡µé¢ç‰¹å¾ï¼šé¡µé¢è·³è½¬å¯¹åº”å…³é”®å­—<code>window.location</code>ï¼Œé¡µé¢å…³é—­å¯¹åº”å…³é”®å­—<code>window.close()</code></li>
<li>è§‚å¯Ÿæ§åˆ¶å°é¢æ¿ç‰¹å¾ï¼šè¾“å‡ºâ€æ§åˆ¶å°æ•°æ®å·²è¢«æ¸…é™¤â€æˆ– â€œundefineâ€ï¼Œå¯¹åº”å…³é”®å­—<code>console.clear()</code></li>
<li><strong>è§£å†³ï¼š</strong>ä½¿ç”¨æ— ç—•æµè§ˆå™¨æ‰“å¼€ç½‘ç«™ï¼ˆ<strong>é¿å…æ’ä»¶ js æ–‡ä»¶è¿‡å¤š</strong>ï¼‰ï¼Œå¼€å¯ â€œ<strong>æºä»£ç &#x2F;æ¥æº</strong>â€œ é¢æ¿å³ä¾§ â€œ<strong>äº‹ä»¶ç›‘å¬å™¨æ–­ç‚¹</strong>â€œ çš„ â€œ<strong>è„šæœ¬</strong>â€œï¼Œè¿™å¯ä»¥æ–­ä½ç½‘ç«™åŠ è½½æ‰§è¡Œçš„æ¯ä¸€ä¸ª js è„šæœ¬ï¼Œè¿›è¡Œè°ƒè¯•å’Œæœç´¢ç‰¹å¾å¯¹åº”çš„å…³é”®å­—ï¼Œå®šä½åˆ°ä½ç½®åè¿›è¡Œâ€<strong>æ›¿æ¢å†…å®¹</strong>â€œ</li>
<li><strong>å¦‚æœç½‘ç«™é€šè¿‡é¡µé¢å¤§å°å°ºå¯¸æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼š</strong>å¯ä»¥ç›´æ¥æŠ½ç¦»å¼€å‘è€…å·¥å…·</li>
</ol>
</li>
</ul>
<h3 id="4-ä»£ç è°ƒè¯•ä¸“é¢˜"><a href="#4-ä»£ç è°ƒè¯•ä¸“é¢˜" class="headerlink" title="4. ä»£ç è°ƒè¯•ä¸“é¢˜"></a>4. ä»£ç è°ƒè¯•ä¸“é¢˜</h3><blockquote>
<p><strong>æ˜ç¡®ï¼š</strong>é¦–å…ˆä¸€å®šè¦å…ˆæ˜ç¡®è‡ªå·±éœ€è¦åŠ å¯†æˆ–è§£å¯†çš„æ•°æ®ï¼Œåœ¨è·Ÿæ ˆè¿‡ç¨‹ä¸­è¦æ—¶åˆ»è§‚å¯Ÿæ•°æ®å€¼çš„å˜åŒ–ä»¥ç¡®å®šä½ç½®</p>
<p><strong>åˆ†æï¼šåˆ†æåŠ å¯†æ—¶ä¸€å®šè¦å…ˆå»æ ¡éªŒè¿™ä¸ªå‚æ•°æ˜¯å¦éœ€è¦é€†å‘ï¼Œå¯èƒ½ä¸æºå¸¦ä¹Ÿèƒ½è¯·æ±‚æˆåŠŸï¼ˆé€šå¸¸æŒ‡è¯·æ±‚å¤´å‚æ•°ï¼‰</strong></p>
<p><strong>æ³¨æ„ï¼š<span style="color:red;">JavaScript ä¸­çš„å¯¹è±¡æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥å…ˆå®šä¹‰åé€æ­¥èµ‹å€¼</span></strong></p>
</blockquote>
<ul>
<li><strong>è°ƒè¯•æŠ€å·§ï¼š</strong><ol>
<li><strong>æ ˆå †çš„å¸§å¯¹åº”ä»£ç ä½œç”¨åŸŸï¼Œå¿…é¡»ç¡®ä¿ä½¿ç”¨ Hook æ—¶å’Œæ— é™ debugger åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸ</strong>ï¼Œæ‰èƒ½ Hook æˆåŠŸ</li>
<li>æ–­ç‚¹è°ƒè¯•æ—¶ï¼Œæ–­ç‚¹çš„ä½ç½®éå¸¸é‡è¦ï¼Œ<strong>ä¸è¦æ–­åœ¨è¿˜æ²¡æœ‰è°ƒç”¨çš„å‡½æ•°ä¸­</strong>ï¼Œå‡½æ•°å†…éƒ¨è¦æ–­åœ¨ä¸€å®šä¼šèµ°çš„é€»è¾‘</li>
<li>è°ƒè¯•æ–¹æ³•æ—¶<strong>å…ˆçœ‹è¿”å›å€¼</strong>ï¼Œé€»è¾‘ä»£ç ä¸­è¦åˆ†æå‡ºæ— æ•ˆé€»è¾‘ï¼Œåªè¯»ä»£ç èµ°çš„éƒ¨åˆ†ï¼Œ<strong>è¡¥ä»£ç æ—¶ä¸ç½‘é¡µä¿æŒä¸€è‡´</strong></li>
<li><strong>è€ƒè™‘ä¸€é•¿ä¸²æ•°æ®æ˜¯ä¸æ˜¯å›ºå®šå€¼</strong>ï¼Œå…ˆç›´æ¥æœç´¢æ•°æ®ç¡®å®šæ˜¯å¦æ˜¯å†™æ­»æ•°æ®ï¼Œæœä¸åˆ°åˆ™éœ€è¦æ‰¾åˆ°æ•°æ®ç”Ÿæˆä½ç½®ï¼Œæ‰“ä¸Šæ–­ç‚¹è¿›è¡Œè°ƒè¯•ï¼Œå¦‚æœèµ°ä¸è¿›æ–­ç‚¹ï¼Œåˆ™è¯´æ˜æ•°æ®æ˜¯<strong>é¡µé¢åˆ·æ–°æ—¶ç”Ÿæˆçš„</strong>ï¼Œä¸”åªç”Ÿæˆä¸€æ¬¡ã€‚å¦‚æœæ˜¯å¸¸é‡ï¼Œåˆ™å¯ä»¥ç›´æ¥å†™æ­»ï¼Œä¸å½±å“åŠ å¯†ç»“æœï¼›å¦‚æœæ˜¯å¯¹è±¡ï¼ˆ<strong>webpack</strong>ï¼‰ï¼Œåˆ™å¯ä»¥ç›´æ¥å°†æ•´ä¸ªå¯¹è±¡ï¼ˆ<strong>åŠ è½½å™¨</strong>ï¼‰æ‹¿ä¸‹æ¥</li>
<li><strong>åœ¨è°ƒè¯•è‡³å¼‚æ­¥æ ˆçš„ä¸Šä¸€å¸§è§‚å¯Ÿæ•°æ®æ—¶</strong>ï¼Œéœ€è¦å…ˆè§‚å¯Ÿæ•°æ®æ˜¯å¦æ˜¯åœ¨å¼‚æ­¥æ ˆä¹‹å‰å°±å·²ç»è¢«åŠ å¯†è¿‡äº†ï¼Œè€Œä¸æ˜¯åœ¨å¼‚æ­¥ä¸­åŠ å¯†çš„ï¼Œ<strong>æ­¤æ—¶ä¸èƒ½ç›´æ¥è§‚å¯Ÿ</strong>ï¼Œè€Œæ˜¯æ‰“ä¸Šæ–­ç‚¹é‡æ–°è¯·æ±‚è°ƒè¯•è§‚å¯Ÿï¼Œé¿å…ä½œç”¨åŸŸé—®é¢˜å¯¼è‡´æ•°æ®ä¸å‡†ç¡®</li>
<li>åœ¨ XHR æ–­ç‚¹å®šä½è°ƒè¯•ä¸­ï¼Œå¦‚æœè¦æ‰¾ ajax çš„å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆåœ¨è·Ÿæ ˆæ—¶<strong>æ³¨æ„è§‚å¯Ÿåœ¨è°ƒç”¨ ajax çš„å¸§çš„é™„è¿‘çš„ä¸€ä¸¤ä¸ªæ ˆ</strong>ï¼Œé¿å…æ‰¾é”™çœŸæ­£è°ƒç”¨ ajax çš„æ ˆ</li>
<li><strong>è§‚å¯Ÿæ¥å£çš„å¯åŠ¨å™¨ä¸­æ˜¯å¦æœ‰å¼‚æ­¥çš„ä»£ç </strong>ï¼Œå¦‚æœæ²¡æœ‰å¼‚æ­¥ï¼Œé‚£ä¹ˆé€šè¿‡XHRæ–­ç‚¹æ˜¯æ–¹ä¾¿è·Ÿæ ˆå®šä½åˆ°åŠ å¯†ä½ç½®çš„</li>
<li>åœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œ<strong>key å’Œ iv ä¸€å®šæ˜¯å›ºå®šçš„</strong>ï¼Œå› ä¸ºå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†å’Œè§£å¯†å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å¯†é’¥</li>
<li>åœ¨ RSA éå¯¹ç§°åŠ å¯†ä¸­ï¼Œ<strong>å…¬é’¥</strong>ä¹Ÿæœ‰å¯èƒ½ä¸æ˜¯ç›´æ¥å†™æ­»åœ¨ä»£ç ä¸­ï¼Œè€Œæ˜¯<strong>ä»è¯·æ±‚å¦ä¸€ä¸ªæ¥å£çš„å“åº”ä¸­è·å–</strong></li>
</ol>
</li>
<li><strong>è¡¥ä»£ç æŠ€å·§ï¼š</strong><ol>
<li>é‡åˆ°é window å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œæˆ–è€…åœ¨ <strong>new</strong> ä¸€ä¸ªé window å¯¹è±¡æ—¶ï¼Œå¹¶ä¸”è¿›å…¥è¢«è°ƒç”¨æ–¹æ³•å†…éƒ¨çœ‹åˆ° <strong>this</strong> è°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥å°†æ•´ä¸ªâ€ç±»â€å¯¹è±¡çš„å®šä¹‰æ‰£ä¸‹æ¥ï¼Œè€Œä¸å•ç‹¬æ‰£æŸä¸ªå‡½æ•°ï¼Œ<strong>åŒ…æ‹¬é™„è¿‘ç”¨åˆ°è¿™ä¸ªâ€ç±»â€çš„æ‰€æœ‰è‡ªæ‰§è¡Œæ–¹æ³•ï¼Œè‡ªæ‰§è¡Œæ–¹æ³•ä¹Ÿå¯ä»¥ä¸ºå¯¹è±¡<span style="color:red;">åŠ¨æ€èµ‹å€¼</span></strong></li>
<li>éµå®ˆä»é‡Œåˆ°å¤–é€å±‚åŠ å¯†çš„åŸåˆ™ï¼Œè´´ç€å‡½æ•°æ‰¾æ•°æ®ç”Ÿæˆçš„ä½ç½®ï¼Œå¦‚æœ<strong>å’Œå®é™…ç”Ÿæˆçš„æ•°æ®çš„ä¸ä¸€è‡´</strong>ï¼Œé‚£å¯èƒ½æ˜¯åœ¨å‡½æ•°å¤–é¢çš„ä¸‹é¢è¿›è¡Œäº†äºŒæ¬¡**<span style="color:red;">åŠ¨æ€èµ‹å€¼</span><strong>ï¼Œè€Œå‡½æ•°è°ƒç”¨åœ¨èµ‹å€¼ä¹‹åå¯¼è‡´çš„ï¼ˆ</strong>åœ¨æ•°æ®ç”Ÿæˆä½ç½®æ‰“æ–­ç‚¹è°ƒè¯•**ï¼‰</li>
<li><strong>è‡ªæ‰§è¡Œæ–¹æ³•ä¸ºå½¢å‚èµ‹å€¼</strong>ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å¯¹è±¡eçš„ç”Ÿæˆä½ç½®ï¼Œä¾‹ <strong><code>(function(e)&#123;&#125;).call(this, n(&quot;b639&quot;))</code></strong></li>
<li>è¡¥ä»£ç æ—¶<strong>æ— æ•ˆé€»è¾‘ä»£ç å’Œå¼‚å¸¸æ•è·ä»£ç éƒ½è¦åˆ é™¤ï¼Œè¡¥çš„æ¯æ®µä»£ç çš„ä½ç½®ä¸€å®šè¦å’Œæµè§ˆå™¨ä¿æŒä¸€è‡´</strong></li>
<li>æ‰¾åˆ°ç½‘ç«™çš„åŠ å¯†ç®—æ³•ï¼Œ<strong>ä¸€å®šè¦å¯¹æ¯”å®ƒæ˜¯ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„åŠ å¯†ç®—æ³•</strong>ï¼Œå¯ä»¥åŠ å¯†åŒæ ·çš„å€¼è¿›è¡Œå¯¹æ¯”</li>
<li><strong>æ—¶é—´æˆ³ï¼š</strong>è¦ç¡®ä¿å„å‚æ•°ä½¿ç”¨çš„æ—¶é—´æˆ³ä¸€è‡´ï¼Œè¿˜è¦ç¡®ä¿ python å’Œ js ä½¿ç”¨çš„æ˜¯åŒä¸€æ—¶é—´æˆ³ï¼ˆ<strong>æ³¨æ„é•¿åº¦ç›¸åŒ</strong>ï¼‰</li>
<li><strong>é‡åˆ° <code>window.å±æ€§</code> èµ‹å€¼ä½ç½®æ‰¾ä¸åˆ°ï¼ˆå¸¸é‡ï¼‰</strong>ï¼Œå¯ä»¥åœ¨æºä»£ç æœç´¢ï¼Œå¤§æ¦‚ç‡å­˜åœ¨äº<strong>é¦–é¡µ</strong> document æ–‡æ¡£ä¸­</li>
<li><strong>é‡åˆ° <code>window.æ–¹æ³•</code> åœ¨ç¯å¢ƒä¸­æŠ¥é”™ï¼ˆæ–¹æ³•ï¼‰</strong>ï¼Œç›´æ¥è¡¥ç¯å¢ƒï¼Œä¹Ÿå¯èƒ½æ˜¯ node ä¸­æœ¬èº«å°±æœ‰çš„æ–¹æ³•ï¼ˆ<strong>atob</strong>ï¼‰</li>
<li><strong>é‡åˆ° window ä¸­çš„ç¯å¢ƒåœ¨ node ä¸­æ²¡æœ‰</strong>ï¼Œå¯ä»¥ç›´æ¥è®©åŒ…å«ç¯å¢ƒçš„é‚£å—ä»£ç çš„ç»“æœä¸æµè§ˆå™¨ä¿æŒä¸€è‡´å³å¯</li>
</ol>
</li>
</ul>
<h3 id="5-Webpackä¸“é¢˜"><a href="#5-Webpackä¸“é¢˜" class="headerlink" title="5. Webpackä¸“é¢˜"></a>5. Webpackä¸“é¢˜</h3><ol>
<li>å¦‚æœé‡åˆ° <strong>obj.func</strong> çš„ä»£ç ï¼Œä½†æ˜¯<strong>æ–¹æ³•çš„å±æ€§ name å€¼ä¸ func ä¸ä¸€è‡´</strong>ï¼Œè¿™å¯èƒ½æ˜¯å› ä¸º webpack æ‰“åŒ…åæ”¹å˜äº†å‡½æ•°è°ƒç”¨çš„åç§°ï¼Œæ­¤æ—¶å¯ä»¥å…ˆæ‰¾ä¸€ä¸‹ obj çš„ç”Ÿæˆã€‚æˆ–è€…ç›´æ¥è¿›å…¥å‡½æ•°ï¼Œçœ‹å‡½æ•°æ˜¯å¦æ˜¯åœ¨ webpack æ‰“åŒ…åçš„æ¨¡å—ï¼ˆ**<code>function(e, t, n)&#123;&#125;</code>**ï¼‰ä¸­ï¼Œæ­¤æ—¶ä¹Ÿåº”è¯¥æ‰¾ obj çš„ç”Ÿæˆï¼Œä¸å»ºè®®ç›´æ¥æ‰£å‡½æ•°</li>
<li><strong>å°±ç®—æ–¹æ³•çš„ name å€¼ä¸ func ä¸€è‡´</strong>ï¼Œç”±äº webpack å¸¸è§ï¼Œä¹Ÿåº”è¯¥æ³¨æ„ obj çš„ç”Ÿæˆæ˜¯å¦æ˜¯ webpack æ ¼å¼</li>
<li><strong>åŠ è½½å™¨å’Œæ¨¡å—éƒ½è¡¥å®Œçš„æƒ…å†µä¸‹ä»£ç ä»ç„¶æŠ¥ call é”™è¯¯ï¼Œ</strong>å¯èƒ½æ˜¯ç”±äºåŠ è½½å™¨æ²¡æœ‰æ¥å—æ¨¡å—å½¢å‚ï¼Œéœ€è¦æ‰‹åŠ¨è¡¥ä¸Š</li>
<li><strong>åŠ è½½å™¨æ‰§è¡Œæ¨¡å—åç¨‹åºæ— æ³•é€€å‡ºï¼Œ</strong>å¯èƒ½æ˜¯å› ä¸ºåŠ è½½å™¨å†…ä½¿ç”¨äº†å®šæ—¶å™¨æ— é™æ‰§è¡Œï¼Œå¯ä»¥<strong>ç½®ç©ºå®šæ—¶å™¨æ–¹æ³•</strong>è§£å†³</li>
<li>åœ¨å¯¼å‡ºåŠ è½½å™¨æ—¶ï¼Œ<strong>ä¸€å®šè¦æ³¨é‡Šæ‰åŠ è½½å™¨è‡ªå·±è°ƒç”¨çš„æ¨¡å—</strong>ï¼Œå¦åˆ™ä¼šè°ƒç”¨å¾ˆå¤šæ— ç”¨æ¨¡å—</li>
</ol>
<h3 id="6-OBæ··æ·†ä¸“é¢˜"><a href="#6-OBæ··æ·†ä¸“é¢˜" class="headerlink" title="6. OBæ··æ·†ä¸“é¢˜"></a>6. OBæ··æ·†ä¸“é¢˜</h3><ol>
<li>æ‰£ä»£ç æ—¶ï¼Œåé¢è·Ÿæ‹¬å·çš„åˆ™æ˜¯æ–¹æ³•ï¼Œ<strong>ä¸­æ‹¬å·å†…çš„å±æ€§å¯ä»¥ç›´æ¥è¿˜åŸ</strong>ï¼Œè€Œå¤–å±‚çš„æ•´ä½“çš„æ–¹æ³•éœ€è¦æ‰£</li>
<li><strong>è¯·æ±‚å¤´ä¸­ Content-Type å€¼ä¸º octet-streamï¼Œè¡¨ç¤ºè¯·æ±‚æºå¸¦çš„æ•°æ®ç±»å‹æ˜¯é€šç”¨çš„äºŒè¿›åˆ¶æµåª’ä½“ç±»å‹ï¼Œéœ€postè¯·æ±‚ä¼ é€’ bytes ç±»å‹æ•°æ®ï¼Œå³<code>requests.post(url..., data=bytes(b_data[&#39;data&#39;])</code></strong></li>
<li>è¡¥æ··æ·†ä»£ç æ—¶ï¼Œå…¶ç»“æœç”Ÿæˆçš„æ•°æ®ä¸ç½‘é¡µä¸ä¸€è‡´ï¼Œé‚£ä¹ˆè¯´æ˜è¡¥ä»£ç æ—¶ï¼Œ<strong>ç¼ºå°‘äº†é‡æ„æ•°ç»„çš„è‡ªæ‰§è¡Œæ–¹æ³•</strong></li>
<li><strong>ä»£ç é˜»å¡ä¸æ‰§è¡Œï¼š</strong>æœ‰ä¸¤ç§å¯èƒ½ï¼Œè¯´æ˜å­˜åœ¨æ£€æµ‹ä»£ç æ ¼å¼åŒ–ï¼Œ<strong>éœ€è¦å‹ç¼©æ··æ·†ä»£ç </strong>ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å­˜åœ¨å®šæ—¶å™¨</li>
</ol>
<h3 id="7-jsvmpæŠ€æœ¯ä¸“é¢˜"><a href="#7-jsvmpæŠ€æœ¯ä¸“é¢˜" class="headerlink" title="7. jsvmpæŠ€æœ¯ä¸“é¢˜"></a>7. jsvmpæŠ€æœ¯ä¸“é¢˜</h3><ol>
<li><strong>jsvmpä»£ç ä¸€èˆ¬é‡‡ç”¨å…¨æ‰£ï¼Œé€šè¿‡æ—¥å¿—æ–­ç‚¹ï¼ˆæ’æ¡©ï¼‰æˆ–è€…æ¡ä»¶æ–­ç‚¹è°ƒè¯•ä»£ç ï¼Œä»è€Œè¡¥ç¯å¢ƒè¿˜åŸç®—æ³•</strong></li>
<li><strong>æ–­ç‚¹è°ƒè¯•ï¼š</strong>jsvmpä»£ç åªåœ¨é¡µé¢åˆ·æ–°æ—¶åŠ è½½ä¸€æ¬¡ï¼Œè°ƒè¯•æ—¶éœ€è¦åˆ·æ–°ç½‘é¡µæ‰èƒ½èµ°è¿›æ–­ç‚¹ï¼ˆ<strong>å½“æ–­ç‚¹æ— æ³•è¿›å…¥æ—¶ï¼Œç¬¬ä¸€è¦è€ƒè™‘æ˜¯å¦æ˜¯æ–­ç‚¹ä½ç½®é”™è¯¯ï¼Œä¸€è¡Œä¸­æœ‰å¤šä¸ªæ–­ç‚¹ä½ç½®çš„å¯èƒ½ï¼Œå¯èƒ½æ–­ç‚¹çš„ä½ç½®é€»è¾‘å¹¶æ²¡æœ‰èµ°ï¼›ç¬¬äºŒè¦è€ƒè™‘æ˜¯å¦æ–­ç‚¹ä½ç½®çš„æ•°æ®å·²ç»ç”Ÿæˆäº†ï¼Œéœ€è¦åˆ·æ–°ç½‘é¡µé‡æ–°ç”Ÿæˆ</strong>ï¼‰</li>
<li><strong>è¡¥ç¯å¢ƒåæ— æŠ¥é”™ï¼Œä½†æ•°æ®ä¸å¯¹ï¼ˆ1ï¼‰ï¼š</strong>åœ¨è°ƒç”¨è§£é‡Šå™¨è¯†åˆ«å­—èŠ‚ç æ—¶ï¼Œå¾€å¾€<strong>åœ¨å­—èŠ‚ç å‚æ•°åé¢ï¼Œè¿˜ä¼šè·Ÿä¸Šç¯å¢ƒæ£€æµ‹çš„ä»£ç å‚æ•°</strong>ï¼Œæ­¤æ—¶éœ€è¦ä¿®æ”¹æ£€æµ‹æ¡ä»¶æ¨¡æ‹Ÿæµè§ˆå™¨ç¯å¢ƒï¼ˆä¾‹ exportsã€moduleï¼‰</li>
</ol>
<h3 id="8-è¡¥ç¯å¢ƒä¸“é¢˜"><a href="#8-è¡¥ç¯å¢ƒä¸“é¢˜" class="headerlink" title="8. è¡¥ç¯å¢ƒä¸“é¢˜"></a>8. è¡¥ç¯å¢ƒä¸“é¢˜</h3><ol>
<li><strong>åç¯å¢ƒè„šæœ¬ä¸åç¯å¢ƒï¼š</strong>å¯èƒ½æ˜¯ console.log è¢«ç½®ç©ºï¼Œå¯ä»¥å°†å…¶åœ¨åç¯å¢ƒè„šæœ¬ä¸­èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œå¹¶æ›¿æ¢ä½¿ç”¨</li>
<li><strong>åç¯å¢ƒè„šæœ¬ä½¿ç”¨ï¼š</strong>å…¨å±€å¯¼å‡ºæ•°æ®æ—¶ï¼Œ<strong>get æ€»å‘ç”Ÿåœ¨ set ä¹‹å‰</strong>ï¼Œè¯´æ˜å¯èƒ½åœ¨ set æ—¶<strong>å­˜åœ¨å®šæ—¶å™¨</strong>ï¼Œå»æ‰å®šæ—¶å™¨å³å¯</li>
<li><strong>å¯¼å‡ºæ–¹æ³•æŠ€å·§ï¼šå¦‚æœæ–¹æ³•ä¸å¥½å¯¼å‡ºï¼Œé‚£å°±è°ƒè¯•ï¼Œä¸æµè§ˆå™¨åŒæ­¥è°ƒè¯•ï¼Œçœ‹å“ªä¸ªå‚æ•°æˆ–è¿”å›å€¼ä¸æµè§ˆå™¨ä¸ä¸€è‡´</strong></li>
<li><strong>é‡åˆ°å¼‚å¸¸æŠ¥é”™ ReferenceError: xxx is not definedï¼š</strong>æœ€é‡è¦çš„æ˜¯å’Œç½‘é¡µä¿æŒä¸€è‡´ï¼Œå…ˆç¡®å®š xxx åœ¨ç½‘é¡µä¸­æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¯¹è±¡åˆ™è¡¥ç©ºå¯¹è±¡ï¼Œæ˜¯å‡½æ•°åˆ™è¡¥ç©ºå‡½æ•°ï¼ˆè¡¥ç©ºçš„å‰ææ˜¯å¯¹æ•´ä½“ä»£ç ï¼Œå¯¹æ•°æ®æ— å½±å“ï¼‰</li>
<li><strong>é‡åˆ°å¼‚å¸¸æŠ¥é”™ TypeError: Cannot read properties of undefined (reading â€˜xxxâ€™)ï¼š</strong>æ— æ³•è¯»å–æœªå®šä¹‰çš„å±æ€§æˆ–æ–¹æ³•ã€‚å¦‚æœæ˜¯ js å†…ç½®å±æ€§ï¼Œé‚£ä¹ˆåˆ™éœ€è¦è¡¥è°ƒç”¨å®ƒçš„å¯¹è±¡å€¼ï¼›å¦‚æœæ˜¯ç¯å¢ƒå±æ€§ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¡¥å¯¹åº”ç½‘é¡µä¸€è‡´çš„å±æ€§å€¼ï¼›å¦‚æœæ˜¯è§£å¯†æ–¹æ³•ä¸å­˜åœ¨ï¼Œä¸”ç¯å¢ƒå·²ç»è¡¥å¥½ï¼Œåˆ™è¯´æ˜è¿˜å­˜åœ¨ç¯å¢ƒæ£€æµ‹æ²¡æœ‰å¤„ç†</li>
<li><strong>é‡åˆ°å¼‚å¸¸æŠ¥é”™ TypeError: Cannot set properties of undefined (setting â€˜displayâ€™)ï¼š</strong>æ— æ³•è®¾ç½®å±æ€§å€¼ displayï¼Œåœ¨ css ä¸­é€šè¿‡ style æ ·å¼è®¾ç½®å…¶å±æ€§ï¼Œæ‰€ä»¥è¡¥ç¯å¢ƒ <code>&#123;return &#123;style: &#123;display: &#123;&#125;&#125;&#125;&#125;</code></li>
<li><strong>è¡¥ç¯å¢ƒåæ— æŠ¥é”™ï¼Œä½†æ•°æ®ä¸å¯¹ï¼ˆ2ï¼‰ï¼š</strong>å¯¹äºåç¯å¢ƒè„šæœ¬ä¸­å±æ€§å€¼ç±»å‹ä¸º undefined çš„ç¯å¢ƒï¼Œå¯èƒ½è¿˜éœ€è¦è¿›ä¸€æ­¥ä¸ç½‘é¡µç¯å¢ƒå€¼ä¿æŒä¸€è‡´ã€‚å…¶ä¸­å¯¹äºå…³é”®ç¯å¢ƒï¼Œä¾‹å¦‚ cookieã€userAgent ç­‰ï¼Œå¯èƒ½å­˜åœ¨åœ¨ä»£ç ä¸­å¯¹ç¯å¢ƒå€¼è¿›è¡Œç½®ç©ºæˆ–ä¿®æ”¹çš„æƒ…å†µï¼Œæ­¤æ—¶å¯ä»¥æ‰“å°å…·ä½“ç¯å¢ƒå€¼è¿›è¡Œç¡®å®šï¼Œå¹¶é€šè¿‡åœ¨æ‰€æœ‰ä»£ç åæ–¹è¡¥å…³é”®ç¯å¢ƒè§£å†³</li>
<li><strong>è¡¥ç¯å¢ƒåæ— æŠ¥é”™ï¼Œä½†æ•°æ®ä¸å¯¹ï¼ˆ3ï¼‰ï¼š</strong>å¯èƒ½å­˜åœ¨ç¯å¢ƒæ£€æµ‹ä¸­çš„ toString æ£€æµ‹ï¼Œå¯æœç´¢ <code>native code</code> æˆ– <code>toString</code> å…³é”®å­—ç¡®å®šä»£ç ä¸­æ˜¯å¦æœ‰ toString æ£€æµ‹</li>
</ol>
<h3 id="9-Cookieåçˆ¬ä¸“é¢˜"><a href="#9-Cookieåçˆ¬ä¸“é¢˜" class="headerlink" title="9. Cookieåçˆ¬ä¸“é¢˜"></a>9. Cookieåçˆ¬ä¸“é¢˜</h3><blockquote>
<p><strong>é‡ç‚¹ï¼š<span style="color:red;">Cookieåçˆ¬ä¸­ï¼Œç”Ÿæˆ Cookie çš„ä»£ç æ–‡ä»¶æ˜¯åŠ¨æ€çš„ï¼Œæ¯ä¸€æ¬¡è¯·æ±‚æ‰€è¿”å›çš„ä»£ç éƒ½ä¸ä¸€æ ·ï¼Œä¸‹æ–­ç‚¹ååˆ·æ–°ç½‘é¡µï¼Œæ–­ç‚¹ä¾¿ä¸å†æ˜¯åŸå§‹ä»£ç ä½ç½®ï¼Œæ­¤æ—¶å¯ä»¥æ›¿æ¢æ–‡ä»¶ä¸‹æ–­ç‚¹è§£å†³é—®é¢˜</span></strong></p>
</blockquote>
<ol>
<li><strong>åœ¨æ¯ä¸€æ¬¡æ–­ç‚¹è°ƒè¯•å‰ï¼Œä¸€å®šè¦æ¸…ç©º Cookie å€¼ï¼Œå› ä¸ºå¦‚æœ Cookie ä¸€ç›´ä¸å¤±æ•ˆï¼Œå¯èƒ½å°±ä¸€ç›´è¿›å…¥æ— æ³•æ–­ç‚¹</strong></li>
<li><strong>HttpOnlyå±æ€§ï¼š</strong>å½“æœåŠ¡å™¨åœ¨è®¾ç½® Cookie æ—¶å°† HTTPOnly å±æ€§è®¾ä¸º true æ—¶ï¼Œæ„å‘³ç€è¯¥ Cookie å°†ä¸èƒ½è¢« JavaScript è„šæœ¬è®¿é—®ï¼Œä»…èƒ½åœ¨ HTTP è¯·æ±‚ä¸­è¢«å‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼ˆ<strong>å³è¯¥ Cookie åªèƒ½åœ¨æœåŠ¡å™¨å“åº”ä¸­è®¾ç½®</strong>ï¼‰</li>
<li>ç½‘ç»œé¢æ¿çš„ Cookie æ—¥å¿—ä¸­ï¼Œ<strong>è¯·æ±‚ Cookie</strong> å¯¹åº”è¯·æ±‚å¤´ä¸­æºå¸¦çš„ Cookieï¼Œ<strong>å“åº” Cookie</strong> å¯¹åº”æœåŠ¡å™¨å“åº”è®¾ç½®çš„ Cookie æˆ–æœåŠ¡å™¨å“åº”çš„ js ä»£ç ç”Ÿæˆçš„ Cookie</li>
<li><strong>åœ¨æµ‹è¯•è¡¥ç‘æ•°ç¯å¢ƒæ—¶ï¼Œmeat æ ‡ç­¾ content å±æ€§ã€è‡ªæ‰§è¡Œ js å‡½æ•°ï¼Œå¤–é“¾ js ä»£ç ï¼Œéƒ½å¿…é¡»å®æ—¶ï¼Œä¸”ç¼ºä¸€ä¸å¯</strong></li>
</ol>

                    
                </div>

                
                        
<div class="post-copyright-info-container border-box">
    <div class="copyright-info-content border-box">
        <div class="copyright-info-top border-box">
            <div class="copyright-post-title border-box text-ellipsis">
                04_JSé€†å‘_è¡¥ç¯å¢ƒä¸“é¢˜
            </div>

            <div class="copyright-post-link border-box text-ellipsis">
                2024/01/01/04-jsé€†å‘-è¡¥ç¯å¢ƒä¸“é¢˜/
            </div>
        </div>

        <div class="copyright-info-bottom border-box">
            <div class="copyright-post-author bottom-item">
                <div class="type">
                    ä½œè€…
                </div>
                <div class="content">xfblog</div>
            </div>

            <div class="post-time bottom-item">
                <div class="type">
                    å‘å¸ƒäº
                </div>
                <div class="content">2024-01-01 00:00</div>
            </div>


            <div class="post-license bottom-item">
                <div class="type">
                    è®¸å¯
                </div>
                <div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0">
                    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" target="_blank">
                        
                            <i class="fa-brands fa-creative-commons"></i>
                            <i class="fa-brands fa-creative-commons-by"></i>
                            <i class="fa-brands fa-creative-commons-nc"></i>
                            <i class="fa-brands fa-creative-commons-sa"></i>
                        
                    </a>
                </div>
            </div>
        </div>

        <i class="copyright-bg fa-solid fa-copyright"></i>
    </div>
    <div class="copy-copyright-info flex-center tooltip" data-tooltip-content="å¤åˆ¶ç‰ˆæƒä¿¡æ¯" data-tooltip-offset-y="-2px">
        <i class="fa-solid fa-copy"></i>
    </div>
</div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Python/">Python</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                            <div class="post-share-container border-box">
    <ul class="share-list-wrap border-box">
        <li class="qq share-item border-box flex-center tooltip"
            data-tooltip-content="åˆ†äº«åˆ° QQ"
        >
            <i class="fa-brands fa-qq"></i>
        </li>
        <li class="wechat share-item border-box flex-center tooltip tooltip-img"
            data-tooltip-content="åˆ†äº«åˆ°å¾®ä¿¡"
            data-tooltip-img-tip="å¾®ä¿¡æ‰«ä¸€æ‰«"
            data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"
        >
            <i class="fa-brands fa-weixin"></i>
        </li>
        <li class="weibo share-item border-box flex-center tooltip"
            data-tooltip-content="åˆ†äº«åˆ°å¾®åš"
        >
            <i class="fa-brands fa-weibo"></i>
        </li>
    </ul>
</div>

                        
                    </div>
                </div>

                
                    

<div class="reward-author-container border-box flex-center">
    <div class="reward-btn border-box flex-center tooltip tooltip-img"
            data-tooltip-img-url="/images/zfb.webp"
            data-tooltip-img-trigger="click"
            data-tooltip-img-style="top: -6px;"
    >
        <i class="fa-solid fa-gift"></i>&nbsp;åˆ›ä½œä¸æ˜“ï¼Œæ‰“èµéšæ„ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›ğŸ’ªï¼
    </div>
</div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2024/01/15/05-js%E9%80%86%E5%90%91-%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"
                                   title="05_JSé€†å‘_åŠ å¯†ç®—æ³•"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">05_JSé€†å‘_åŠ å¯†ç®—æ³•</span>
                                        <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2023/12/01/ubuntu-18-04-6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"
                                   title="03_Python_ubuntuå®‰è£…é…ç½®"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">03_Python_ubuntuå®‰è£…é…ç½®</span>
                                        <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81JS-%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80"><span class="nav-text">ä¸€ã€JS è¯­æ³•åŸºç¡€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-text">1. åŸºç¡€è¯­æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%87%BD%E6%95%B0%E7%9A%84-arguments-%E5%AF%B9%E8%B1%A1"><span class="nav-text">2. å‡½æ•°çš„ arguments å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-text">3. è‡ªæ‰§è¡Œå‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">4. åŸå‹é“¾ä¸æ„é€ å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Object-%E7%9B%B8%E5%85%B3%E9%87%8D%E7%82%B9%E6%96%B9%E6%B3%95"><span class="nav-text">5. Object ç›¸å…³é‡ç‚¹æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%B8%B8%E7%94%A8%E5%AF%B9%E8%B1%A1-API"><span class="nav-text">6. å¸¸ç”¨å¯¹è±¡ API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-this-%E2%80%93-call%E3%80%81apply-%E5%92%8C-bind"><span class="nav-text">7. this â€“&gt; callã€apply å’Œ bind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-ES6%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="nav-text">8. ES6è¯­æ³•ç³–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81JS-%E8%AF%AD%E6%B3%95%E8%A1%A5%E5%85%85"><span class="nav-text">äºŒã€JS è¯­æ³•è¡¥å……</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%8C%E5%85%A8%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1"><span class="nav-text">1. å®Œå…¨æ‹·è´å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%86%85%E9%83%A8%E5%87%BD%E6%95%B0%E5%AF%BC%E5%87%BA"><span class="nav-text">2. å†…éƒ¨å‡½æ•°å¯¼å‡º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BD%AE%E7%A9%BA%E6%96%B9%E6%B3%95"><span class="nav-text">3. ç½®ç©ºæ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-json-%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-text">4. json æ•°æ®çš„å¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%AE%9A%E6%97%B6%E5%99%A8%E8%AF%A6%E8%A7%A3"><span class="nav-text">5. å®šæ—¶å™¨è¯¦è§£</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81JS-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="nav-text">ä¸‰ã€JS å¼‚æ­¥æ“ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-XHR-%E5%AF%B9%E8%B1%A1"><span class="nav-text">1. XHR å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ajax-%E6%8A%80%E6%9C%AF"><span class="nav-text">2. ajax æŠ€æœ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Promise-%E5%AF%B9%E8%B1%A1"><span class="nav-text">3. Promise å¯¹è±¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E8%A1%A5%E7%8E%AF%E5%A2%83-demo"><span class="nav-text">å››ã€è¡¥ç¯å¢ƒ demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-getOwnPropertyDescriptors"><span class="nav-text">1. getOwnPropertyDescriptors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-hook-Date-%E4%BC%AA%E9%80%A0%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%94"><span class="nav-text">2. hook Date ä¼ªé€ æ—¶é—´é—´éš”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-hook-Function-%E7%BB%95%E8%BF%87%E5%8F%8D-hook"><span class="nav-text">3. hook Function ç»•è¿‡å hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-hook-indexOf-%E5%BC%82%E5%B8%B8%E5%A0%86%E6%A0%88%E6%A3%80%E6%B5%8B"><span class="nav-text">4. hook indexOf å¼‚å¸¸å †æ ˆæ£€æµ‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%86%85%E7%BD%AE-Symbol-%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B"><span class="nav-text">5. å†…ç½® Symbol ç¯å¢ƒæ£€æµ‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E8%A1%A5%E7%8E%AF%E5%A2%83-VS-%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B"><span class="nav-text">äº”ã€è¡¥ç¯å¢ƒ VS ç¯å¢ƒæ£€æµ‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-nvm-%E2%80%93-node-%E7%89%88%E6%9C%AC"><span class="nav-text">1. nvm â€“ node ç‰ˆæœ¬</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Proxy-Reflect-%E4%BB%A3%E7%90%86"><span class="nav-text">2. Proxy|Reflect ä»£ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%A1%A5%E7%8E%AF%E5%A2%83%E6%80%9D%E8%B7%AF"><span class="nav-text">3. è¡¥ç¯å¢ƒæ€è·¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1"><span class="nav-text">4. æµè§ˆå™¨å¤åˆ¶å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E5%AD%98%E6%BC%AB%E6%B8%B8%E5%AE%9A%E4%BD%8D"><span class="nav-text">5. æµè§ˆå™¨å†…å­˜æ¼«æ¸¸å®šä½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-EventTarget-API"><span class="nav-text">6. EventTarget API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81Canvas-%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%A0%81%E4%B8%93%E9%A2%98"><span class="nav-text">å…­ã€Canvas ä¸éªŒè¯ç ä¸“é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-canvas-%E7%BB%98%E5%9B%BE%E6%93%8D%E4%BD%9C"><span class="nav-text">1. canvas ç»˜å›¾æ“ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-hook-canvas-%E8%BF%98%E5%8E%9F%E6%96%B9%E6%B3%95"><span class="nav-text">2. hook canvas è¿˜åŸæ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%BA%95%E5%9B%BE%E4%B9%B1%E5%BA%8F%E8%BF%98%E5%8E%9F"><span class="nav-text">3. éªŒè¯ç åº•å›¾ä¹±åºè¿˜åŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%B8%87%E8%83%BD-canvas-%E5%BA%95%E5%9B%BE%E8%BF%98%E5%8E%9F"><span class="nav-text">4. ä¸‡èƒ½ canvas åº•å›¾è¿˜åŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%BB%91%E5%8A%A8%E8%B7%9D%E7%A6%BB-distance-%E8%AF%86%E5%88%AB"><span class="nav-text">5. æ»‘åŠ¨è·ç¦» distance è¯†åˆ«</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E9%BC%A0%E6%A0%87%E8%BD%A8%E8%BF%B9-track-%E7%94%9F%E6%88%90"><span class="nav-text">6. é¼ æ ‡è½¨è¿¹ track ç”Ÿæˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%82%E6%95%B0%E8%A1%A5%E7%8E%AF%E5%A2%83%E6%80%9D%E8%B7%AF"><span class="nav-text">7. éªŒè¯ç å‚æ•°è¡¥ç¯å¢ƒæ€è·¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E9%80%86%E5%90%91%E5%AE%9E%E6%88%98"><span class="nav-text">ä¸ƒã€éªŒè¯ç é€†å‘å®æˆ˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%9E%81%E9%AA%8C3%E4%BB%A3%E6%BB%91%E5%9D%97"><span class="nav-text">1. æéªŒ3ä»£æ»‘å—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%9E%81%E9%AA%8C3%E4%BB%A3%E7%82%B9%E9%80%89"><span class="nav-text">2. æéªŒ3ä»£ç‚¹é€‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E5%B8%B8%E7%94%A8-Hook-%E8%84%9A%E6%9C%AC"><span class="nav-text">å…«ã€å¸¸ç”¨ Hook è„šæœ¬</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-hook-Storage"><span class="nav-text">1. hook Storage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-hook-eval"><span class="nav-text">2. hook eval</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-hook-%E5%85%A8%E5%B1%80%E5%B1%9E%E6%80%A7"><span class="nav-text">3. hook å…¨å±€å±æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-hook-XHR-open"><span class="nav-text">4. hook XHR open</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-hook-json"><span class="nav-text">5. hook json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-hook-cookie"><span class="nav-text">6. hook cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-hook-%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-text">7. hook è¯·æ±‚&#x2F;å“åº”æ‹¦æˆªå™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-hook-XHR-headers"><span class="nav-text">8. hook XHR headers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E5%BF%AB%E9%80%9F%E6%89%B9%E9%87%8F-hook-%E7%A2%B0%E6%92%9E"><span class="nav-text">9. å¿«é€Ÿæ‰¹é‡ hook ç¢°æ’</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81Hook-%E5%8F%8D%E8%B0%83%E8%AF%95%E7%BB%95%E8%BF%87"><span class="nav-text">ä¹ã€Hook åè°ƒè¯•ç»•è¿‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BF%9D%E6%8A%A4-console-API"><span class="nav-text">1. ä¿æŠ¤ console API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%BC%95%E5%85%A5-Symbol-%E5%AF%B9%E8%B1%A1"><span class="nav-text">2. å¼•å…¥ Symbol å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BC%AA%E9%80%A0%E5%87%BD%E6%95%B0-toString"><span class="nav-text">3. ä¼ªé€ å‡½æ•° toString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AE%9A%E6%97%B6%E5%99%A8-debugger"><span class="nav-text">4. å®šæ—¶å™¨ debugger</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-constructor-debugger"><span class="nav-text">5. constructor debugger</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%8F%8D-debugger-%E6%A1%88%E4%BE%8B"><span class="nav-text">6. å debugger æ¡ˆä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E9%80%86%E5%90%91%E6%8A%80%E5%B7%A7%E4%B8%93%E9%A2%98"><span class="nav-text">åã€é€†å‘æŠ€å·§ä¸“é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%89%B9%E6%AE%8A%E9%80%86%E5%90%91%E4%BB%A3%E7%A0%81"><span class="nav-text">1. ç‰¹æ®Šé€†å‘ä»£ç </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%9A%E4%BD%8D%E5%8A%A0%E5%AF%86%E6%80%BB%E7%BB%93"><span class="nav-text">2. å®šä½åŠ å¯†æ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95"><span class="nav-text">3. è°ƒè¯•é—®é¢˜è®°å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E4%B8%93%E9%A2%98"><span class="nav-text">4. ä»£ç è°ƒè¯•ä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Webpack%E4%B8%93%E9%A2%98"><span class="nav-text">5. Webpackä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-OB%E6%B7%B7%E6%B7%86%E4%B8%93%E9%A2%98"><span class="nav-text">6. OBæ··æ·†ä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-jsvmp%E6%8A%80%E6%9C%AF%E4%B8%93%E9%A2%98"><span class="nav-text">7. jsvmpæŠ€æœ¯ä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E8%A1%A5%E7%8E%AF%E5%A2%83%E4%B8%93%E9%A2%98"><span class="nav-text">8. è¡¥ç¯å¢ƒä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Cookie%E5%8F%8D%E7%88%AC%E4%B8%93%E9%A2%98"><span class="nav-text">9. Cookieåçˆ¬ä¸“é¢˜</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
    Copyright&nbsp;&copy;&nbsp;<span>2021</span>&nbsp;-&nbsp;2024&nbsp;<a href="https://xfblog.cn/" target="_self">å°å‚…åšå®¢</a>&nbsp;-&nbsp;All&nbsp;rights&nbsp;reserved.&nbsp;&nbsp;&nbsp;&nbsp;
    
            <!-- &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">xfblog</a> -->
        
    </div>

    <!-- <div class="theme-info info-item">
        ç”±&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;é©±åŠ¨&nbsp;&&nbsp;ä¸»é¢˜&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
    </div> -->

    

    

    
        <div class="record-info info-item">
            
                
                    <div class="record-item border-box">
                        <a class=""
                           target="_blank"
                           href="https://beian.miit.gov.cn"
                        >
                            èœ€ICPå¤‡2021021033å·-1
                        </a>
                    </div>
                
            
                
                    <div class="record-item border-box">
                        <a class=""
                           target="_blank"
                           href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51138102000134"
                        >
                            å·å…¬ç½‘å®‰å¤‡ 51138102000134å·
                        </a>
                    </div>
                
            
        </div>&nbsp;&nbsp;&nbsp;&nbsp;
    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81JS-%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80"><span class="nav-text">ä¸€ã€JS è¯­æ³•åŸºç¡€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-text">1. åŸºç¡€è¯­æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%87%BD%E6%95%B0%E7%9A%84-arguments-%E5%AF%B9%E8%B1%A1"><span class="nav-text">2. å‡½æ•°çš„ arguments å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-text">3. è‡ªæ‰§è¡Œå‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">4. åŸå‹é“¾ä¸æ„é€ å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Object-%E7%9B%B8%E5%85%B3%E9%87%8D%E7%82%B9%E6%96%B9%E6%B3%95"><span class="nav-text">5. Object ç›¸å…³é‡ç‚¹æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%B8%B8%E7%94%A8%E5%AF%B9%E8%B1%A1-API"><span class="nav-text">6. å¸¸ç”¨å¯¹è±¡ API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-this-%E2%80%93-call%E3%80%81apply-%E5%92%8C-bind"><span class="nav-text">7. this â€“&gt; callã€apply å’Œ bind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-ES6%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="nav-text">8. ES6è¯­æ³•ç³–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81JS-%E8%AF%AD%E6%B3%95%E8%A1%A5%E5%85%85"><span class="nav-text">äºŒã€JS è¯­æ³•è¡¥å……</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%8C%E5%85%A8%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1"><span class="nav-text">1. å®Œå…¨æ‹·è´å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%86%85%E9%83%A8%E5%87%BD%E6%95%B0%E5%AF%BC%E5%87%BA"><span class="nav-text">2. å†…éƒ¨å‡½æ•°å¯¼å‡º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BD%AE%E7%A9%BA%E6%96%B9%E6%B3%95"><span class="nav-text">3. ç½®ç©ºæ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-json-%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-text">4. json æ•°æ®çš„å¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%AE%9A%E6%97%B6%E5%99%A8%E8%AF%A6%E8%A7%A3"><span class="nav-text">5. å®šæ—¶å™¨è¯¦è§£</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81JS-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="nav-text">ä¸‰ã€JS å¼‚æ­¥æ“ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-XHR-%E5%AF%B9%E8%B1%A1"><span class="nav-text">1. XHR å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ajax-%E6%8A%80%E6%9C%AF"><span class="nav-text">2. ajax æŠ€æœ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Promise-%E5%AF%B9%E8%B1%A1"><span class="nav-text">3. Promise å¯¹è±¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E8%A1%A5%E7%8E%AF%E5%A2%83-demo"><span class="nav-text">å››ã€è¡¥ç¯å¢ƒ demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-getOwnPropertyDescriptors"><span class="nav-text">1. getOwnPropertyDescriptors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-hook-Date-%E4%BC%AA%E9%80%A0%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%94"><span class="nav-text">2. hook Date ä¼ªé€ æ—¶é—´é—´éš”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-hook-Function-%E7%BB%95%E8%BF%87%E5%8F%8D-hook"><span class="nav-text">3. hook Function ç»•è¿‡å hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-hook-indexOf-%E5%BC%82%E5%B8%B8%E5%A0%86%E6%A0%88%E6%A3%80%E6%B5%8B"><span class="nav-text">4. hook indexOf å¼‚å¸¸å †æ ˆæ£€æµ‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%86%85%E7%BD%AE-Symbol-%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B"><span class="nav-text">5. å†…ç½® Symbol ç¯å¢ƒæ£€æµ‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E8%A1%A5%E7%8E%AF%E5%A2%83-VS-%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B"><span class="nav-text">äº”ã€è¡¥ç¯å¢ƒ VS ç¯å¢ƒæ£€æµ‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-nvm-%E2%80%93-node-%E7%89%88%E6%9C%AC"><span class="nav-text">1. nvm â€“ node ç‰ˆæœ¬</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Proxy-Reflect-%E4%BB%A3%E7%90%86"><span class="nav-text">2. Proxy|Reflect ä»£ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%A1%A5%E7%8E%AF%E5%A2%83%E6%80%9D%E8%B7%AF"><span class="nav-text">3. è¡¥ç¯å¢ƒæ€è·¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1"><span class="nav-text">4. æµè§ˆå™¨å¤åˆ¶å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E5%AD%98%E6%BC%AB%E6%B8%B8%E5%AE%9A%E4%BD%8D"><span class="nav-text">5. æµè§ˆå™¨å†…å­˜æ¼«æ¸¸å®šä½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-EventTarget-API"><span class="nav-text">6. EventTarget API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81Canvas-%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%A0%81%E4%B8%93%E9%A2%98"><span class="nav-text">å…­ã€Canvas ä¸éªŒè¯ç ä¸“é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-canvas-%E7%BB%98%E5%9B%BE%E6%93%8D%E4%BD%9C"><span class="nav-text">1. canvas ç»˜å›¾æ“ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-hook-canvas-%E8%BF%98%E5%8E%9F%E6%96%B9%E6%B3%95"><span class="nav-text">2. hook canvas è¿˜åŸæ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%BA%95%E5%9B%BE%E4%B9%B1%E5%BA%8F%E8%BF%98%E5%8E%9F"><span class="nav-text">3. éªŒè¯ç åº•å›¾ä¹±åºè¿˜åŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%B8%87%E8%83%BD-canvas-%E5%BA%95%E5%9B%BE%E8%BF%98%E5%8E%9F"><span class="nav-text">4. ä¸‡èƒ½ canvas åº•å›¾è¿˜åŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%BB%91%E5%8A%A8%E8%B7%9D%E7%A6%BB-distance-%E8%AF%86%E5%88%AB"><span class="nav-text">5. æ»‘åŠ¨è·ç¦» distance è¯†åˆ«</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E9%BC%A0%E6%A0%87%E8%BD%A8%E8%BF%B9-track-%E7%94%9F%E6%88%90"><span class="nav-text">6. é¼ æ ‡è½¨è¿¹ track ç”Ÿæˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%82%E6%95%B0%E8%A1%A5%E7%8E%AF%E5%A2%83%E6%80%9D%E8%B7%AF"><span class="nav-text">7. éªŒè¯ç å‚æ•°è¡¥ç¯å¢ƒæ€è·¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E9%80%86%E5%90%91%E5%AE%9E%E6%88%98"><span class="nav-text">ä¸ƒã€éªŒè¯ç é€†å‘å®æˆ˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%9E%81%E9%AA%8C3%E4%BB%A3%E6%BB%91%E5%9D%97"><span class="nav-text">1. æéªŒ3ä»£æ»‘å—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%9E%81%E9%AA%8C3%E4%BB%A3%E7%82%B9%E9%80%89"><span class="nav-text">2. æéªŒ3ä»£ç‚¹é€‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E5%B8%B8%E7%94%A8-Hook-%E8%84%9A%E6%9C%AC"><span class="nav-text">å…«ã€å¸¸ç”¨ Hook è„šæœ¬</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-hook-Storage"><span class="nav-text">1. hook Storage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-hook-eval"><span class="nav-text">2. hook eval</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-hook-%E5%85%A8%E5%B1%80%E5%B1%9E%E6%80%A7"><span class="nav-text">3. hook å…¨å±€å±æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-hook-XHR-open"><span class="nav-text">4. hook XHR open</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-hook-json"><span class="nav-text">5. hook json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-hook-cookie"><span class="nav-text">6. hook cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-hook-%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-text">7. hook è¯·æ±‚&#x2F;å“åº”æ‹¦æˆªå™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-hook-XHR-headers"><span class="nav-text">8. hook XHR headers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E5%BF%AB%E9%80%9F%E6%89%B9%E9%87%8F-hook-%E7%A2%B0%E6%92%9E"><span class="nav-text">9. å¿«é€Ÿæ‰¹é‡ hook ç¢°æ’</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81Hook-%E5%8F%8D%E8%B0%83%E8%AF%95%E7%BB%95%E8%BF%87"><span class="nav-text">ä¹ã€Hook åè°ƒè¯•ç»•è¿‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BF%9D%E6%8A%A4-console-API"><span class="nav-text">1. ä¿æŠ¤ console API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%BC%95%E5%85%A5-Symbol-%E5%AF%B9%E8%B1%A1"><span class="nav-text">2. å¼•å…¥ Symbol å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BC%AA%E9%80%A0%E5%87%BD%E6%95%B0-toString"><span class="nav-text">3. ä¼ªé€ å‡½æ•° toString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AE%9A%E6%97%B6%E5%99%A8-debugger"><span class="nav-text">4. å®šæ—¶å™¨ debugger</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-constructor-debugger"><span class="nav-text">5. constructor debugger</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%8F%8D-debugger-%E6%A1%88%E4%BE%8B"><span class="nav-text">6. å debugger æ¡ˆä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E9%80%86%E5%90%91%E6%8A%80%E5%B7%A7%E4%B8%93%E9%A2%98"><span class="nav-text">åã€é€†å‘æŠ€å·§ä¸“é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%89%B9%E6%AE%8A%E9%80%86%E5%90%91%E4%BB%A3%E7%A0%81"><span class="nav-text">1. ç‰¹æ®Šé€†å‘ä»£ç </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%9A%E4%BD%8D%E5%8A%A0%E5%AF%86%E6%80%BB%E7%BB%93"><span class="nav-text">2. å®šä½åŠ å¯†æ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95"><span class="nav-text">3. è°ƒè¯•é—®é¢˜è®°å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E4%B8%93%E9%A2%98"><span class="nav-text">4. ä»£ç è°ƒè¯•ä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Webpack%E4%B8%93%E9%A2%98"><span class="nav-text">5. Webpackä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-OB%E6%B7%B7%E6%B7%86%E4%B8%93%E9%A2%98"><span class="nav-text">6. OBæ··æ·†ä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-jsvmp%E6%8A%80%E6%9C%AF%E4%B8%93%E9%A2%98"><span class="nav-text">7. jsvmpæŠ€æœ¯ä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E8%A1%A5%E7%8E%AF%E5%A2%83%E4%B8%93%E9%A2%98"><span class="nav-text">8. è¡¥ç¯å¢ƒä¸“é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Cookie%E5%8F%8D%E7%88%AC%E4%B8%93%E9%A2%98"><span class="nav-text">9. Cookieåçˆ¬ä¸“é¢˜</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>





<!-- common js -->
<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/toggle-theme.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/code-block.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/libs/anime.min.js"></script>

<!-- local search -->

    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/local-search.js"></script>


<!-- lazyload -->

    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/lazyload.js"></script>


<div class="pjax">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/post/post-helper.js"></script>

        <!-- toc -->
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/post/toc.js"></script>
        

        <!-- copyright-info -->
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/post/copyright-info.js"></script>
        

        <!-- share -->
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/post/share.js"></script>
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->

    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.2.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart()
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd()
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'))
            KEEP.initExecute()
        });
    });
</script>




    
        
            
<script class="custom-inject-js" src="/js/run_time.js" data-pjax></script>

        
    
        
            
<script class="custom-inject-js" src="/js/code_click_copy.js" data-pjax></script>

        
    
        
            
<script class="custom-inject-js" src="/js/copyrightpro.js" data-pjax></script>

        
    

</body>
</html>
